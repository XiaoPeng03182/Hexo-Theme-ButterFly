<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JavaWeb-Learing | 小鹏的博客</title><meta name="author" content="小鹏"><meta name="copyright" content="小鹏"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="黑马程序员-JavaWeb的学习">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb-Learing">
<meta property="og:url" content="http://example.com/2024/09/09/JavaWeb-Learing/Web-Learning/index.html">
<meta property="og:site_name" content="小鹏的博客">
<meta property="og:description" content="黑马程序员-JavaWeb的学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png">
<meta property="article:published_time" content="2024-09-09T09:19:57.302Z">
<meta property="article:modified_time" content="2024-09-09T09:21:45.853Z">
<meta property="article:author" content="小鹏">
<meta property="article:tag" content="JavaWeb-Learing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/09/09/JavaWeb-Learing/Web-Learning/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"距离上次更新已有","messageNext":"文章可能某些部分也过时"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb-Learing',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-09 17:21:45'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 8 || hour >= 22
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image%20(1).png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog-info"><a href="/" title="小鹏的博客"><img class="site-icon" src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image%20(1).png"/><span class="site-name">小鹏的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb-Learing</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-09T09:19:57.302Z" title="发表于 2024-09-09 17:19:57">2024-09-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-09T09:21:45.853Z" title="更新于 2024-09-09 17:21:45">2024-09-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web%E5%AD%A6%E4%B9%A0/">Web学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web%E5%AD%A6%E4%B9%A0/JavaWeb-Learing/">JavaWeb-Learing</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb-Learing"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Web-Learing"><a href="#Web-Learing" class="headerlink" title="Web-Learing"></a>Web-Learing</h1><h2 id="一、Mybatis-Learning"><a href="#一、Mybatis-Learning" class="headerlink" title="一、Mybatis-Learning"></a>一、Mybatis-Learning</h2><h3 id="1、mybatis介绍"><a href="#1、mybatis介绍" class="headerlink" title="1、mybatis介绍"></a>1、mybatis介绍</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/mybatis%E4%BB%8B%E7%BB%8D.png" alt="mybatis介绍" style="zoom:50%;" />



<h3 id="2、lombok-简化Data数据类"><a href="#2、lombok-简化Data数据类" class="headerlink" title="2、lombok-简化Data数据类"></a>2、lombok-简化Data数据类</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/lombok-%E7%AE%80%E5%8C%96Data%E6%95%B0%E6%8D%AE%E7%B1%BB.png" alt="lombok-简化Data数据类" style="zoom:50%;" />



<h3 id="3、数据库连接池（Connection）"><a href="#3、数据库连接池（Connection）" class="headerlink" title="3、数据库连接池（Connection）"></a>3、数据库连接池（Connection）</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.png" alt="数据库连接池" style="zoom:50%;" />

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E6%B1%A0-%E5%B8%B8%E7%94%A8%E4%BA%A7%E5%93%81.png" alt="数据连接池-常用产品" style="zoom: 50%;" />



<h3 id="4、-mybatis使用基本流程"><a href="#4、-mybatis使用基本流程" class="headerlink" title="4、&#x3D;&#x3D;mybatis使用基本流程&#x3D;&#x3D;"></a>4、&#x3D;&#x3D;mybatis使用基本流程&#x3D;&#x3D;</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/mybatis%E4%BD%BF%E7%94%A8%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B.png" alt="mybatis使用基本流程" style="zoom:50%;" />



<h3 id="5、预编译SQL与SQL注入"><a href="#5、预编译SQL与SQL注入" class="headerlink" title="5、预编译SQL与SQL注入"></a>5、预编译SQL与SQL注入</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/%E9%A2%84%E7%BC%96%E8%AF%91SQL.png" alt="预编译SQL" style="zoom:50%;" />

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/sql%E6%B3%A8%E5%85%A5.png" alt="sql注入" style="zoom:50%;" />



<h3 id="6、参数占位符"><a href="#6、参数占位符" class="headerlink" title="6、参数占位符"></a>6、参数占位符</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/%E5%8F%82%E6%95%B0%E5%8D%A0%E4%BD%8D%E7%AC%A6.png" alt="参数占位符" style="zoom:50%;" />



<h3 id="7、Delete删除数据"><a href="#7、Delete删除数据" class="headerlink" title="7、Delete删除数据"></a>7、Delete删除数据</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807194119315.png" alt="image-20240807194119315" style="zoom:50%;" />



<h3 id="8、Insert增加数据"><a href="#8、Insert增加数据" class="headerlink" title="8、Insert增加数据"></a>8、Insert增加数据</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807194325959.png" alt="image-20240807194325959"></p>
<h4 id="（1）主键返回"><a href="#（1）主键返回" class="headerlink" title="（1）主键返回"></a>（1）主键返回</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取返回的主键，keyProperty的值表示返回到的位置，这里返回到Emp对象的id属性中。</span></span><br><span class="line"><span class="meta">@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807194500921.png" alt="image-20240807194500921"></p>
<h3 id="9、Update更新数据"><a href="#9、Update更新数据" class="headerlink" title="9、Update更新数据"></a>9、Update更新数据</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//更新员工</span></span><br><span class="line"><span class="meta">@Update(&quot;update emp set username = #&#123;username&#125;, name = #&#123;name&#125;, gender = #&#123;gender&#125;, image = #&#123;image&#125;,&quot; +</span></span><br><span class="line"><span class="meta">        &quot; job = #&#123;job&#125;, entrydate = #&#123;entrydate&#125;, dept_id = #&#123;deptId&#125;,update_time = #&#123;updateTime&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Emp emp)</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807195244632.png" alt="image-20240807195244632"></p>
<h3 id="10、Select查询数据"><a href="#10、Select查询数据" class="headerlink" title="10、Select查询数据"></a>10、Select查询数据</h3><h4 id="1-mybatis驼峰命名自动映射开关"><a href="#1-mybatis驼峰命名自动映射开关" class="headerlink" title="(1)&#x3D;&#x3D;mybatis驼峰命名自动映射开关&#x3D;&#x3D;"></a>(1)&#x3D;&#x3D;mybatis驼峰命名自动映射开关&#x3D;&#x3D;</h4><p><strong>即从数据库字段名a_column映射到Java属性名aColumn。</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#开启mybatis的驼峰命名自动映射开关 a_column ------&gt; aCloumn,即从数据库字段名a_column 映射到 Java属性名aColumn。</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807200136858.png" alt="image-20240807200136858"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807200653452.png" alt="image-20240807200653452"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807200716032.png" alt="image-20240807200716032"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//方案三: 开启mybatis的驼峰命名自动映射开关 </span></span><br><span class="line"><span class="comment">// --- a_cloumn ------&gt; aColumn</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据ID查询员工</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Emp <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方案一: 给字段起别名, 让别名与实体类属性一致</span></span><br><span class="line"><span class="meta">@Select(&quot;select id, username, password, name, gender, image, job, entrydate, dept_id deptId, create_time createTime, update_time updateTime from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> Emp <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方案二: 通过@Results, @Result注解手动映射封装</span></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">           @Result(column = &quot;dept_id&quot;, property = &quot;deptId&quot;),</span></span><br><span class="line"><span class="meta">           @Result(column = &quot;create_time&quot;, property = &quot;createTime&quot;),</span></span><br><span class="line"><span class="meta">           @Result(column = &quot;update_time&quot;, property = &quot;updateTime&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Emp <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure>



<h4 id="2-条件查询"><a href="#2-条件查询" class="headerlink" title="(2)条件查询"></a>(2)条件查询</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/%E5%8F%82%E6%95%B0%E5%8D%A0%E4%BD%8D%E7%AC%A6.png" alt="参数占位符" style="zoom:50%;" />

<p>不使用%${name}%,而使用java提供的&#x3D;&#x3D;<strong>字符拼接函数concat(‘%’,#{name},’%’)</strong>&#x3D;&#x3D;，来避免&#x3D;&#x3D;SQL注入&#x3D;&#x3D;的风险。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807202007672.png" alt="image-20240807202007672"></p>
<p>&#x3D;&#x3D;<strong>版本差异</strong>&#x3D;&#x3D;</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807203018017.png" alt="image-20240807203018017"></p>
<h3 id="11、XML映射文件"><a href="#11、XML映射文件" class="headerlink" title="11、XML映射文件"></a>11、XML映射文件</h3><h4 id="（1）-规范"><a href="#（1）-规范" class="headerlink" title="（1）&#x3D;&#x3D;规范&#x3D;&#x3D;"></a>（1）&#x3D;&#x3D;规范&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240807203436834.png" alt="image-20240807203436834"></p>
<h4 id="（2）xml格式"><a href="#（2）xml格式" class="headerlink" title="（2）xml格式"></a>（2）xml格式</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;commonSelect&quot;</span>&gt;</span></span><br><span class="line">        select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, 					update_time</span><br><span class="line">        from emp</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 动态更新员工--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update2&quot;</span>&gt;</span></span><br><span class="line">        update emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username = #&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>gender = #&#123;gender&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;image != null&quot;</span>&gt;</span>image = #&#123;image&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;job != null&quot;</span>&gt;</span>job = #&#123;job&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;entrydate != null&quot;</span>&gt;</span>entrydate = #&#123;entrydate&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;deptId != null&quot;</span>&gt;</span>dept_id = #&#123;deptId&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #&#123;updateTime&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">            </span><br></pre></td></tr></table></figure>

<p>mybatis-3-mapper.dtd 文件后缀名为dtd, 英文为Document Type Definition，中文翻译为文档类型定义；</p>
<p>mapper表示根节点，mybatis-3-mapper.dtd被定义出来的意义，用来<strong>验证<mapper>*</mapper>中使用的节点的是不是符合规范用的。</strong></p>
<h3 id="12、-Mybatis-动态SQL"><a href="#12、-Mybatis-动态SQL" class="headerlink" title="12、&#x3D;&#x3D;Mybatis-动态SQL&#x3D;&#x3D;"></a>12、&#x3D;&#x3D;Mybatis-动态SQL&#x3D;&#x3D;</h3><h4 id="（1）-if-where-set-标签"><a href="#（1）-if-where-set-标签" class="headerlink" title="（1）&lt; if &gt; ,&lt; where &gt;,&lt; set &gt;标签"></a>（1）&lt; if &gt; ,&lt; where &gt;,&lt; set &gt;标签</h4><h5 id="①概述"><a href="#①概述" class="headerlink" title="①概述"></a>①概述</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808180654788.png" alt="image-20240808180654788"></p>
<h5 id="②案例-动态更新"><a href="#②案例-动态更新" class="headerlink" title="②案例-&#x3D;&#x3D;动态更新&#x3D;&#x3D;"></a>②案例-&#x3D;&#x3D;动态更新&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808175641122.png" alt="image-20240808175641122"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808180537543.png" alt="image-20240808180537543"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 动态更新员工--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update2&quot;</span>&gt;</span></span><br><span class="line">        update emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username = #&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>gender = #&#123;gender&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;image != null&quot;</span>&gt;</span>image = #&#123;image&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;job != null&quot;</span>&gt;</span>job = #&#123;job&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;entrydate != null&quot;</span>&gt;</span>entrydate = #&#123;entrydate&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;deptId != null&quot;</span>&gt;</span>dept_id = #&#123;deptId&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #&#123;updateTime&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="（2）-foreach-标签-批量操作"><a href="#（2）-foreach-标签-批量操作" class="headerlink" title="（2）&lt; foreach &gt;标签-批量操作"></a>（2）&lt; foreach &gt;标签-批量操作</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808181200639.png" alt="image-20240808181200639"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--批量删除员工 (18,19,20)--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        collection: 遍历的集合</span></span><br><span class="line"><span class="comment">        item: 遍历出来的元素</span></span><br><span class="line"><span class="comment">        separator: 分隔符</span></span><br><span class="line"><span class="comment">        open: 遍历开始前拼接的SQL片段</span></span><br><span class="line"><span class="comment">        close: 遍历结束后拼接的SQL片段</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span><br><span class="line">        delete  from emp where id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="（3）-sql-include-标签"><a href="#（3）-sql-include-标签" class="headerlink" title="（3）&lt; sql &gt;,&lt; include &gt;标签"></a>（3）&lt; sql &gt;,&lt; include &gt;标签</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808181947494.png" alt="image-20240808181947494"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;commonSelect&quot;</span>&gt;</span></span><br><span class="line">        select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time</span><br><span class="line">        from emp</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--resultType: 单条记录封装的类型--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;commonSelect&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">                name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span></span><br><span class="line">                and gender = #&#123;gender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null and end != null&quot;</span>&gt;</span></span><br><span class="line">                and entrydate between #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by update_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="二、JavaWeb-Learning"><a href="#二、JavaWeb-Learning" class="headerlink" title="二、JavaWeb-Learning"></a>二、JavaWeb-Learning</h2><h3 id="1、SpringBootWeb请求响应和分层解耦"><a href="#1、SpringBootWeb请求响应和分层解耦" class="headerlink" title="1、SpringBootWeb请求响应和分层解耦"></a>1、SpringBootWeb请求响应和分层解耦</h3><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>在上一次的课程中，我们开发了springbootweb的入门程序。 基于SpringBoot的方式开发一个web应用，浏览器发起请求 &#x2F;hello 后 ，给浏览器返回字符串 “Hello World ~”。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826161735076.png" alt="image-20220826161735076"></p>
<p>其实呢，是我们在浏览器发起请求，请求了我们的后端web服务器(也就是内置的Tomcat)。而我们在开发web程序时呢，定义了一个控制器类Controller，请求会被部署在Tomcat中的Controller接收，然后Controller再给浏览器一个响应，响应一个字符串 “Hello World”。 而在请求响应的过程中是遵循HTTP协议的。</p>
<p>但是呢，这里要告诉大家的时，其实在Tomcat这类Web服务器中，是不识别我们自己定义的Controller的。但是我们前面讲到过Tomcat是一个Servlet容器，是支持Serlvet规范的，所以呢，在tomcat中是可以识别 Servlet程序的。 那我们所编写的XxxController 是如何处理请求的，又与Servlet之间有什么联系呢？</p>
<p>其实呢，在SpringBoot进行web程序开发时，它内置了一个核心的Servlet程序 DispatcherServlet，称之为 核心控制器。 DispatcherServlet 负责接收页面发送的请求，然后根据执行的规则，将请求再转发给后面的请求处理器Controller，请求处理器处理完请求之后，最终再由DispatcherServlet给浏览器响应数据。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826165340157.png" alt="image-20220826165340157"></p>
<p>那将来浏览器发送请求，会携带请求数据，包括：请求行、请求头；请求到达tomcat之后，tomcat会负责解析这些请求数据，然后呢将解析后的请求数据会传递给Servlet程序的HttpServletRequest对象，那也就意味着 HttpServletRequest 对象就可以获取到请求数据。 而Tomcat，还给Servlet程序传递了一个参数 HttpServletResponse，通过这个对象，我们就可以给浏览器设置响应数据 。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826171407354.png" alt="image-20220826171407354"> </p>
<p>那上述所描述的这种浏览器&#x2F;服务器的架构模式呢，我们称之为：BS架构。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826171454775.png" alt="image-20220826171454775"> </p>
<p>• BS架构：Browser&#x2F;Server，浏览器&#x2F;服务器架构模式。客户端只需要浏览器，应用程序的逻辑和数据都存储在服务端。</p>
<p>那今天呢，我们的课程内容主要就围绕着：请求、响应进行。 今天课程内容，主要包含三个部分：</p>
<blockquote>
<ul>
<li>请求</li>
<li>响应</li>
<li>分层解耦</li>
</ul>
</blockquote>
<h4 id="1-请求"><a href="#1-请求" class="headerlink" title="1. 请求"></a>1. 请求</h4><p>在本章节呢，我们主要讲解，如何接收页面传递过来的请求数据。</p>
<h5 id="1-1-Postman"><a href="#1-1-Postman" class="headerlink" title="1.1 Postman"></a>1.1 Postman</h5><p>之前我们课程中有提到当前最为主流的开发模式：前后端分离</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203095553048.png" alt="image-20221203095553048"></p>
<p>在这种模式下，前端技术人员基于”接口文档”，开发前端程序；后端技术人员也基于”接口文档”，开发后端程序。</p>
<p>由于前后端分离，对我们后端技术人员来讲，在开发过程中，是没有前端页面的，那我们怎么测试自己所开发的程序呢？</p>
<p>方式1：像之前SpringBoot入门案例中一样，直接使用浏览器。在浏览器中输入地址，测试后端程序。</p>
<ul>
<li>弊端：在浏览器地址栏中输入地址这种方式都是GET请求，如何我们要用到POST请求怎么办呢？<ul>
<li>要解决POST请求，需要程序员自己编写前端代码（比较麻烦）</li>
</ul>
</li>
</ul>
<p>方式2：使用专业的接口测试工具（课程中我们使用Postman工具）</p>
<h6 id="1-1-1-介绍"><a href="#1-1-1-介绍" class="headerlink" title="1.1.1 介绍"></a>1.1.1 介绍</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826173003949.png" alt="image-20220826173003949"> </p>
<ul>
<li><p>Postman是一款功能强大的网页调试与发送网页HTTP请求的Chrome插件。</p>
<blockquote>
<p>Postman原是Chrome浏览器的插件，可以模拟浏览器向后端服务器发起任何形式(如:get、post)的HTTP请求</p>
<p>使用Postman还可以在发起请求时，携带一些请求参数、请求头等信息</p>
</blockquote>
</li>
<li><p>作用：常用于进行接口测试</p>
</li>
<li><p>特征</p>
<ul>
<li>简单</li>
<li>实用</li>
<li>美观</li>
<li>大方</li>
</ul>
</li>
</ul>
<h6 id="1-1-2-安装"><a href="#1-1-2-安装" class="headerlink" title="1.1.2 安装"></a>1.1.2 安装</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826173919556.png" alt="image-20220826173919556"> </p>
<p>双击资料中提供的<code>Postman-win64-8.3.1-Setup.exe</code>即可自动安装。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826174601266.png" alt="image-20220826174601266"> </p>
<p>安装完成之后，进入页面中会提示有新版本可以升级（无需升级）</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826174900779.png" alt="image-20220826174900779"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203112117979.png" alt="image-20221203112117979"></p>
<p>界面介绍:</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826175306141.png" alt="image-20220826175306141"> </p>
<p><strong>如果我们需要将测试的请求信息保存下来，就需要创建一个postman的账号，然后登录之后才可以。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203103623435.png" alt="image-20221203103623435"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203112252985.png" alt="image-20221203112252985"> </p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203112320687.png" alt="image-20221203112320687"> </p>
<p>登录完成之后，可以创建工作空间：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203113552785.png" alt="image-20221203113552785"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203113925733.png" alt="image-20221203113925733"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203113847126.png" alt="image-20221203113847126"></p>
<p>创建请求：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203114031824.png" alt="image-20221203114031824"></p>
<p>点击”Save”，保存当前请求</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203114231572.png" alt="image-20221203114231572"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203114806665.png" alt="image-20221203114806665"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203114852752.png" alt="image-20221203114852752"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203115001098.png" alt="image-20221203115001098"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203115041949.png" alt="image-20221203115041949"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203115110440.png" alt="image-20221203115110440"></p>
<h5 id="1-2-简单参数"><a href="#1-2-简单参数" class="headerlink" title="1.2 简单参数"></a>1.2 简单参数</h5><p>简单参数：在向服务器发起请求时，向服务器传递的是一些普通的请求数据。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826180550583.png" alt="image-20220826180550583"></p>
<p>那么在后端程序中，如何接收传递过来的普通参数数据呢？</p>
<p>我们在这里讲解两种方式：</p>
<ol>
<li>原始方式   </li>
<li>SpringBoot方式</li>
</ol>
<h6 id="1-2-1-原始方式"><a href="#1-2-1-原始方式" class="headerlink" title="1.2.1 原始方式"></a>1.2.1 原始方式</h6><p>在原始的Web程序当中，需要通过Servlet中提供的API：HttpServletRequest（请求对象），获取请求的相关信息。比如获取请求参数：</p>
<blockquote>
<p>Tomcat接收到http请求时：把请求的相关信息封装到HttpServletRequest对象中</p>
</blockquote>
<p>在Controller中，我们要想获取Request对象，可以直接在方法的形参中声明 HttpServletRequest 对象。然后就可以通过该对象来获取请求信息：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//根据指定的参数名获取请求参数的数据值</span></span><br><span class="line">String  request.getParameter(<span class="string">&quot;参数名&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//原始方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        <span class="comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=10</span></span><br><span class="line">        <span class="comment">// 请求参数： name=Tom&amp;age=10   （有2个请求参数）</span></span><br><span class="line">        <span class="comment">// 第1个请求参数： name=Tom   参数名:name，参数值:Tom</span></span><br><span class="line">        <span class="comment">// 第2个请求参数： age=10     参数名:age , 参数值:10</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);<span class="comment">//name就是请求参数名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ageStr</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;age&quot;</span>);<span class="comment">//age就是请求参数名</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> Integer.parseInt(ageStr);<span class="comment">//需要手动进行类型转换</span></span><br><span class="line">        System.out.println(name+<span class="string">&quot;  :  &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>以上这种方式，我们仅做了解。（在以后的开发中不会使用到）</p>
</blockquote>
<h6 id="1-2-2-SpringBoot方式"><a href="#1-2-2-SpringBoot方式" class="headerlink" title="1.2.2 SpringBoot方式"></a>1.2.2 SpringBoot方式</h6><p>在Springboot的环境中，对原始的API进行了封装，接收参数的形式更加简单。 如果是简单参数，参数名与形参变量名相同，定义同名的形参即可接收参数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=10</span></span><br><span class="line">    <span class="comment">// 第1个请求参数： name=Tom   参数名:name，参数值:Tom</span></span><br><span class="line">    <span class="comment">// 第2个请求参数： age=10     参数名:age , 参数值:10</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//springboot方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(String name , Integer age )</span>&#123;<span class="comment">//形参名和请求参数名保持一致</span></span><br><span class="line">        System.out.println(name+<span class="string">&quot;  :  &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>postman测试( GET 请求)：</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203122405075.png" alt="image-20221203122405075"> </p>
<p><strong>postman测试( POST请求 )：</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826181117898.png" alt="image-20220826181117898"></p>
<blockquote>
<p><strong>结论：不论是GET请求还是POST请求，对于简单参数来讲，只要保证&#x3D;&#x3D;请求参数名和Controller方法中的形参名保持一致&#x3D;&#x3D;，就可以获取到请求参数中的数据值。</strong></p>
</blockquote>
<h6 id="1-2-3-参数名不一致"><a href="#1-2-3-参数名不一致" class="headerlink" title="1.2.3 参数名不一致"></a>1.2.3 参数名不一致</h6><p>如果方法形参名称与请求参数名称不一致，controller方法中的形参还能接收到请求参数值吗？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=20</span></span><br><span class="line">    <span class="comment">// 请求参数名：name</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//springboot方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(String username , Integer age )</span>&#123;<span class="comment">//请求参数名和形参名不相同</span></span><br><span class="line">        System.out.println(username+<span class="string">&quot;  :  &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>答案：运行没有报错。 controller方法中的username值为：null，age值为20</p>
<ul>
<li>结论：对于简单参数来讲，请求参数名和controller方法中的形参名不一致时，无法接收到请求数据</li>
</ul>
<p>那么如果我们开发中，遇到了这种请求参数名和controller方法中的形参名不相同，怎么办？</p>
<p>解决方案：可以使用Spring提供的@RequestParam注解完成映射</p>
<p>在方法形参前面加上 @RequestParam 然后通过value属性执行请求参数名，从而完成映射。代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=20</span></span><br><span class="line">    <span class="comment">// 请求参数名：name</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//springboot方式</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(<span class="meta">@RequestParam(&quot;name&quot;)</span> String username , Integer age )</span>&#123;</span><br><span class="line">        System.out.println(username+<span class="string">&quot;  :  &quot;</span>+age);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意事项：</strong></p>
<p>@RequestParam中的required属性默认为true（默认值也是true），代表该请求参数必须传递，如果不传递将报错</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203130726310.png" alt="image-20221203130726310"></p>
<p>如果该参数是可选的，可以将required属性设置为false</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/simpleParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">simpleParam</span><span class="params">(<span class="meta">@RequestParam(name = &quot;name&quot;, required = false)</span> String username, Integer age)</span>&#123;</span><br><span class="line">System.out.println(username+ <span class="string">&quot;:&quot;</span> + age);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-3-实体参数"><a href="#1-3-实体参数" class="headerlink" title="1.3 实体参数"></a>1.3 实体参数</h5><p>在使用简单参数做为数据传递方式时，前端传递了多少个请求参数，后端controller方法中的形参就要书写多少个。如果请求参数比较多，通过上述的方式一个参数一个参数的接收，会比较繁琐。 </p>
<p>此时，我们可以考虑将请求参数封装到一个实体类对象中。 要想完成数据封装，需要遵守如下规则：<strong>请求参数名与实体类的属性名相同</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203131954932.png" alt="image-20221203131954932"></p>
<h6 id="1-3-1-简单实体对象"><a href="#1-3-1-简单实体对象" class="headerlink" title="1.3.1 简单实体对象"></a>1.3.1 简单实体对象</h6><p>定义POJO实体类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//实体参数：简单实体对象</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/simplePojo&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">simplePojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<ul>
<li>参数名和实体类属性名一致时</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203161246168.png" alt="image-20221203161246168"> </p>
<ul>
<li>参数名和实体类属性名不一致时</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203161004349.png" alt="image-20221203161004349"></p>
<h6 id="1-3-2-复杂实体对象"><a href="#1-3-2-复杂实体对象" class="headerlink" title="1.3.2 复杂实体对象"></a>1.3.2 复杂实体对象</h6><p>上面我们讲的呢是简单的实体对象，下面我们在来学习下复杂的实体对象。</p>
<p>复杂实体对象指的是，在实体类中有一个或多个属性，也是实体对象类型的。如下：</p>
<ul>
<li>User类中有一个Address类型的属性（Address是一个实体类）</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203160447953.png" alt="image-20221203160447953"></p>
<p>复杂实体对象的封装，需要遵守如下规则：</p>
<ul>
<li><strong>请求参数名与形参对象属性名相同，按照对象层次结构关系即可接收嵌套实体类属性参数。</strong></li>
</ul>
<p>定义POJO实体类：</p>
<ul>
<li>Address实体类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProvince</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> province;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProvince</span><span class="params">(String province)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.province = province;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCity</span><span class="params">(String city)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.city = city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;province=&#x27;&quot;</span> + province + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, city=&#x27;&quot;</span> + city + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>User实体类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Address address; <span class="comment">//地址对象</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, address=&quot;</span> + address +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//实体参数：复杂实体对象</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/complexPojo&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">complexPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203162706175.png" alt="image-20221203162706175"> </p>
<h5 id="1-4-数组集合参数"><a href="#1-4-数组集合参数" class="headerlink" title="1.4 数组集合参数"></a>1.4 数组集合参数</h5><p>数组集合参数的使用场景：在HTML的表单中，有一个表单项是支持多选的(复选框)，可以提交选择的多个值。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203164114083.png" alt="image-20221203164114083"> </p>
<p>多个值是怎么提交的呢？其实多个值也是一个一个的提交。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203164944144.png" alt="image-20221203164944144"> </p>
<p>后端程序接收上述多个值的方式有两种：</p>
<ol>
<li>数组</li>
<li>集合</li>
</ol>
<h6 id="1-4-1-数组"><a href="#1-4-1-数组" class="headerlink" title="1.4.1 数组"></a>1.4.1 数组</h6><p>数组参数：<strong>请求参数名与形参数组名称相同且请求参数为多个，定义数组类型形参即可接收参数</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203190218468.png" alt="image-20221203190218468"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//数组集合参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/arrayParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">arrayParam</span><span class="params">(String[] hobby)</span>&#123;</span><br><span class="line">        System.out.println(Arrays.toString(hobby));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p>在前端请求时，有两种传递形式：</p>
<p>方式一： xxxxxxxxxx?hobby&#x3D;game&amp;hobby&#x3D;java</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203191732601.png" alt="image-20221203191732601"> </p>
<p>方式二：xxxxxxxxxxxxx?hobby&#x3D;game,java</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203191822996.png" alt="image-20221203191822996"></p>
<h6 id="1-4-2-集合"><a href="#1-4-2-集合" class="headerlink" title="1.4.2 集合"></a>1.4.2 集合</h6><p>集合参数：<strong>请求参数名与形参集合对象名相同且请求参数为多个，@RequestParam 绑定参数关系</strong></p>
<blockquote>
<p>默认情况下，请求中参数名相同的多个值，是封装到数组。如果要封装到集合，要使用@RequestParam绑定参数关系</p>
</blockquote>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203211640646.png" alt="image-20221203211640646"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//数组集合参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">listParam</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;String&gt; hobby)</span>&#123;</span><br><span class="line">        System.out.println(hobby);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p>方式一： xxxxxxxxxx?hobby&#x3D;game&amp;hobby&#x3D;java</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203212221939.png" alt="image-20221203212221939"> </p>
<p>方式二：xxxxxxxxxxxxx?hobby&#x3D;game,java</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203212024679.png" alt="image-20221203212024679"></p>
<h5 id="1-5-日期参数"><a href="#1-5-日期参数" class="headerlink" title="1.5 日期参数"></a>1.5 日期参数</h5><p>上述演示的都是一些普通的参数，在一些特殊的需求中，可能会涉及到日期类型数据的封装。比如，如下需求：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220826194159343.png" alt="image-20220826194159343"> </p>
<p>因为日期的格式多种多样（如：2022-12-12 10:05:45 、2022&#x2F;12&#x2F;12 10:05:45），那么对于日期类型的参数在进行封装的时候，需要通过@DateTimeFormat注解，以及其pattern属性来设置日期的格式。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203213120692.png" alt="image-20221203213120692"></p>
<ul>
<li>@DateTimeFormat注解的pattern属性中指定了哪种日期格式，前端的日期参数就必须按照指定的格式传递。</li>
<li>后端controller方法中，需要使用Date类型或LocalDateTime类型，来封装传递的参数。</li>
</ul>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//日期时间参数</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/dateParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">dateParam</span><span class="params">(<span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span> LocalDateTime updateTime)</span>&#123;</span><br><span class="line">        System.out.println(updateTime);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203214600716.png" alt="image-20221203214600716"></p>
<h5 id="1-6-JSON参数"><a href="#1-6-JSON参数" class="headerlink" title="1.6 JSON参数"></a>1.6 JSON参数</h5><p>在学习前端技术时，我们有讲到过JSON，而在前后端进行交互时，如果是比较复杂的参数，前后端通过会使用JSON格式的数据进行传输。 （JSON是开发中最常用的前后端数据交互方式）</p>
<p>我们学习JSON格式参数，主要从以下两个方面着手：</p>
<ol>
<li>Postman在发送请求时，如何传递json格式的请求参数</li>
<li>在服务端的controller方法中，如何接收json格式的请求参数</li>
</ol>
<p>Postman发送JSON格式数据：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203225623337.png" alt="image-20221203225623337"></p>
<p>服务端Controller方法接收JSON格式数据：</p>
<ul>
<li>传递json格式的参数，在Controller中会使用实体类进行封装。 </li>
<li>封装规则：<strong>JSON数据键名与形参对象属性名相同，定义POJO类型形参即可接收参数。需要使用 @RequestBody标识。</strong></li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203230457901.png" alt="image-20221203230457901"></p>
<ul>
<li>@RequestBody注解：将JSON数据映射到形参的实体类对象中（JSON中的key和实体类中的属性名保持一致）</li>
</ul>
<p>实体类：Address</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//省略GET , SET 方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实体类：User</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//省略GET , SET 方法</span></span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//JSON参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/jsonParam&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">jsonParam</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203231803000.png" alt="image-20221203231803000"> </p>
<h5 id="1-7-路径参数"><a href="#1-7-路径参数" class="headerlink" title="1.7 路径参数"></a>1.7 路径参数</h5><p>传统的开发中请求参数是放在请求体(POST请求)传递或跟在URL后面通过?key&#x3D;value的形式传递(GET请求)。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203235715804.png" alt="image-20221203235715804"></p>
<p>在现在的开发中，经常还会直接在请求的URL中传递参数。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:8080/user/1		</span><br><span class="line">http://localhost:880/user/1/0</span><br></pre></td></tr></table></figure>

<p>上述的这种传递请求参数的形式呢，我们称之为：路径参数。</p>
<p>学习路径参数呢，主要掌握在后端的controller方法中，如何接收路径参数。</p>
<p>路径参数：</p>
<ul>
<li>前端：通过请求URL直接传递参数</li>
<li>后端：使用{…}来标识该路径参数，需要使用@PathVariable获取路径参数</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204001520756.png" alt="image-20221204001520756"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//路径参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathParam</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204002040184.png" alt="image-20221204002040184"></p>
<p><strong>传递多个路径参数：</strong></p>
<p>Postman：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204002306288.png" alt="image-20221204002306288"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//路径参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathParam2</span><span class="params">(<span class="meta">@PathVariable</span> Integer id, <span class="meta">@PathVariable</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(id+ <span class="string">&quot; : &quot;</span> +name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="2-响应"><a href="#2-响应" class="headerlink" title="2. 响应"></a>2. 响应</h4><p>前面我们学习过HTTL协议的交互方式：请求响应模式（有请求就有响应）</p>
<p>那么Controller程序呢，除了接收请求外，还可以进行响应。</p>
<h5 id="2-1-ResponseBody"><a href="#2-1-ResponseBody" class="headerlink" title="2.1 @ResponseBody"></a>2.1 @ResponseBody</h5><p>在我们前面所编写的controller方法中，都已经设置了响应数据。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204100656376.png" alt="image-20221204100656376"></p>
<p>controller方法中的return的结果，怎么就可以响应给浏览器呢？</p>
<p>答案：使用@ResponseBody注解</p>
<p><strong>@ResponseBody注解：</strong></p>
<ul>
<li>类型：方法注解、类注解</li>
<li>位置：书写在Controller方法上或类上</li>
<li>作用：将方法返回值直接响应给浏览器<ul>
<li>如果返回值类型是实体对象&#x2F;集合，将会转换为JSON格式后在响应给浏览器</li>
</ul>
</li>
</ul>
<p>但是在我们所书写的Controller中，只在类上添加了@RestController注解、方法添加了@RequestMapping注解，并没有使用@ResponseBody注解，怎么给浏览器响应呢？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World ~&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World ~&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原因：在类上添加的@RestController注解，是一个组合注解。</p>
<ul>
<li>@RestController &#x3D; @Controller + @ResponseBody</li>
</ul>
<p>@RestController源码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span>   <span class="comment">//元注解（修饰注解的注解）</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span>  <span class="comment">//元注解</span></span><br><span class="line"><span class="meta">@Documented</span>    <span class="comment">//元注解</span></span><br><span class="line"><span class="meta">@Controller</span>   </span><br><span class="line"><span class="meta">@ResponseBody</span> </span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> RestController &#123;</span><br><span class="line">    <span class="meta">@AliasFor(</span></span><br><span class="line"><span class="meta">        annotation = Controller.class</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：在类上添加@RestController就相当于添加了@ResponseBody注解。</p>
<ul>
<li>类上有@RestController注解或@ResponseBody注解时：表示当前类下所有的方法返回值做为响应数据<ul>
<li>方法的返回值，如果是一个POJO对象或集合时，会先转换为JSON格式，在响应给浏览器</li>
</ul>
</li>
</ul>
<p>下面我们来测试下响应数据：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseController</span> &#123;</span><br><span class="line">    <span class="comment">//响应字符串</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World ~&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World ~&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应实体对象</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getAddr&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddr</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();<span class="comment">//创建实体类对象</span></span><br><span class="line">        addr.setProvince(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">        addr.setCity(<span class="string">&quot;深圳&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应集合数据</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listAddr&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Address&gt; <span class="title function_">listAddr</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Address&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();<span class="comment">//集合对象</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        addr.setProvince(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">        addr.setCity(<span class="string">&quot;深圳&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        addr2.setProvince(<span class="string">&quot;陕西&quot;</span>);</span><br><span class="line">        addr2.setCity(<span class="string">&quot;西安&quot;</span>);</span><br><span class="line"></span><br><span class="line">        list.add(addr);</span><br><span class="line">        list.add(addr2);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在服务端响应了一个对象或者集合，那私前端获取到的数据是什么样子的呢？我们使用postman发送请求来测试下。测试效果如下：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204172339375.png" alt="image-20221204172339375"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204172705426.png" alt="image-20221204172705426"></p>
<h5 id="2-2-统一响应结果"><a href="#2-2-统一响应结果" class="headerlink" title="2.2 统一响应结果"></a>2.2 统一响应结果</h5><p>大家有没有发现一个问题，我们在前面所编写的这些Controller方法中，返回值各种各样，没有任何的规范。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204174052622.png" alt="image-20221204174052622"></p>
<p>如果我们开发一个大型项目，项目中controller方法将成千上万，使用上述方式将造成整个项目难以维护。那在真实的项目开发中是什么样子的呢？</p>
<p>在真实的项目开发中，无论是哪种方法，我们都会定义一个统一的返回结果。方案如下：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204174537686.png" alt="image-20221204174537686"></p>
<blockquote>
<p>前端：只需要按照统一格式的返回结果进行解析(仅一种解析方案)，就可以拿到数据。</p>
</blockquote>
<p>统一的返回结果使用类来描述，在这个结果中包含：</p>
<ul>
<li><p>响应状态码：当前请求是成功，还是失败</p>
</li>
<li><p>状态码信息：给页面的提示信息</p>
</li>
<li><p>返回的数据：给前端响应的数据（字符串、对象、集合）</p>
</li>
</ul>
<p>定义在一个实体类Result来包含以上信息。代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;<span class="comment">//响应码，1 代表成功; 0 代表失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg;  <span class="comment">//响应码 描述字符串</span></span><br><span class="line">    <span class="keyword">private</span> Object data; <span class="comment">//返回的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增删改 成功响应(不需要给前端返回数据)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>,<span class="string">&quot;success&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询 成功响应(把查询结果做为返回数据响应给前端)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>,<span class="string">&quot;success&quot;</span>,data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">0</span>,msg,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改造Controller：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseController</span> &#123; </span><br><span class="line">    <span class="comment">//响应统一格式的结果</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World ~&quot;</span>);</span><br><span class="line">        <span class="comment">//return new Result(1,&quot;success&quot;,&quot;Hello World ~&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;Hello World ~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应统一格式的结果</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getAddr&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">getAddr</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        addr.setProvince(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">        addr.setCity(<span class="string">&quot;深圳&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Result.success(addr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应统一格式的结果</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listAddr&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">listAddr</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Address&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        addr.setProvince(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">        addr.setCity(<span class="string">&quot;深圳&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        addr2.setProvince(<span class="string">&quot;陕西&quot;</span>);</span><br><span class="line">        addr2.setCity(<span class="string">&quot;西安&quot;</span>);</span><br><span class="line"></span><br><span class="line">        list.add(addr);</span><br><span class="line">        list.add(addr2);</span><br><span class="line">        <span class="keyword">return</span> Result.success(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204180946963.png" alt="image-20221204180946963"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204180744084.png" alt="image-20221204180744084"></p>
<h5 id="2-3-案例"><a href="#2-3-案例" class="headerlink" title="2.3 案例"></a>2.3 案例</h5><p>下面我们通过一个案例，来加强对请求响应的学习。</p>
<h6 id="2-3-1-需求说明"><a href="#2-3-1-需求说明" class="headerlink" title="2.3.1 需求说明"></a>2.3.1 需求说明</h6><p>需求：加载并解析xml文件中的数据，完成数据处理，并在页面展示</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204185928260.png" alt="image-20221204185928260">  </p>
<ul>
<li>获取员工数据，返回统一响应结果，在页面渲染展示</li>
</ul>
<h6 id="2-3-2-准备工作"><a href="#2-3-2-准备工作" class="headerlink" title="2.3.2 准备工作"></a>2.3.2 准备工作</h6><p>案例准备：</p>
<ol>
<li><p>XML文件</p>
<ul>
<li>已经准备好(emp.xml)，直接导入进来，放在 src&#x2F;main&#x2F;resources目录下</li>
</ul>
</li>
<li><p>工具类</p>
<ul>
<li>已经准备好解析XML文件的工具类，无需自己实现</li>
<li>直接在创建一个包 com.itheima.utils ，然后将工具类拷贝进来</li>
</ul>
</li>
<li><p>前端页面资源</p>
<ul>
<li>已经准备好，直接拷贝进来，放在src&#x2F;main&#x2F;resources下的static目录下</li>
</ul>
</li>
</ol>
<p>Springboot项目的静态资源(html，css，js等前端资源)默认存放目录为：classpath:&#x2F;static 、 classpath:&#x2F;public、 classpath:&#x2F;resources</p>
<blockquote>
<p>在SpringBoot项目中，静态资源默认可以存放的目录：</p>
<ul>
<li>classpath:&#x2F;static&#x2F;</li>
<li>classpath:&#x2F;public&#x2F;</li>
<li>classpath:&#x2F;resources&#x2F;</li>
<li>classpath:&#x2F;META-INF&#x2F;resources&#x2F;</li>
</ul>
<p>classpath：</p>
<ul>
<li>代表的是类路径，在maven的项目中，其实指的就是 src&#x2F;main&#x2F;resources 或者 src&#x2F;main&#x2F;java，但是java目录是存放java代码的，所以相关的配置文件及静态资源文档，就放在 src&#x2F;main&#x2F;resources下。</li>
</ul>
</blockquote>
<h6 id="2-3-3-实现步骤"><a href="#2-3-3-实现步骤" class="headerlink" title="2.3.3 实现步骤"></a>2.3.3 实现步骤</h6><ol>
<li><p>在pom.xml文件中引入dom4j的依赖，用于解析XML文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>引入资料中提供的：解析XML的工具类XMLParserUtils、实体类Emp、XML文件emp.xml</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204182828547.png" alt="image-20221204182828547"> </p>
</li>
<li><p>引入资料中提供的静态页面文件，放在resources下的static目录下</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204183044848.png" alt="image-20221204183044848"> </p>
</li>
<li><p>创建EmpController类，编写Controller程序，处理请求，响应数据</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204184313822.png" alt="image-20221204184313822"></p>
</li>
</ol>
<h6 id="2-3-4-代码实现"><a href="#2-3-4-代码实现" class="headerlink" title="2.3.4 代码实现"></a>2.3.4 代码实现</h6><p>Contriller代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1. 加载并解析emp.xml</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResource(<span class="string">&quot;emp.xml&quot;</span>).getFile();</span><br><span class="line">        <span class="comment">//System.out.println(file);</span></span><br><span class="line">        List&lt;Emp&gt; empList = XmlParserUtils.parse(file, Emp.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 对数据进行转换处理 - gender, job</span></span><br><span class="line">        empList.stream().forEach(emp -&gt; &#123;</span><br><span class="line">            <span class="comment">//处理 gender 1: 男, 2: 女</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> emp.getGender();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//处理job - 1: 讲师, 2: 班主任 , 3: 就业指导</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">job</span> <span class="operator">=</span> emp.getJob();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;讲师&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;班主任&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;3&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;就业指导&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//3. 响应数据</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>统一返回结果实体类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code ;<span class="comment">//1 成功 , 0 失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">//提示信息</span></span><br><span class="line">    <span class="keyword">private</span> Object data; <span class="comment">//数据 date</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>, <span class="string">&quot;success&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>, <span class="string">&quot;success&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">0</span>, msg, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="2-3-5-测试"><a href="#2-3-5-测试" class="headerlink" title="2.3.5 测试"></a>2.3.5 测试</h6><p>代码编写完毕之后，我们就可以运行引导类，启动服务进行测试了。 </p>
<p>使用Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204190341389.png" alt="image-20221204190341389"></p>
<p>打开浏览器，在浏览器地址栏输入： <a target="_blank" rel="noopener" href="http://localhost:8080/emp.html">http://localhost:8080/emp.html</a></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204185455556.png" alt="image-20221204185455556"> </p>
<h6 id="2-3-6-问题分析"><a href="#2-3-6-问题分析" class="headerlink" title="2.3.6 问题分析"></a>2.3.6 问题分析</h6><p>上述案例的功能，我们虽然已经实现，但是呢，我们会发现案例中：解析XML数据，获取数据的代码，处理数据的逻辑的代码，给页面响应的代码全部都堆积在一起了，全部都写在controller方法中了。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204190712411.png" alt="image-20221204190712411"></p>
<p>当前程序的这个业务逻辑还是比较简单的，如果业务逻辑再稍微复杂一点，我们会看到Controller方法的代码量就很大了。</p>
<ul>
<li><p>当我们要修改操作数据部分的代码，需要改动Controller</p>
</li>
<li><p>当我们要完善逻辑处理部分的代码，需要改动Controller</p>
</li>
<li><p>当我们需要修改数据响应的代码，还是需要改动Controller</p>
</li>
</ul>
<p>这样呢，就会造成我们整个工程代码的复用性比较差，而且代码难以维护。 那如何解决这个问题呢？其实在现在的开发中，有非常成熟的解决思路，那就是分层开发。</p>
<h4 id="3-分层解耦"><a href="#3-分层解耦" class="headerlink" title="3. 分层解耦"></a>3. 分层解耦</h4><h5 id="3-1-三层架构"><a href="#3-1-三层架构" class="headerlink" title="3.1 三层架构"></a>3.1 三层架构</h5><h6 id="3-1-1-介绍"><a href="#3-1-1-介绍" class="headerlink" title="3.1.1 介绍"></a>3.1.1 介绍</h6><p>在我们进行程序设计以及程序开发时，尽可能让每一个接口、类、方法的职责更单一些（单一职责原则）。</p>
<blockquote>
<p>单一职责原则：一个类或一个方法，就只做一件事情，只管一块功能。</p>
<p>这样就可以让类、接口、方法的复杂度更低，可读性更强，扩展性更好，也更利用后期的维护。</p>
</blockquote>
<p>我们之前开发的程序呢，并不满足单一职责原则。下面我们来分析下之前的程序：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204191650390.png" alt="image-20221204191650390"> </p>
<p>那其实我们上述案例的处理逻辑呢，从组成上看可以分为三个部分：</p>
<ul>
<li>数据访问：负责业务数据的维护操作，包括增、删、改、查等操作。</li>
<li>逻辑处理：负责业务逻辑处理的代码。</li>
<li>请求处理、响应数据：负责，接收页面的请求，给页面响应数据。</li>
</ul>
<p>按照上述的三个组成部分，在我们项目开发中呢，可以将代码分为三层：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204193837678.png" alt="image-20221204193837678"></p>
<ul>
<li>Controller：控制层。接收前端发送的请求，对请求进行处理，并响应数据。</li>
<li>Service：业务逻辑层。处理具体的业务逻辑。</li>
<li>Dao：数据访问层(Data Access Object)，也称为持久层。负责数据访问操作，包括数据的增、删、改、查。</li>
</ul>
<p>基于三层架构的程序执行流程：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204194207812.png" alt="image-20221204194207812"></p>
<ul>
<li>前端发起的请求，由Controller层接收（Controller响应数据给前端）</li>
<li>Controller层调用Service层来进行逻辑处理（Service层处理完后，把处理结果返回给Controller层）</li>
<li>Serivce层调用Dao层（逻辑处理过程中需要用到的一些数据要从Dao层获取）</li>
<li>Dao层操作文件中的数据（Dao拿到的数据会返回给Service层）</li>
</ul>
<blockquote>
<p>思考：按照三层架构的思想，如何要对业务逻辑(Service层)进行变更，会影响到Controller层和Dao层吗？ </p>
<p>答案：不会影响。 （程序的扩展性、维护性变得更好了）</p>
</blockquote>
<h6 id="3-1-2-代码拆分"><a href="#3-1-2-代码拆分" class="headerlink" title="3.1.2 代码拆分"></a>3.1.2 代码拆分</h6><p>我们使用三层架构思想，来改造下之前的程序：</p>
<ul>
<li>控制层包名：xxxx.controller</li>
<li>业务逻辑层包名：xxxx.service</li>
<li>数据访问层包名：xxxx.dao</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204195812200.png" alt="image-20221204195812200"></p>
<p><strong>控制层：</strong>接收前端发送的请求，对请求进行处理，并响应数据</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;</span><br><span class="line">    <span class="comment">//业务层对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">EmpService</span> <span class="variable">empService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpServiceA</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1. 调用service层, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empService.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 响应数据</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>业务逻辑层：</strong>处理具体的业务逻辑</p>
<ul>
<li>业务接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//业务逻辑接口（制定业务标准）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpService</span> &#123;</span><br><span class="line">    <span class="comment">//获取员工列表</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>业务实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//业务逻辑实现类（按照业务标准实现）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span> &#123;</span><br><span class="line">    <span class="comment">//dao层对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">EmpDao</span> <span class="variable">empDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpDaoA</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 调用dao, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empDao.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 对数据进行转换处理 - gender, job</span></span><br><span class="line">        empList.stream().forEach(emp -&gt; &#123;</span><br><span class="line">            <span class="comment">//处理 gender 1: 男, 2: 女</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> emp.getGender();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//处理job - 1: 讲师, 2: 班主任 , 3: 就业指导</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">job</span> <span class="operator">=</span> emp.getJob();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;讲师&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;班主任&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;3&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;就业指导&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数据访问层：</strong>负责数据的访问操作，包含数据的增、删、改、查</p>
<ul>
<li>数据访问接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数据访问层接口（制定标准）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    <span class="comment">//获取员工列表数据</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数据访问实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数据访问实现类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpDaoA</span> <span class="keyword">implements</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 加载并解析emp.xml</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResource(<span class="string">&quot;emp.xml&quot;</span>).getFile();</span><br><span class="line">        System.out.println(file);</span><br><span class="line">        List&lt;Emp&gt; empList = XmlParserUtils.parse(file, Emp.class);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204201342490.png" alt="image-20221204201342490"></p>
<p>三层架构的好处：</p>
<ol>
<li>复用性强</li>
<li>便于维护</li>
<li>利用扩展</li>
</ol>
<h5 id="3-2-分层-解耦"><a href="#3-2-分层-解耦" class="headerlink" title="3.2 分层&#x3D;&#x3D;解耦&#x3D;&#x3D;"></a>3.2 分层&#x3D;&#x3D;解耦&#x3D;&#x3D;</h5><p>刚才我们学习过程序分层思想了，接下来呢，我们来学习下程序的解耦思想。</p>
<p>解耦：解除耦合。</p>
<h6 id="3-2-1-耦合问题"><a href="#3-2-1-耦合问题" class="headerlink" title="3.2.1 耦合问题"></a>3.2.1 耦合问题</h6><p>首先需要了解软件开发涉及到的两个概念：内聚和耦合。</p>
<ul>
<li><p>内聚：软件中各个功能模块内部的功能联系。</p>
</li>
<li><p>耦合：衡量软件中各个层&#x2F;模块之间的依赖、关联的程度。</p>
</li>
</ul>
<p><strong>软件设计原则：&#x3D;&#x3D;高内聚低耦合&#x3D;&#x3D;。</strong></p>
<blockquote>
<p>高内聚指的是：一个模块中各个元素之间的联系的紧密程度，如果各个元素(语句、程序段)之间的联系程度越高，则内聚性越高，即 “高内聚”。</p>
<p>低耦合指的是：软件中各个层、模块之间的依赖关联程序越低越好。</p>
</blockquote>
<p>程序中高内聚的体现：</p>
<ul>
<li>EmpServiceA类中只编写了和员工相关的逻辑处理代码</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204202531571.png" alt="image-20221204202531571"> </p>
<p>程序中耦合代码的体现：</p>
<ul>
<li>把业务类变为EmpServiceB时，需要修改controller层中的代码</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204203904900.png" alt="image-20221204203904900"></p>
<p>高内聚、低耦合的目的是使程序模块的可重用性、移植性大大增强。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20220828215549593.png"></p>
<h6 id="3-2-2-解耦思路"><a href="#3-2-2-解耦思路" class="headerlink" title="3.2.2 &#x3D;&#x3D;解耦思路&#x3D;&#x3D;"></a>3.2.2 &#x3D;&#x3D;解耦思路&#x3D;&#x3D;</h6><p>之前我们在编写代码时，需要什么对象，就直接new一个就可以了。 这种做法呢，层与层之间代码就耦合了，当service层的实现变了之后， 我们还需要修改controller层的代码。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204204916033.png" alt="image-20221204204916033"></p>
<p> 那应该怎么解耦呢？</p>
<ul>
<li>首先不能在EmpController中使用new对象。代码如下：</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204205328069.png" alt="image-20221204205328069"></p>
<ul>
<li>此时，就存在另一个问题了，不能new，就意味着没有业务层对象（程序运行就报错），怎么办呢？<ul>
<li>我们的解决思路是：<ul>
<li>提供一个容器，容器中存储一些对象(例：EmpService对象)</li>
<li>controller程序从容器中获取EmpService类型的对象</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>我们想要实现上述解耦操作，就涉及到Spring中的两个核心概念：</p>
<ul>
<li><p><strong>&#x3D;&#x3D;控制反转&#x3D;&#x3D;：</strong> Inversion Of Control，简称IOC。&#x3D;&#x3D;对象的创建控制权由程序自身转移到外部（容器）&#x3D;&#x3D;，这种思想称为&#x3D;&#x3D;控制反转&#x3D;&#x3D;。</p>
<blockquote>
<p>对象的创建权由程序员主动创建转移到容器(由容器创建、管理对象)。这个容器称为：IOC容器或Spring容器</p>
</blockquote>
</li>
<li><p><strong>&#x3D;&#x3D;依赖注入&#x3D;&#x3D;：</strong> Dependency Injection，简称DI。&#x3D;&#x3D;容器为应用程序提供运行时所依赖的资源，称之为依赖注入&#x3D;&#x3D;。</p>
<blockquote>
<p>程序运行时需要某个资源，此时容器就为其提供这个资源。</p>
<p>例：EmpController程序运行时需要EmpService对象，Spring容器就为其提供并注入EmpService对象</p>
</blockquote>
</li>
</ul>
<p>&#x3D;&#x3D;IOC容器中创建、管理的对象，称之为：bean对象&#x3D;&#x3D;</p>
<h5 id="3-3-IOC-DI"><a href="#3-3-IOC-DI" class="headerlink" title="3.3 &#x3D;&#x3D;IOC&amp;DI&#x3D;&#x3D;"></a>3.3 &#x3D;&#x3D;IOC&amp;DI&#x3D;&#x3D;</h5><p>上面我们引出了Spring中IOC和DI的基本概念，下面我们就来具体学习下IOC和DI的代码实现。</p>
<h6 id="3-3-1-IOC-DI入门"><a href="#3-3-1-IOC-DI入门" class="headerlink" title="3.3.1 &#x3D;&#x3D;IOC&amp;DI入门&#x3D;&#x3D;"></a>3.3.1 &#x3D;&#x3D;IOC&amp;DI入门&#x3D;&#x3D;</h6><p>任务：完成Controller层、Service层、Dao层的代码解耦</p>
<ul>
<li>思路：<ol>
<li>删除Controller层、Service层中new对象的代码</li>
<li>Service层及Dao层的实现类，交给IOC容器管理</li>
<li>为Controller及Service注入运行时依赖的对象<ul>
<li>Controller程序中注入依赖的Service层对象</li>
<li>Service程序中注入依赖的Dao层对象</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>第1步：删除Controller层、Service层中new对象的代码</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204212807207.png" alt="image-20221204212807207"></p>
<p>第2步：Service层及Dao层的实现类，交给IOC容器管理</p>
<ul>
<li>使用Spring提供的注解：@Component ，就可以实现类交给IOC容器管理</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204213328034.png" alt="image-20221204213328034"></p>
<p>第3步：为Controller及Service注入运行时依赖的对象</p>
<ul>
<li>使用Spring提供的注解：@Autowired ，就可以实现程序运行时IOC容器自动注入需要的依赖对象</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204213859112.png" alt="image-20221204213859112"></p>
<p>完整的三层代码：</p>
<ul>
<li><strong>Controller层：</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//运行时,从IOC容器中获取该类型对象,赋值给该变量</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1. 调用service, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empService.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 响应数据</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Service层：</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//将当前对象交给IOC容器管理,成为IOC容器的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//运行时,从IOC容器中获取该类型对象,赋值给该变量</span></span><br><span class="line">    <span class="keyword">private</span> EmpDao empDao ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 调用dao, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empDao.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 对数据进行转换处理 - gender, job</span></span><br><span class="line">        empList.stream().forEach(emp -&gt; &#123;</span><br><span class="line">            <span class="comment">//处理 gender 1: 男, 2: 女</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> emp.getGender();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//处理job - 1: 讲师, 2: 班主任 , 3: 就业指导</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">job</span> <span class="operator">=</span> emp.getJob();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;讲师&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;班主任&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;3&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;就业指导&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Dao层：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//将当前对象交给IOC容器管理,成为IOC容器的bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpDaoA</span> <span class="keyword">implements</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 加载并解析emp.xml</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResource(<span class="string">&quot;emp.xml&quot;</span>).getFile();</span><br><span class="line">        System.out.println(file);</span><br><span class="line">        List&lt;Emp&gt; empList = XmlParserUtils.parse(file, Emp.class);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>运行测试：</p>
<ul>
<li>启动SpringBoot引导类，打开浏览器，输入：<a target="_blank" rel="noopener" href="http://localhost:8080/emp.html">http://localhost:8080/emp.html</a></li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204185455556.png" alt="image-20221204185455556"></p>
<h6 id="3-3-2-IOC详解"><a href="#3-3-2-IOC详解" class="headerlink" title="3.3.2 IOC详解"></a>3.3.2 IOC详解</h6><p>通过IOC和DI的入门程序呢，我们已经基本了解了IOC和DI的基础操作。接下来呢，我们学习下IOC控制反转和DI依赖注入的细节。</p>
<h6 id="3-3-2-1-bean的声明"><a href="#3-3-2-1-bean的声明" class="headerlink" title="3.3.2.1 bean的声明"></a>3.3.2.1 bean的声明</h6><p>前面我们提到IOC控制反转，就是将对象的控制权交给Spring的IOC容器，由IOC容器创建及管理对象。IOC容器创建的对象称为bean对象。</p>
<p>在之前的入门案例中，要把某个对象交给IOC容器管理，需要在类上添加一个注解：@Component </p>
<p>而Spring框架为了更好的标识web应用程序开发当中，bean对象到底归属于哪一层，又提供了@Component的衍生注解：</p>
<ul>
<li>@Controller    （标注在控制层类上）</li>
<li>@Service          （标注在业务层类上）</li>
<li>@Repository    （标注在数据访问层类上）</li>
</ul>
<p>修改入门案例代码：</p>
<ul>
<li><strong>Controller层：</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span>  <span class="comment">//@RestController = @Controller + @ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//运行时,从IOC容器中获取该类型对象,赋值给该变量</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/listEmp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1. 调用service, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empService.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 响应数据</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(empList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Service层：</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpServiceA</span> <span class="keyword">implements</span> <span class="title class_">EmpService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//运行时,从IOC容器中获取该类型对象,赋值给该变量</span></span><br><span class="line">    <span class="keyword">private</span> EmpDao empDao ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 调用dao, 获取数据</span></span><br><span class="line">        List&lt;Emp&gt; empList = empDao.listEmp();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 对数据进行转换处理 - gender, job</span></span><br><span class="line">        empList.stream().forEach(emp -&gt; &#123;</span><br><span class="line">            <span class="comment">//处理 gender 1: 男, 2: 女</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> emp.getGender();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(gender))&#123;</span><br><span class="line">                emp.setGender(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//处理job - 1: 讲师, 2: 班主任 , 3: 就业指导</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">job</span> <span class="operator">=</span> emp.getJob();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;讲师&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;2&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;班主任&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;3&quot;</span>.equals(job))&#123;</span><br><span class="line">                emp.setJob(<span class="string">&quot;就业指导&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Dao层：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpDaoA</span> <span class="keyword">implements</span> <span class="title class_">EmpDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">listEmp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1. 加载并解析emp.xml</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">file</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResource(<span class="string">&quot;emp.xml&quot;</span>).getFile();</span><br><span class="line">        System.out.println(file);</span><br><span class="line">        List&lt;Emp&gt; empList = XmlParserUtils.parse(file, Emp.class);</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>要把某个对象交给IOC容器管理，需要在对应的类上加上如下注解之一：</p>
<table>
<thead>
<tr>
<th align="left">注解</th>
<th>说明</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Controller</td>
<td>@Component的衍生注解</td>
<td>标注在控制器类上</td>
</tr>
<tr>
<td align="left">@Service</td>
<td>@Component的衍生注解</td>
<td>标注在业务类上</td>
</tr>
<tr>
<td align="left">@Repository</td>
<td>@Component的衍生注解</td>
<td>标注在数据访问类上（由于与mybatis整合，用的少）</td>
</tr>
<tr>
<td align="left">@Component</td>
<td>声明bean的基础注解</td>
<td>不属于以上三类时，用此注解</td>
</tr>
</tbody></table>
<blockquote>
<p>查看源码：<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204221320230.png" alt="image-20221204221320230"></p>
</blockquote>
<p>在IOC容器中，每一个Bean都有一个属于自己的名字，可以通过注解的value属性指定bean的名字。如果没有指定，默认为类名首字母小写。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204222650873.png" alt="image-20221204222650873"></p>
<blockquote>
<p>注意事项: </p>
<ul>
<li>声明bean的时候，可以通过value属性指定bean的名字，如果没有指定，默认为类名首字母小写。</li>
<li>使用以上四个注解都可以声明bean，但是在springboot集成web开发中，声明控制器bean只能用@Controller。</li>
</ul>
</blockquote>
<h6 id="3-3-2-2-组件扫描"><a href="#3-3-2-2-组件扫描" class="headerlink" title="3.3.2.2 组件扫描"></a>3.3.2.2 组件扫描</h6><p>问题：使用前面学习的四个注解声明的bean，一定会生效吗？</p>
<p>答案：不一定。（原因：bean想要生效，还需要被组件扫描）</p>
<p> 下面我们通过修改项目工程的目录结构，来测试bean对象是否生效：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204223602694.png" alt="image-20221204223602694"></p>
<p>运行程序后，报错：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204223815554.png" alt="image-20221204223815554"></p>
<p>为什么没有找到bean对象呢？</p>
<ul>
<li>使用四大注解声明的bean，要想生效，还需要被组件扫描注解@ComponentScan扫描</li>
</ul>
<blockquote>
<p>@ComponentScan注解虽然没有显式配置，但是实际上已经包含在了引导类声明注解 @SpringBootApplication 中，&#x3D;&#x3D;<strong>默认扫描的范围是SpringBoot启动类所在包及其子包</strong>&#x3D;&#x3D;。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204224643683.png" alt="image-20221204224643683"> </p>
</blockquote>
<ul>
<li>解决方案：手动添加@ComponentScan注解，指定要扫描的包   （&#x3D;&#x3D;仅做了解，不推荐&#x3D;&#x3D;）</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204225437297.png" alt="image-20221204225437297"></p>
<p>推荐做法（如下图）：</p>
<ul>
<li>将我们定义的controller，service，dao这些包呢，都放在引导类所在包com.itheima的子包下，这样我们定义的bean就会被自动的扫描到</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204225815624.png" alt="image-20221204225815624"></p>
<h6 id="3-3-3-DI详解"><a href="#3-3-3-DI详解" class="headerlink" title="3.3.3 DI详解"></a>3.3.3 DI详解</h6><p>上一小节我们讲解了控制反转IOC的细节，接下来呢，我们学习依赖注解DI的细节。</p>
<p>依赖注入，是指IOC容器要为应用程序去提供运行时所依赖的资源，而资源指的就是对象。</p>
<p>在入门程序案例中，我们使用了@Autowired这个注解，完成了依赖注入的操作，而这个Autowired翻译过来叫：自动装配。</p>
<p>@Autowired注解，默认是按照<strong>类型</strong>进行自动装配的（去IOC容器中找某个类型的对象，然后完成注入操作）</p>
<blockquote>
<p>入门程序举例：在EmpController运行的时候，就要到IOC容器当中去查找EmpService这个类型的对象，而我们的IOC容器中刚好有一个EmpService这个类型的对象，所以就找到了这个类型的对象完成注入操作。</p>
</blockquote>
<p>那如果在IOC容器中，存在多个相同类型的bean对象，会出现什么情况呢？</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204232154445.png" alt="image-20221204232154445"></p>
<ul>
<li>程序运行会报错</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204231616724.png" alt="image-20221204231616724"></p>
<p>如何解决上述问题呢？Spring提供了以下几种解决方案：</p>
<ul>
<li><p>@Primary</p>
</li>
<li><p>@Qualifier</p>
</li>
<li><p>@Resource</p>
</li>
</ul>
<p>使用@Primary注解：当存在多个相同类型的Bean注入时，加上@Primary注解，来确定默认的实现。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204232501679.png" alt="image-20221204232501679"> </p>
<p>使用@Qualifier注解：指定当前要注入的bean对象。 在@Qualifier的value属性中，指定注入的bean的名称。</p>
<ul>
<li>@Qualifier注解不能单独使用，必须配合@Autowired使用</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204233333606.png" alt="image-20221204233333606"></p>
<p>使用@Resource注解：是按照bean的名称进行注入。通过name属性指定要注入的bean的名称。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204233637735.png" alt="image-20221204233637735"></p>
<blockquote>
<p>面试题 ： @Autowird 与 @Resource的区别</p>
<ul>
<li>@Autowired 是spring框架提供的注解，而@Resource是JDK提供的注解</li>
<li>@Autowired 默认是按照类型注入，而@Resource是按照名称注入</li>
</ul>
</blockquote>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221203235715804.png" alt="image-20221203235715804"></p>
<p>在现在的开发中，经常还会直接在请求的URL中传递参数。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:8080/user/1		</span><br><span class="line">http://localhost:880/user/1/0</span><br></pre></td></tr></table></figure>

<p>上述的这种传递请求参数的形式呢，我们称之为：路径参数。</p>
<p>学习路径参数呢，主要掌握在后端的controller方法中，如何接收路径参数。</p>
<p>路径参数：</p>
<ul>
<li>前端：通过请求URL直接传递参数</li>
<li>后端：使用{…}来标识该路径参数，需要使用@PathVariable获取路径参数</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204001520756.png" alt="image-20221204001520756"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//路径参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathParam</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        System.out.println(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Postman测试：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204002040184.png" alt="image-20221204002040184"></p>
<p><strong>传递多个路径参数：</strong></p>
<p>Postman：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221204002306288.png" alt="image-20221204002306288"></p>
<p>Controller方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestController</span> &#123;</span><br><span class="line">    <span class="comment">//路径参数</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/path/&#123;id&#125;/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pathParam2</span><span class="params">(<span class="meta">@PathVariable</span> Integer id, <span class="meta">@PathVariable</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(id+ <span class="string">&quot; : &quot;</span> +name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="三、前后端分离开发"><a href="#三、前后端分离开发" class="headerlink" title="三、前后端分离开发"></a>三、前后端分离开发</h2><h3 id="1、案例项目-环境搭建"><a href="#1、案例项目-环境搭建" class="headerlink" title="1、案例项目&#x3D;&#x3D;环境搭建&#x3D;&#x3D;"></a>1、案例项目&#x3D;&#x3D;环境搭建&#x3D;&#x3D;</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808182810693.png" alt="image-20240808182810693"></p>
<h3 id="2、前后端分离开发规范"><a href="#2、前后端分离开发规范" class="headerlink" title="2、前后端分离开发规范"></a>2、前后端分离开发规范</h3><h4 id="（1）前后端开发框架示意图"><a href="#（1）前后端开发框架示意图" class="headerlink" title="（1）前后端开发框架示意图"></a>（1）前后端开发框架示意图</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808183442091.png" alt="image-20240808183442091"></p>
<h4 id="（2）-Restful开发规范"><a href="#（2）-Restful开发规范" class="headerlink" title="（2）&#x3D;&#x3D;Restful开发规范&#x3D;&#x3D;"></a>（2）&#x3D;&#x3D;Restful开发规范&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808183902618.png" alt="image-20240808183902618"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808183932180.png" alt="image-20240808183932180"></p>
<h4 id="（3）-Result类统一响应结果"><a href="#（3）-Result类统一响应结果" class="headerlink" title="（3）&#x3D;&#x3D;Result类统一响应结果&#x3D;&#x3D;"></a>（3）&#x3D;&#x3D;Result类统一响应结果&#x3D;&#x3D;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;<span class="comment">//响应码，1 代表成功; 0 代表失败</span></span><br><span class="line">    <span class="keyword">private</span> String msg;  <span class="comment">//响应信息 描述字符串</span></span><br><span class="line">    <span class="keyword">private</span> Object data; <span class="comment">//返回的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//增删改 成功响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>, <span class="string">&quot;success&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询 成功响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">1</span>, <span class="string">&quot;success&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//失败响应</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(<span class="number">0</span>, msg, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808184025746.png" alt="image-20240808184025746" style="zoom: 80%;" />

<h4 id="（4）开发流程"><a href="#（4）开发流程" class="headerlink" title="（4）开发流程"></a>（4）开发流程</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808184550106.png" alt="image-20240808184550106"></p>
<h3 id="3、业务流程"><a href="#3、业务流程" class="headerlink" title="3、业务流程"></a>3、业务流程</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808200705500.png" alt="image-20240808200705500" style="zoom: 67%;" />

<h4 id="（1）查询部门"><a href="#（1）查询部门" class="headerlink" title="（1）查询部门"></a>（1）查询部门</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808190338377.png" alt="image-20240808190338377"></p>
<h4 id="（2）删除部门"><a href="#（2）删除部门" class="headerlink" title="（2）删除部门"></a>（2）删除部门</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240808201316609.png" alt="image-20240808201316609" style="zoom:67%;" />



<h4 id="（3）新增部门"><a href="#（3）新增部门" class="headerlink" title="（3）新增部门"></a>（3）新增部门</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240812185003401.png" alt="image-20240812185003401"></p>
<h4 id="（4）RequestMapping-简化路径名"><a href="#（4）RequestMapping-简化路径名" class="headerlink" title="（4）RequestMapping-简化路径名"></a>（4）RequestMapping-简化路径名</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240812184754774.png" alt="image-20240812184754774"></p>
<h4 id="（5）-分页查询"><a href="#（5）-分页查询" class="headerlink" title="（5）&#x3D;&#x3D;分页查询&#x3D;&#x3D;"></a>（5）&#x3D;&#x3D;分页查询&#x3D;&#x3D;</h4><h5 id="①语法"><a href="#①语法" class="headerlink" title="①语法"></a>①语法</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813105042213.png" alt="image-20240813105042213"></p>
<h6 id="代码"><a href="#代码" class="headerlink" title="代码"></a><strong>代码</strong></h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//mapper层</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询总记录数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select count(*) from emp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询,获取列表数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> startIndex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageSize</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from emp limit #&#123;startIndex&#125;,#&#123;pageSize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">page</span><span class="params">(Integer startIndex, Integer pageSize)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//service层</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageBean <span class="title function_">page</span><span class="params">(Integer page, Integer pageSize)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 获取总记录数</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> empMapper.count();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 获取分页查询结果列表</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">startIndex</span> <span class="operator">=</span> (page - <span class="number">1</span>) * pageSize;</span><br><span class="line">        List&lt;Emp&gt; empList = empMapper.page(startIndex,pageSize);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 封装PageBean对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageBean</span>(count,empList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//controller层</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">page</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;分页查询, 参数: &#123;&#125;,&#123;&#125;&quot;</span>, page, pageSize);</span><br><span class="line">        <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> empService.page(page, pageSize);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageBean);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h5 id="②分页查询简化插件-PageHelper"><a href="#②分页查询简化插件-PageHelper" class="headerlink" title="②分页查询简化插件-PageHelper"></a>②分页查询简化插件-PageHelper</h5><h6 id="引入插件"><a href="#引入插件" class="headerlink" title="引入插件"></a>引入插件</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--PageHelper分页插件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a><strong>代码</strong></h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//mapper层</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 员工信息查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from emp&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">list</span><span class="params">(String name, Short gender,LocalDate begin,LocalDate end)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//service层</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageBean <span class="title function_">page</span><span class="params">(Integer page, Integer pageSize, String name, Short gender, LocalDate begin, LocalDate end)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 设置分页参数</span></span><br><span class="line">        PageHelper.startPage(page, pageSize);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 执行查询</span></span><br><span class="line">        List&lt;Emp&gt; empList = empMapper.list(name, gender, begin, end);</span><br><span class="line">        Page&lt;Emp&gt; p = (Page&lt;Emp&gt;) empList;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 封装PageBean对象</span></span><br><span class="line">        <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PageBean</span>(p.getTotal(), p.getResult());</span><br><span class="line">        <span class="keyword">return</span> pageBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//controller层</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">page</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                       String name, Short gender,</span></span><br><span class="line"><span class="params">                       <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate begin,</span></span><br><span class="line"><span class="params">                       <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;分页查询, 参数: &#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;&quot;</span>,page,pageSize,name,gender,begin,end);</span><br><span class="line">        <span class="comment">//调用service分页查询</span></span><br><span class="line">        <span class="type">PageBean</span> <span class="variable">pageBean</span> <span class="operator">=</span> empService.page(page,pageSize,name,gender,begin,end);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageBean);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="PageHelper实现原理-ThreadLocal"><a href="#PageHelper实现原理-ThreadLocal" class="headerlink" title="PageHelper实现原理-ThreadLocal"></a>PageHelper实现原理-ThreadLocal</h6><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240819180234670.png" alt="image-20240819180234670" style="zoom: 50%;" />



<p><strong>利用PageHelp插件实现分页查询，会&#x3D;&#x3D;自动拼接limit&#x3D;&#x3D;</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240819181139107.png" alt="image-20240819181139107"></p>
<p><strong>&#x3D;&#x3D;2、基于Mybatis的拦截器，进行动态拼接&#x3D;&#x3D;</strong></p>
<p><strong>介绍：</strong></p>
<ul>
<li>ThreadLocal 并不是一个Thread，而是<strong>Thread的局部变量</strong>。</li>
<li>ThreadLocal为<strong>每个线程提供单独一份存储空间</strong>，具有&#x3D;&#x3D;<strong>线程隔离</strong>&#x3D;&#x3D;的效果，只有<strong>在线程内才能获取到对应的值，线程外则不能访问。</strong></li>
<li>ThreadLocal为<strong>每个线程提供单独一份存储空间</strong>，表示&#x3D;&#x3D;<strong>每次请求都对应着不同的线程</strong>&#x3D;&#x3D;，可利用ThreadLocal作为<strong>一次请求的共享空间</strong></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li>public void set(T value) 	设置当前线程的线程局部变量的值</li>
<li>public T get() 		返回当前线程所对应的线程局部变量的值</li>
<li>public void remove()        移除当前线程的线程局部变量</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240819174616586.png" alt="image-20240819174616586"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240819174634671.png" alt="image-20240819174634671" style="zoom:67%;" />







<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813113641879.png"/>

<h5 id="③案例分析"><a href="#③案例分析" class="headerlink" title="③案例分析"></a>③案例分析</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240812195050846.png" alt="image-20240812195050846"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240812195348756.png" alt="image-20240812195348756"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240812200026459.png" alt="image-20240812200026459"></p>
<h4 id="（6）删除和修改员工"><a href="#（6）删除和修改员工" class="headerlink" title="（6）删除和修改员工"></a>（6）删除和修改员工</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813124234281.png" alt="image-20240813124234281"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813171902018.png" alt="image-20240813171902018"></p>
<h4 id="（7）-代码Code"><a href="#（7）-代码Code" class="headerlink" title="（7）&#x3D;&#x3D;代码Code&#x3D;&#x3D;"></a>（7）&#x3D;&#x3D;代码Code&#x3D;&#x3D;</h4><h5 id="①Controller层"><a href="#①Controller层" class="headerlink" title="①Controller层"></a>①Controller层</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门管理Controller</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span> <span class="comment">//用于输出日志的注解</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/depts&quot;)</span> <span class="comment">//设置统一的请求、响应路径</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//private static Logger log = LoggerFactory.getLogger(DeptController.class);</span></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//注入依赖，获取Service层的</span></span><br><span class="line">    <span class="keyword">private</span> DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询部门数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/depts&quot;,method = RequestMethod.GET) //指定请求方式为GET</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;查询全部部门数据&quot;</span>);</span><br><span class="line">        <span class="comment">//调用service查询部门数据</span></span><br><span class="line">        List&lt;Dept&gt; deptList =  deptService.list();</span><br><span class="line">        <span class="keyword">return</span> Result.success(deptList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除部门</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;根据id删除部门:&#123;&#125;&quot;</span>,id);</span><br><span class="line">        <span class="comment">//调用service删除部门</span></span><br><span class="line">        deptService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增部门</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Dept dept)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;新增部门: &#123;&#125;&quot;</span> , dept);</span><br><span class="line">        <span class="comment">//调用service新增部门</span></span><br><span class="line">        deptService.add(dept);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="②service层"><a href="#②service层" class="headerlink" title="②service层"></a>②service层</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span> <span class="comment">//IOC 控制反转：对象的创建控制权由程序自身转移到外部（容器），这种思想称为控制反转</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptMapper deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deptMapper.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        deptMapper.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Dept dept)</span> &#123;</span><br><span class="line">        dept.setCreateTime(LocalDateTime.now());</span><br><span class="line">        dept.setUpdateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        deptMapper.insert(dept);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="③mapper层"><a href="#③mapper层" class="headerlink" title="③mapper层"></a>③mapper层</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门管理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeptMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部部门</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from dept&quot;)</span></span><br><span class="line">    List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据ID删除部门</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from dept where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增部门</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dept</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into dept(name, create_time, update_time) values(#&#123;name&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Dept dept)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="④pojo层-Plain-Old-Java-Object-实例层"><a href="#④pojo层-Plain-Old-Java-Object-实例层" class="headerlink" title="④pojo层(Plain Old Java Object)-实例层"></a>④pojo层(Plain Old Java Object)-实例层</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 部门实体类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//pojo: Plain Old Java Object</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id; <span class="comment">//ID</span></span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//部门名称</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime; <span class="comment">//创建时间</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime; <span class="comment">//修改时间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（8）-文件上传"><a href="#（8）-文件上传" class="headerlink" title="（8）&#x3D;&#x3D;文件上传&#x3D;&#x3D;"></a>（8）&#x3D;&#x3D;文件上传&#x3D;&#x3D;</h4><h5 id="①前端页面三要素"><a href="#①前端页面三要素" class="headerlink" title="①前端页面三要素"></a>①前端页面三要素</h5><p><strong>method&#x3D;”post”</strong></p>
<p><strong>enctype&#x3D;”multipart&#x2F;form-data”</strong></p>
<p><strong>input type&#x3D;”file”</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">        姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        年龄: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        头像: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;image&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813132843616.png" alt="image-20240813132843616"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813132859033.png" alt="image-20240813132859033"></p>
<h5 id="②服务端接受文件"><a href="#②服务端接受文件" class="headerlink" title="②服务端接受文件"></a>②服务端接受文件</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813133416336.png" alt="image-20240813133416336"></p>
<h5 id="③服务端保存文件（本地）"><a href="#③服务端保存文件（本地）" class="headerlink" title="③服务端保存文件（本地）"></a>③服务端保存文件（本地）</h5><h6 id="MultipartFile常用方法"><a href="#MultipartFile常用方法" class="headerlink" title="MultipartFile常用方法"></a>MultipartFile常用方法</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813140753432.png" alt="image-20240813140753432"></p>
<h6 id="构建唯一文件名UUID"><a href="#构建唯一文件名UUID" class="headerlink" title="构建唯一文件名UUID"></a>构建唯一文件名UUID</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813140921162.png" alt="image-20240813140921162"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(String username , Integer age , MultipartFile image)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;文件上传: &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, username, age, image);</span><br><span class="line">        <span class="comment">//获取原始文件名 - 1.jpg  123.0.0.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> image.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//构造唯一的文件名 (不能重复) - uuid(通用唯一识别码) de49685b-61c0-4b11-80fa-c71e95924018</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">extname</span> <span class="operator">=</span> originalFilename.substring(index);</span><br><span class="line">        <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + extname;</span><br><span class="line">        log.info(<span class="string">&quot;新的文件名: &#123;&#125;&quot;</span>, newFileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将文件存储在服务器的磁盘目录中 E:\images</span></span><br><span class="line">        image.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:\\images\\&quot;</span>+newFileName));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h6 id="文件上传大小限制"><a href="#文件上传大小限制" class="headerlink" title="文件上传大小限制"></a>文件上传大小限制</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813141003332.png" alt="image-20240813141003332"></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#配置单个文件最大上传大小</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-file-size</span>=<span class="string">10MB</span></span><br><span class="line"><span class="comment">#配置单个请求最大上传大小（一次请求可以上传多个文件）</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-request-size</span>=<span class="string">100MB</span></span><br></pre></td></tr></table></figure>



<h5 id="④云服务（阿里云OSS）"><a href="#④云服务（阿里云OSS）" class="headerlink" title="④云服务（阿里云OSS）"></a>④云服务（阿里云OSS）</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--阿里云OSS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>阿里云工具类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 阿里云 OSS 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> <span class="string">&quot;https://oss-cn-chengdu.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="comment">// 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> <span class="string">&quot;LTAI5tH2N5MkrjPKxuemv8Sd&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> <span class="string">&quot;4kr7BLZBAopplxYS4lnXux6Kt6surm&quot;</span>;</span><br><span class="line">    <span class="comment">// 填写Bucket名称，例如examplebucket。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> <span class="string">&quot;springboot-web-tlias-test1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖,使用UUID重新命名文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件访问路径</span></span><br><span class="line">        <span class="comment">//https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">        <span class="comment">//-&gt; https://springboot-web-tlias-test1.oss-cn-chengdu.aliyuncs.com/test.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="添加员工信息"><a href="#添加员工信息" class="headerlink" title="&#x3D;&#x3D;添加员工信息&#x3D;&#x3D;"></a>&#x3D;&#x3D;添加员工信息&#x3D;&#x3D;</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOSSUtils aliOSSUtils;</span><br><span class="line"><span class="comment">/*    @PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="comment">    public Result upload(String username, Integer age, MultipartFile image)&#123;</span></span><br><span class="line"><span class="comment">        log.info(&quot;文件上传信息：&#123;&#125;&quot;,username,age,image);</span></span><br><span class="line"><span class="comment">        return Result.success();</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile image)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        log.info(<span class="string">&quot;文件上传, 文件名: &#123;&#125;&quot;</span>, image.getOriginalFilename());</span><br><span class="line">        <span class="comment">//调用阿里云OSS工具类进行文件上传</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> aliOSSUtils.upload(image);</span><br><span class="line">        log.info(<span class="string">&quot;文件上传完成,文件访问的url: &#123;&#125;&quot;</span>, url);</span><br><span class="line">        <span class="keyword">return</span> Result.success(url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813161215790.png" alt="image-20240813161215790"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813161908621.png" alt="image-20240813161908621"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813163727972.png" alt="image-20240813163727972"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813164132456.png" alt="image-20240813164132456"></p>
<h2 id="四、配置文件"><a href="#四、配置文件" class="headerlink" title="四、配置文件"></a>四、配置文件</h2><h3 id="1、参数配置化（properties文件）"><a href="#1、参数配置化（properties文件）" class="headerlink" title="1、参数配置化（properties文件）"></a>1、参数配置化（properties文件）</h3><h4 id="（1）application-properties文件配置（配置阿里云oss配置）"><a href="#（1）application-properties文件配置（配置阿里云oss配置）" class="headerlink" title="（1）application.properties文件配置（配置阿里云oss配置）"></a>（1）application.properties文件配置（配置阿里云oss配置）</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#驱动类名称</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#数据库连接的url</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/tlias</span></span><br><span class="line"><span class="comment">#连接数据库的用户名</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment">#连接数据库的密码</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">1234</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置mybatis的日志, 指定输出到控制台</span></span><br><span class="line"><span class="attr">mybatis.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment">#开启mybatis的驼峰命名自动映射开关 a_column ------&gt; aCloumn</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置单个文件最大上传大小</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-file-size</span>=<span class="string">10MB</span></span><br><span class="line"><span class="comment">#配置单个请求最大上传大小（一次请求可以上传多个文件）</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-request-size</span>=<span class="string">100MB</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#阿里云OSS配置</span></span><br><span class="line"><span class="attr">aliyun.oss.endpoint</span> = <span class="string">https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line"><span class="attr">aliyun.oss.accessKeyId</span> = <span class="string">LTAI5tH2N5MkrjPKxuemv8Sd</span></span><br><span class="line"><span class="attr">aliyun.oss.accessKeySecret</span> = <span class="string">4kr7BLZBAopplxYS4lnXux6Kt6surm</span></span><br><span class="line"><span class="attr">aliyun.oss.bucketName</span> = <span class="string">springboot-web-tlias-test1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="（2）阿里云工具类参数映射（-Value-“-xxx-”-）"><a href="#（2）阿里云工具类参数映射（-Value-“-xxx-”-）" class="headerlink" title="（2）阿里云工具类参数映射（@Value(“${xxx}”)）"></a>（2）阿里云工具类参数映射（@Value(“${xxx}”)）</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 阿里云 OSS 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*    // Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line"><span class="comment">    String endpoint = &quot;https://oss-cn-chengdu.aliyuncs.com&quot;;</span></span><br><span class="line"><span class="comment">    // 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line"><span class="comment">    String accessKeyId = &quot;LTAI5tH2N5MkrjPKxuemv8Sd&quot;;</span></span><br><span class="line"><span class="comment">    String accessKeySecret = &quot;4kr7BLZBAopplxYS4lnXux6Kt6surm&quot;;</span></span><br><span class="line"><span class="comment">    // 填写Bucket名称，例如examplebucket。</span></span><br><span class="line"><span class="comment">    String bucketName = &quot;springboot-web-tlias-test1&quot;;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.endpoint&#125;&quot;)</span></span><br><span class="line">    String endpoint ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.accessKeyId&#125;&quot;)</span></span><br><span class="line">    String accessKeyId ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.accessKeySecret&#125;&quot;)</span></span><br><span class="line">    String accessKeySecret ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 填写Bucket名称，例如examplebucket。</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.bucketName&#125;&quot;)</span></span><br><span class="line">    String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖,使用UUID重新命名文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件访问路径</span></span><br><span class="line">        <span class="comment">//https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">        <span class="comment">//-&gt; https://springboot-web-tlias-test1.oss-cn-chengdu.aliyuncs.com/test.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813172821399.png" alt="image-20240813172821399"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813172842484.png" alt="image-20240813172842484"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813172908423.png" alt="image-20240813172908423"></p>
<h3 id="2、配置格式分类与比较-properties-yaml"><a href="#2、配置格式分类与比较-properties-yaml" class="headerlink" title="2、配置格式分类与比较(properties&#x2F;yaml)"></a>2、配置格式分类与比较(properties&#x2F;yaml)</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813174344318.png" alt="image-20240813174344318" style="zoom:80%;" />

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813174258190.png" alt="image-20240813174258190"></p>
<h4 id="（1）yml-yaml文件基本语法与数据格式"><a href="#（1）yml-yaml文件基本语法与数据格式" class="headerlink" title="（1）yml&#x2F;yaml文件基本语法与数据格式"></a>（1）yml&#x2F;yaml文件基本语法与数据格式</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813174516294.png" alt="image-20240813174516294"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813174706075.png" alt="image-20240813174706075"></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">user:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">hobby:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">java</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">game</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sport</span></span><br></pre></td></tr></table></figure>



<h4 id="（2）-properties配置文件-yaml配置文件"><a href="#（2）-properties配置文件-yaml配置文件" class="headerlink" title="（2）&#x3D;&#x3D;properties配置文件-&gt;yaml配置文件&#x3D;&#x3D;"></a>（2）&#x3D;&#x3D;properties配置文件-&gt;yaml配置文件&#x3D;&#x3D;</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813175110076.png"/>



<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#驱动类名称</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#数据库连接的url</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/tlias</span></span><br><span class="line"><span class="comment">#连接数据库的用户名</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment">#连接数据库的密码</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">1234</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置mybatis的日志, 指定输出到控制台</span></span><br><span class="line"><span class="attr">mybatis.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment">#开启mybatis的驼峰命名自动映射开关 a_column ------&gt; aCloumn</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#配置单个文件最大上传大小</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-file-size</span>=<span class="string">10MB</span></span><br><span class="line"><span class="comment">#配置单个请求最大上传大小（一次请求可以上传多个文件）</span></span><br><span class="line"><span class="attr">spring.servlet.multipart.max-request-size</span>=<span class="string">100MB</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#阿里云OSS配置</span></span><br><span class="line"><span class="attr">aliyun.oss.endpoint</span> = <span class="string">https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line"><span class="attr">aliyun.oss.accessKeyId</span> = <span class="string">LTAI5tH2N5MkrjPKxuemv8Sd</span></span><br><span class="line"><span class="attr">aliyun.oss.accessKeySecret</span> = <span class="string">4kr7BLZBAopplxYS4lnXux6Kt6surm</span></span><br><span class="line"><span class="attr">aliyun.oss.bucketName</span> = <span class="string">springboot-web-tlias-test1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment">#数据库连接信息</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">  	<span class="comment">#驱动类名称</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="comment">#数据库连接的url</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/tlias</span></span><br><span class="line">    <span class="comment">#连接数据库的用户名</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="comment">#连接数据库的密码</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">#文件上传的配置</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="comment">#配置单个文件最大上传大小</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">10MB</span></span><br><span class="line">      <span class="comment">#配置单个请求最大上传大小（一次请求可以上传多个文件）</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">100MB</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#Mybatis配置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#配置mybatis的日志, 指定输出到控制台</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="comment">#开启mybatis的驼峰命名自动映射开关 a_column ------&gt; aCloumn</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#阿里云OSS配置</span></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">https://oss-cn-hangzhou.aliyuncs.com</span></span><br><span class="line">    <span class="attr">accessKeyId:</span> <span class="string">LTAI4GCH1vX6DKqJWxd6nEuW</span></span><br><span class="line">    <span class="attr">accessKeySecret:</span> <span class="string">yBshYweHOpqDuhCArrVHwIiBKpyqSL</span></span><br><span class="line">    <span class="attr">bucketName:</span> <span class="string">web-tlias</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="（3）参数化配置的简化"><a href="#（3）参数化配置的简化" class="headerlink" title="（3）参数化配置的简化"></a>（3）参数化配置的简化</h4><p><strong>不使用&#x3D;&#x3D;@Value(“${xxx}”)&#x3D;&#x3D;<strong>，而使用&#x3D;&#x3D;</strong>@ConfigurationProperties(prefix &#x3D; “aliyun.oss”)</strong>&#x3D;&#x3D;的方式，配合使用**@Component注解<strong>实现</strong>IOC控制反转和依赖注入**。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813180200221.png" alt="image-20240813180200221"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813180409567.png" alt="image-20240813180409567"></p>
<h4 id="（4）yaml配置具有提示的依赖"><a href="#（4）yaml配置具有提示的依赖" class="headerlink" title="（4）yaml配置具有提示的依赖"></a>（4）yaml配置具有提示的依赖</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813180742504.png" alt="image-20240813180742504"></p>
<h4 id="（5）-Vaule方式和-ConfigurationProperties的区别"><a href="#（5）-Vaule方式和-ConfigurationProperties的区别" class="headerlink" title="（5）@Vaule方式和@ConfigurationProperties的区别"></a>（5）@Vaule方式和@ConfigurationProperties的区别</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813180949688.png" alt="image-20240813180949688"></p>
<h4 id="（6）阿里云使用-ConfigurationProperties后的工具类"><a href="#（6）阿里云使用-ConfigurationProperties后的工具类" class="headerlink" title="（6）阿里云使用@ConfigurationProperties后的工具类"></a>（6）阿里云使用@ConfigurationProperties后的工具类</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 阿里云 OSS 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*    // Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line"><span class="comment">    String endpoint = &quot;https://oss-cn-chengdu.aliyuncs.com&quot;;</span></span><br><span class="line"><span class="comment">    // 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line"><span class="comment">    String accessKeyId = &quot;LTAI5tH2N5MkrjPKxuemv8Sd&quot;;</span></span><br><span class="line"><span class="comment">    String accessKeySecret = &quot;4kr7BLZBAopplxYS4lnXux6Kt6surm&quot;;</span></span><br><span class="line"><span class="comment">    // 填写Bucket名称，例如examplebucket。</span></span><br><span class="line"><span class="comment">    String bucketName = &quot;springboot-web-tlias-test1&quot;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    // Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.endpoint&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String endpoint ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.accessKeyId&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String accessKeyId ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.accessKeySecret&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String accessKeySecret ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 填写Bucket名称，例如examplebucket。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.bucketName&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String bucketName;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//依赖注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOSSProperties aliOSSProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取阿里云OSS参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> aliOSSProperties.getEndpoint();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> aliOSSProperties.getAccessKeyId();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> aliOSSProperties.getAccessKeySecret();</span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> aliOSSProperties.getBucketName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖,使用UUID重新命名文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件访问路径</span></span><br><span class="line">        <span class="comment">//https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">        <span class="comment">//-&gt; https://springboot-web-tlias-test1.oss-cn-chengdu.aliyuncs.com/test.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="五、登录校验"><a href="#五、登录校验" class="headerlink" title="五、登录校验"></a>五、登录校验</h2><h3 id="1、四种请求get、post、put、delete"><a href="#1、四种请求get、post、put、delete" class="headerlink" title="1、四种请求get、post、put、delete"></a>1、四种请求get、post、put、delete</h3><p>在Spring Boot和许多Web开发框架中，使用不同的HTTP方法（如GET、POST、PUT、DELETE）来处理不同类型的操作是一种常见的实践。这种做法不仅符合RESTful架构的设计原则，还使得API的设计更加直观和易于理解。具体来说：</p>
<h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a><strong>GET</strong></h4><p>用于查询操作。&#x3D;&#x3D;GET请求通常用于获取资源数据&#x3D;&#x3D;。因为GET请求是幂等的（即多次调用同一请求，结果不变），非常适合用于读取数据。例如，&#x3D;&#x3D;查询&#x3D;&#x3D;一条记录或获取一个列表。</p>
<h4 id="POST"><a href="#POST" class="headerlink" title="POST"></a><strong>POST</strong></h4><p>用于创建资源。&#x3D;&#x3D;POST请求通常用于向服务器提交数据以创建新资源&#x3D;&#x3D;。POST请求不是幂等的（每次调用都会创建一个新资源），所以适合用于提交表单数据或&#x3D;&#x3D;新增记录&#x3D;&#x3D;。</p>
<h4 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a><strong>PUT</strong></h4><p>用于更新资源。PUT请求用于更新现有资源的全部内容。PUT请求也是幂等的，即无论请求调用多少次，结果都是一样的。例如，&#x3D;&#x3D;更新用户的全部信息&#x3D;&#x3D;。</p>
<h4 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a><strong>DELETE</strong></h4><p>用于&#x3D;&#x3D;删除资源&#x3D;&#x3D;。DELETE请求用于删除指定资源。DELETE请求也是幂等的，多次调用同一请求将删除相同的资源。</p>
<p>这种方法之所以被广泛采用，是因为它符合REST（Representational State Transfer）的设计理念。REST是一种架构风格，强调资源的表现形式，并使用标准的HTTP方法来进行操作。这样做的好处包括：</p>
<ul>
<li><strong>清晰性</strong>：开发者可以通过HTTP方法直观地理解API的意图和功能。</li>
<li><strong>一致性</strong>：通过遵循统一的规则，API更容易维护和扩展。</li>
<li><strong>可扩展性</strong>：由于RESTful设计风格是无状态的，每个请求都包含了所需的所有信息，这使得系统更容易水平扩展。</li>
</ul>
<p>因此，在Spring Boot框架中遵循这些规则不仅是一种最佳实践，也使得API设计更加规范化和标准化。</p>
<h3 id="2、登录时，使用POST请求而不是GET请求"><a href="#2、登录时，使用POST请求而不是GET请求" class="headerlink" title="2、登录时，使用POST请求而不是GET请求"></a>2、登录时，使用POST请求而不是GET请求</h3><p>在用户登录时，虽然看似只是查询用户的身份和验证凭据，但使用POST请求而不是GET请求主要有以下几个原因：</p>
<h4 id="1-安全性："><a href="#1-安全性：" class="headerlink" title="1. 安全性："></a>1. <strong>安全性</strong>：</h4><ul>
<li>**&#x3D;&#x3D;避免敏感数据暴露&#x3D;&#x3D;**：在登录过程中，用户通常会提交用户名和密码等敏感信息。如果使用GET请求，这些数据会被包含在URL中（例如，<code>/login?username=xxx&amp;password=yyy</code>），这可能会导致敏感信息暴露在浏览器历史记录、日志文件或中间网络设备中。而POST请求会将数据放在请求体中，而不是URL中，这样敏感信息就不会直接暴露在URL中。</li>
</ul>
<h4 id="2-数据提交的语义："><a href="#2-数据提交的语义：" class="headerlink" title="2. 数据提交的语义："></a>2. <strong>数据提交的语义</strong>：</h4><ul>
<li><strong>数据修改的语义</strong>：POST请求通常用于提交数据，这与登录请求的语义一致。登录不仅仅是查询数据，还可能涉及服务器端会话的创建或更新，这种操作符合POST请求的使用场景。</li>
<li><strong>状态变更</strong>：虽然登录本质上是一种验证操作，但它通常会导致服务器状态的变化，例如创建会话（session）或设置身份验证令牌。这些操作都是对服务器状态的改变，符合POST请求的语义。</li>
</ul>
<h4 id="3-幂等性："><a href="#3-幂等性：" class="headerlink" title="3. 幂等性："></a>3. <strong>幂等性</strong>：</h4><ul>
<li><strong>避免幂等性的问题</strong>：GET请求是幂等的，意味着无论请求多少次，结果都应该是相同的。然而，登录操作通常不是幂等的，因为每次登录可能会创建一个新的会话或更新会话状态。POST请求本身不要求幂等性，因此更适合处理登录操作。</li>
</ul>
<h4 id="4-避免URL长度限制："><a href="#4-避免URL长度限制：" class="headerlink" title="4. 避免URL长度限制："></a>4. <strong>避免URL长度限制</strong>：</h4><ul>
<li><strong>URL长度限制</strong>：GET请求的URL有长度限制，而POST请求的请求体几乎没有长度限制。因此，使用POST可以更安全地传递大量数据，特别是在需要传递复杂或多段数据时。</li>
</ul>
<h4 id="5-遵循行业惯例："><a href="#5-遵循行业惯例：" class="headerlink" title="5. 遵循行业惯例："></a>5. <strong>遵循行业惯例</strong>：</h4><ul>
<li><strong>标准实践</strong>：在Web开发中，使用POST请求来处理登录是一个通用的最佳实践。这种做法不仅在Spring Boot中广泛使用，也在其他框架和平台中得到了普遍的采纳。</li>
</ul>
<p>总的来说，使用POST而不是GET来处理登录请求是为了更好地保障安全性、符合HTTP方法的语义、避免幂等性问题以及遵循标准的Web开发惯例。</p>
<h3 id="3、登录基础功能实现"><a href="#3、登录基础功能实现" class="headerlink" title="3、登录基础功能实现"></a>3、登录基础功能实现</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813201736644.png" alt="image-20240813201736644"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813201759089.png" alt="image-20240813201759089"></p>
<h3 id="4、登录校验"><a href="#4、登录校验" class="headerlink" title="4、登录校验"></a>4、登录校验</h3><h4 id="（1）登录校验概念"><a href="#（1）登录校验概念" class="headerlink" title="（1）登录校验概念"></a>（1）登录校验概念</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813205727578.png" alt="image-20240813205727578"></p>
<h4 id="（2）会话技术与会话跟踪技术（Cookie、Session、令牌）"><a href="#（2）会话技术与会话跟踪技术（Cookie、Session、令牌）" class="headerlink" title="（2）会话技术与会话跟踪技术（Cookie、Session、令牌）"></a>（2）会话技术与会话跟踪技术（Cookie、Session、令牌）</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813210254886.png" alt="image-20240813210254886"></p>
<h4 id="（3）会话跟踪方案-Cookie和Session"><a href="#（3）会话跟踪方案-Cookie和Session" class="headerlink" title="（3）会话跟踪方案-&#x3D;&#x3D;Cookie和Session&#x3D;&#x3D;"></a>（3）会话跟踪方案-&#x3D;&#x3D;Cookie和Session&#x3D;&#x3D;</h4><p><strong>&#x3D;&#x3D;Cookie存储在客户端（浏览器），Session存储在服务端。&#x3D;&#x3D;</strong></p>
<p><strong>跨域</strong></p>
<h5 id="0、方案的对比"><a href="#0、方案的对比" class="headerlink" title="0、方案的对比"></a>0、方案的对比</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813211446205.png" alt="image-20240813211446205"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813213225257.png" alt="image-20240813213225257"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813213415690.png" alt="image-20240813213415690"></p>
<p>在Spring Boot进行Web后端开发时，使用Cookie技术进行会话跟踪是非常常见的做法。以下是一个典型的&#x3D;&#x3D;流程&#x3D;&#x3D;：</p>
<h5 id="1-用户请求登录"><a href="#1-用户请求登录" class="headerlink" title="1. 用户请求登录"></a>1. <strong>用户请求登录</strong></h5><ul>
<li>用户通过登录表单提交用户名和密码。</li>
<li>前端使用 <strong>POST</strong> 请求将用户名和密码发送到Spring Boot后端的登录接口。</li>
</ul>
<h5 id="2-服务器验证用户凭证"><a href="#2-服务器验证用户凭证" class="headerlink" title="2. 服务器验证用户凭证"></a>2. <strong>服务器验证用户凭证</strong></h5><ul>
<li>后端接收到请求后，从请求体中提取用户名和密码。</li>
<li>服务器验证这些凭证是否正确，通常会查询数据库以匹配用户名和密码。</li>
<li>&#x3D;&#x3D;如果验证成功，服务器会创建一个新的会话&#x3D;&#x3D;。</li>
</ul>
<h5 id="3-创建Session和Cookie"><a href="#3-创建Session和Cookie" class="headerlink" title="3. &#x3D;&#x3D;创建Session和Cookie&#x3D;&#x3D;"></a>3. <strong>&#x3D;&#x3D;创建Session和Cookie&#x3D;&#x3D;</strong></h5><ul>
<li><strong>会话创建</strong>：服务器生成一个唯一的Session ID，并将其与用户信息绑定（如用户ID、权限等）。这通常&#x3D;&#x3D;存储在服务器端&#x3D;&#x3D;的内存、数据库或分布式缓存中（如Redis）。</li>
<li><strong>设置Cookie</strong>：服务器&#x3D;&#x3D;将生成的Session ID存储在一个Cookie中&#x3D;&#x3D;，然后&#x3D;&#x3D;通过响应将这个Cookie发送给客户端&#x3D;&#x3D;。</li>
</ul>
   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">session.setAttribute(<span class="string">&quot;user&quot;</span>, user);  <span class="comment">// 存储用户信息到Session中</span></span><br></pre></td></tr></table></figure>

<p>   在Spring Boot中，默认情况下，<code>JSESSIONID</code> 是用来保存Session ID的Cookie的名称。</p>
<h5 id="4-客户端存储Cookie"><a href="#4-客户端存储Cookie" class="headerlink" title="4. &#x3D;&#x3D;客户端存储Cookie&#x3D;&#x3D;"></a>4. <strong>&#x3D;&#x3D;客户端存储Cookie&#x3D;&#x3D;</strong></h5><ul>
<li>&#x3D;&#x3D;客户端浏览器接收到响应后，会将包含Session ID的Cookie保存下来&#x3D;&#x3D;。</li>
<li>&#x3D;&#x3D;默认情况下，Cookie将与域名绑定，并在后续请求时自动附加到同一域名的请求中&#x3D;&#x3D;。</li>
</ul>
<h5 id="5-后续请求自动携带Cookie"><a href="#5-后续请求自动携带Cookie" class="headerlink" title="5. &#x3D;&#x3D;后续请求自动携带Cookie&#x3D;&#x3D;"></a>5. &#x3D;&#x3D;<strong>后续请求自动携带Cookie</strong>&#x3D;&#x3D;</h5><ul>
<li>客户端在后续的请求中会&#x3D;&#x3D;自动将这个Cookie附加到HTTP请求头中发送给服务器&#x3D;&#x3D;。</li>
<li>服务器接收到请求后，会从请求头中的Cookie中&#x3D;&#x3D;提取Session ID&#x3D;&#x3D;，并使用这个&#x3D;&#x3D;ID从服务器端的会话存储中检索与之相关联的会话数据&#x3D;&#x3D;。</li>
</ul>
<h5 id="6-验证Session并处理请求"><a href="#6-验证Session并处理请求" class="headerlink" title="6. 验证Session并处理请求"></a>6. <strong>验证Session并处理请求</strong></h5><ul>
<li>服务器检索Session信息，并根据会话中的用户信息验证请求的合法性。</li>
<li>如果Session有效且用户有权限，服务器将处理请求并返回相应的数据。</li>
<li>&#x3D;&#x3D;如果Session无效（如超时或已删除），服务器可能会返回401未授权或重定向到登录页面&#x3D;&#x3D;。</li>
</ul>
<h5 id="7-会话失效"><a href="#7-会话失效" class="headerlink" title="7. 会话失效"></a>7. <strong>会话失效</strong></h5><ul>
<li>会话通常会设置一个超时时间，在此时间内未收到新的请求，Session将自动失效。</li>
<li>当用户主动登出时，服务器会删除该Session，并可能通过设置Cookie的过期时间来删除客户端的Cookie。</li>
</ul>
   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">session.invalidate();  <span class="comment">// 销毁会话</span></span><br></pre></td></tr></table></figure>

<h5 id="8-安全考虑"><a href="#8-安全考虑" class="headerlink" title="8. 安全考虑"></a>8. <strong>安全考虑</strong></h5><ul>
<li><strong>Cookie安全标志</strong>：通过设置 <code>HttpOnly</code> 和 <code>Secure</code> 标志，防止客户端脚本访问Cookie以及确保Cookie仅通过HTTPS传输。</li>
<li>**防止跨站请求伪造 (CSRF)**：通常会配合使用CSRF令牌，以防止恶意网站伪造用户请求。</li>
</ul>
   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;JSESSIONID&quot;</span>, session.getId());</span><br><span class="line">cookie.setHttpOnly(<span class="literal">true</span>);  <span class="comment">// 防止脚本访问</span></span><br><span class="line">cookie.setSecure(<span class="literal">true</span>);    <span class="comment">// 仅通过HTTPS发送</span></span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<h5 id="9-扩展：使用JWT替代Session"><a href="#9-扩展：使用JWT替代Session" class="headerlink" title="9. 扩展：使用JWT替代Session"></a>9. <strong>扩展：使用JWT替代Session</strong></h5><ul>
<li>有时会使用JWT（JSON Web Token）替代传统的Session和Cookie机制。JWT是无状态的，通常将其作为一个Bearer Token存储在客户端，并在每次请求时通过Authorization头发送给服务器。服务器通过验证JWT的签名和内容来认证用户，而无需在服务器端存储会话信息。</li>
</ul>
<p>通过这个流程，Spring Boot应用能够使用Cookie技术有效地进行会话跟踪，确保用户在多个请求之间保持登录状态，并且对用户的身份进行验证。</p>
<h5 id="10-代码Code"><a href="#10-代码Code" class="headerlink" title="10.&#x3D;&#x3D;代码Code&#x3D;&#x3D;"></a>10.&#x3D;&#x3D;代码Code&#x3D;&#x3D;</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionController</span> &#123;</span><br><span class="line">    <span class="comment">//设置Cookie</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/c1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">cookie1</span><span class="params">(HttpServletResponse response)</span> &#123;</span><br><span class="line">        <span class="comment">//创建Cookie对象,并设置值</span></span><br><span class="line">        <span class="comment">//同一会话中，如果客户端是第一次请求服务器(登录)，服务器会将Cookie对象添加到响应中，返回给客户端</span></span><br><span class="line">        response.addCookie(<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;login_username&quot;</span>, <span class="string">&quot;itheima&quot;</span>)); <span class="comment">//设置Cookie/响应Cookie</span></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Cookie</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/c2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">cookie2</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="comment">//同一会话中，客户端已经获取到了服务器通过响应头发送过来的Cookie，</span></span><br><span class="line">        <span class="comment">//并且该Cookie已经被保存到客户端本地，后续当客户端向服务器端发送请求时，会将本地已存储的Cookie自动携带请求头中，</span></span><br><span class="line">        <span class="comment">//服务器端通过请求头获取到该Cookie，从而获取到该Cookie中的数据</span></span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cookie.getName().equals(<span class="string">&quot;login_username&quot;</span>)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;login_username: &quot;</span> + cookie.getValue()); <span class="comment">//输出name为login_username的cookie</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h4 id="（4）JWT令牌"><a href="#（4）JWT令牌" class="headerlink" title="（4）JWT令牌"></a>（4）JWT令牌</h4><h5 id="①简介"><a href="#①简介" class="headerlink" title="①简介"></a>①简介</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813220826925.png" alt="image-20240813220826925"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813220912924.png" alt="image-20240813220912924"></p>
<h5 id="②JWT详细流程与优缺点"><a href="#②JWT详细流程与优缺点" class="headerlink" title="②JWT详细流程与优缺点"></a>②JWT详细流程与优缺点</h5><p>JSON Web Token (JWT) 是一种基于JSON的开放标准（RFC 7519），用于在各方之间作为JSON对象传输信息。JWT的主要特点是信息经过数字签名，因此可以验证信息的真实性和完整性。JWT通常用于身份验证和授权场景中。以下是JWT令牌的详细流程：</p>
<h6 id="1-用户登录请求"><a href="#1-用户登录请求" class="headerlink" title="1. 用户登录请求"></a>1. <strong>用户登录请求</strong></h6><ul>
<li>用户通过前端应用（如Web或移动应用）提交用户名和密码。</li>
<li>前端使用 <strong>POST</strong> 请求将这些凭证发送到后端的认证接口（如 <code>/login</code>）。</li>
</ul>
<h6 id="2-服务器验证用户凭证-1"><a href="#2-服务器验证用户凭证-1" class="headerlink" title="2. 服务器验证用户凭证"></a>2. <strong>服务器验证用户凭证</strong></h6><ul>
<li>后端服务器接收到请求后，从请求体中提取用户名和密码。</li>
<li>服务器验证这些凭证是否正确，通常会查询数据库以匹配用户名和密码。</li>
<li>如果验证成功，服务器会生成一个JWT令牌。</li>
</ul>
<h6 id="3-生成JWT令牌"><a href="#3-生成JWT令牌" class="headerlink" title="3. 生成JWT令牌"></a>3. <strong>生成JWT令牌</strong></h6><ul>
<li>JWT令牌由三部分组成：<strong>Header</strong>、<strong>Payload</strong> 和 <strong>Signature</strong>，每部分之间用点 (<code>.</code>) 分隔。</li>
</ul>
<h6 id="Header（头部）"><a href="#Header（头部）" class="headerlink" title="Header（头部）"></a><strong>Header（头部）</strong></h6><ul>
<li>包含两部分信息：令牌的类型（即JWT）和使用的签名算法（如HMAC SHA256）。   <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HS256&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typ&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>该部分会被Base64Url编码。</li>
</ul>
<h6 id="Payload（负载）"><a href="#Payload（负载）" class="headerlink" title="Payload（负载）"></a><strong>Payload（负载）</strong></h6><ul>
<li>包含声明（claims），即你希望传输和验证的信息。声明可以是预定义的标准声明（如<code>sub</code>、<code>iat</code>等），也可以是自定义的声明。   <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1234567890&quot;</span><span class="punctuation">,</span>    <span class="comment">// 用户ID</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;John Doe&quot;</span><span class="punctuation">,</span>     <span class="comment">// 用户名</span></span><br><span class="line">  <span class="attr">&quot;admin&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>          <span class="comment">// 是否为管理员</span></span><br><span class="line">  <span class="attr">&quot;iat&quot;</span><span class="punctuation">:</span> <span class="number">1516239022</span>       <span class="comment">// 签发时间</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>该部分也会被Base64Url编码。</li>
</ul>
<h6 id="Signature（签名）"><a href="#Signature（签名）" class="headerlink" title="Signature（签名）"></a><strong>Signature（签名）</strong></h6><ul>
<li>签名是通过将Header和Payload与一个密钥一起进行哈希运算生成的，用来验证令牌的完整性和来源。   <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + &quot;.&quot; +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">  secret)</span><br></pre></td></tr></table></figure></li>
<li>最终生成的JWT令牌如下所示：   <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span><br><span class="line">.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0</span><br><span class="line">.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="4-返回JWT令牌"><a href="#4-返回JWT令牌" class="headerlink" title="4. 返回JWT令牌"></a>4. <strong>返回JWT令牌</strong></h6><ul>
<li>服务器将生成的JWT令牌返回给客户端，通常会将其包含在响应的请求体中或作为HTTP头的值。   <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="5-客户端存储JWT"><a href="#5-客户端存储JWT" class="headerlink" title="5. &#x3D;&#x3D;客户端存储JWT&#x3D;&#x3D;"></a>5. &#x3D;&#x3D;<strong>客户端存储JWT</strong>&#x3D;&#x3D;</h6><ul>
<li>&#x3D;&#x3D;客户端接收到JWT令牌后，通常会将其存储在浏览器&#x3D;&#x3D;的&#x3D;&#x3D;localStorage&#x3D;&#x3D;、 <code>sessionStorage</code> 或 <code>cookies</code> 中，具体存储位置取决于应用需求和安全性考虑。</li>
</ul>
<h6 id="6-客户端在后续请求中发送JWT"><a href="#6-客户端在后续请求中发送JWT" class="headerlink" title="6. &#x3D;&#x3D;客户端在后续请求中发送JWT&#x3D;&#x3D;"></a>6. &#x3D;&#x3D;<strong>客户端在后续请求中发送JWT</strong>&#x3D;&#x3D;</h6><ul>
<li>&#x3D;&#x3D;客户端在每次发送请求（如访问受保护的资源）时，将JWT令牌包含在HTTP请求头的token项中&#x3D;&#x3D;。</li>
</ul>
<h6 id="7-服务器验证JWT"><a href="#7-服务器验证JWT" class="headerlink" title="7. 服务器验证JWT"></a>7. <strong>服务器验证JWT</strong></h6><ul>
<li>服务器接收到请求后，从 请求头中提取JWT令牌。</li>
<li>服务器通过验证JWT的签名来确保令牌的完整性和真实性（使用之前生成令牌时的密钥）。同时，服务器会检查JWT的有效期（如 <code>exp</code> 声明）和其他声明，以确保令牌仍然有效。</li>
<li>如果验证成功，服务器会信任JWT中的声明并根据其中的信息进行相应的操作，如授权用户访问受保护的资源。</li>
</ul>
<h6 id="8-处理请求并返回响应"><a href="#8-处理请求并返回响应" class="headerlink" title="8. 处理请求并返回响应"></a>8. <strong>处理请求并返回响应</strong></h6><ul>
<li>如果JWT验证通过，服务器会根据请求内容处理业务逻辑，并将结果返回给客户端。</li>
<li>如果JWT验证失败（如签名不正确、令牌过期等），服务器通常会返回401未授权错误，&#x3D;&#x3D;提示客户端重新登录&#x3D;&#x3D;或获取新令牌。</li>
</ul>
<h6 id="9-令牌续期（可选）"><a href="#9-令牌续期（可选）" class="headerlink" title="9. 令牌续期（可选）"></a>9. <strong>令牌续期（可选）</strong></h6><ul>
<li>为了提高安全性和用户体验，系统通常会设置JWT令牌的有效期相对较短，并提供刷新令牌（Refresh Token）的机制。</li>
<li>当JWT接近过期时，客户端可以使用刷新令牌向服务器请求一个新的JWT令牌，而无需用户重新登录。</li>
<li>服务器验证刷新令牌的有效性后，生成并返回一个新的JWT令牌。</li>
</ul>
<h6 id="10-安全考虑"><a href="#10-安全考虑" class="headerlink" title="10. 安全考虑"></a>10. <strong>安全考虑</strong></h6><ul>
<li><strong>密钥管理</strong>：确保签名密钥的安全，避免泄露。</li>
<li><strong>令牌过期时间</strong>：设置合理的令牌有效期，减少令牌被滥用的风险。</li>
<li><strong>传输安全</strong>：通过HTTPS加密JWT令牌的传输，防止中间人攻击。</li>
<li><strong>防止重放攻击</strong>：使用 <code>jti</code> 声明或其他机制，确保令牌不会被重复使用。</li>
</ul>
<h6 id="JWT的优点"><a href="#JWT的优点" class="headerlink" title="JWT的优点"></a>JWT的优点</h6><ul>
<li><strong>无状态</strong>：JWT是无状态的，服务器不需要保存会话信息，减少了服务器的负担。</li>
<li><strong>可扩展性强</strong>：由于JWT自包含所有信息，系统易于水平扩展。</li>
<li><strong>灵活性高</strong>：可以在不同的服务之间共享令牌，用于跨服务认证和授权。</li>
</ul>
<h6 id="JWT的缺点"><a href="#JWT的缺点" class="headerlink" title="&#x3D;&#x3D;JWT的缺点&#x3D;&#x3D;"></a>&#x3D;&#x3D;JWT的缺点&#x3D;&#x3D;</h6><ul>
<li><strong>无状态</strong>：因为不存储在服务器上，&#x3D;&#x3D;一旦签发，无法立即使其失效&#x3D;&#x3D;（如在用户登出或被盗用时）。</li>
<li><strong>长度较长</strong>：JWT包含了较多信息，相比Session ID可能更大，这会增加带宽消耗。</li>
</ul>
<p>通过JWT，Web应用可以高效、安全地实现用户认证和授权，特别适合微服务架构和跨平台应用。</p>
<h5 id="③JWT的-依赖导入和工具类"><a href="#③JWT的-依赖导入和工具类" class="headerlink" title="③JWT的&#x3D;&#x3D;依赖导入和工具类&#x3D;&#x3D;"></a>③JWT的&#x3D;&#x3D;依赖导入和工具类&#x3D;&#x3D;</h5><h6 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">signKey</span> <span class="operator">=</span> <span class="string">&quot;XiaoPeng&quot;</span>; <span class="comment">//设置签名密钥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Long</span> <span class="variable">expire</span> <span class="operator">=</span> <span class="number">43200000L</span>; <span class="comment">//设置令牌过期时间为12h</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> claims JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateJwt</span><span class="params">(Map&lt;String, Object&gt; claims)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                .addClaims(claims)</span><br><span class="line">                .signWith(SignatureAlgorithm.HS256, signKey)</span><br><span class="line">                .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + expire))</span><br><span class="line">                .compact();</span><br><span class="line">        <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JWT第二部分负载 payload 中存储的内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span>&#123;</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> Jwts.parser()</span><br><span class="line">                .setSigningKey(signKey)</span><br><span class="line">                .parseClaimsJws(jwt)</span><br><span class="line">                .getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="④JWT的校验与生成"><a href="#④JWT的校验与生成" class="headerlink" title="④JWT的校验与生成"></a>④JWT的校验与生成</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813222608525.png" alt="image-20240813222608525"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813221038514.png" alt="image-20240813221038514"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240813222056747.png" alt="image-20240813222056747"></p>
<h6 id="前端（客户端、浏览器）成功登录后获取到对应的jwt令牌并存储到-Application下的Local-Storage目录中-，-之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中-。之后再进行校验jwt令牌的有效性。"><a href="#前端（客户端、浏览器）成功登录后获取到对应的jwt令牌并存储到-Application下的Local-Storage目录中-，-之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中-。之后再进行校验jwt令牌的有效性。" class="headerlink" title="前端（客户端、浏览器）成功登录后获取到对应的jwt令牌并存储到&#x3D;&#x3D;Application下的Local Storage目录中&#x3D;&#x3D;，  &#x3D;&#x3D;之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中&#x3D;&#x3D;。之后再进行校验jwt令牌的有效性。"></a><strong>前端（客户端</strong>、浏览器）成功登录后获取到对应的jwt令牌并存储到&#x3D;&#x3D;Application下的Local Storage目录中&#x3D;&#x3D;，  &#x3D;&#x3D;之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中&#x3D;&#x3D;。之后再进行校验jwt令牌的有效性。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814135613018.png" alt="image-20240814135613018"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 登录-使用JWT令牌</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> Emp emp)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;员工登录: &#123;&#125;&quot;</span>, emp);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">e</span> <span class="operator">=</span> empService.login(emp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//登录成功,生成令牌,下发令牌</span></span><br><span class="line">    <span class="keyword">if</span> (e != <span class="literal">null</span>)&#123;</span><br><span class="line">        Map&lt;String, Object&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        claims.put(<span class="string">&quot;id&quot;</span>, e.getId());</span><br><span class="line">        claims.put(<span class="string">&quot;name&quot;</span>, e.getName());</span><br><span class="line">        claims.put(<span class="string">&quot;username&quot;</span>, e.getUsername());</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtils.generateJwt(claims); <span class="comment">//jwt包含了当前登录的员工信息</span></span><br><span class="line">        <span class="comment">//前端（客户端、浏览器）成功登录后获取到对应的jwt令牌并存储到Application下的Local Storage目录中，</span></span><br><span class="line">        <span class="comment">//之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中。之后再进行校验jwt令牌的有效性。</span></span><br><span class="line">        <span class="keyword">return</span> Result.success(jwt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//登录失败, 返回错误信息</span></span><br><span class="line">    <span class="keyword">return</span> Result.error(<span class="string">&quot;用户名或密码错误&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（5）-Filter过滤器-对JWT令牌实现统一检验与拦截）"><a href="#（5）-Filter过滤器-对JWT令牌实现统一检验与拦截）" class="headerlink" title="（5）&#x3D;&#x3D;Filter过滤器&#x3D;&#x3D;(对JWT令牌实现统一检验与拦截）"></a>（5）&#x3D;&#x3D;Filter过滤器&#x3D;&#x3D;(对JWT令牌实现统一检验与拦截）</h4><h5 id="①概述-1"><a href="#①概述-1" class="headerlink" title="①概述"></a>①概述</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814140047809.png" alt="image-20240814140047809"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142515453.png" alt="image-20240814142515453"></p>
<h5 id="②快速入门"><a href="#②快速入门" class="headerlink" title="②快速入门"></a>②快速入门</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814140550073.png" alt="image-20240814140550073"></p>
<h6 id="Filter类"><a href="#Filter类" class="headerlink" title="Filter类"></a>Filter类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span> <span class="comment">// /* 表示拦截所有请求</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化方法，Web服务器启动，创建Filter时调用，只调用一次</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filterConfig</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.init(filterConfig);</span><br><span class="line">        System.out.println(<span class="string">&quot;init 初始化方法执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截到请求时，调用该方法，可调用多次</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletRequest</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> servletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filterChain</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Demo 拦截到了请求...放行前逻辑&quot;</span>);</span><br><span class="line">        <span class="comment">//放行</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Demo 拦截到了请求...放行后逻辑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 销毁方法，服务器关闭时调用，只调用一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.destroy();</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy 销毁方法执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="启动类"><a href="#启动类" class="headerlink" title="启动类"></a>启动类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ServletComponentScan</span> <span class="comment">//由于Filter是JavaWeb中的三大组件之一，并不是springboot的功能</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TliasWebManagementApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TliasWebManagementApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="③Filter的执行流程"><a href="#③Filter的执行流程" class="headerlink" title="③Filter的执行流程"></a>③Filter的执行流程</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814141725919.png" alt="image-20240814141725919"></p>
<h5 id="④Filter的拦截路径"><a href="#④Filter的拦截路径" class="headerlink" title="④Filter的拦截路径"></a>④Filter的拦截路径</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814141958924.png" alt="image-20240814141958924"></p>
<h5 id="⑤Filter的过滤器链"><a href="#⑤Filter的过滤器链" class="headerlink" title="⑤Filter的过滤器链"></a>⑤Filter的过滤器链</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142337108.png" alt="image-20240814142337108"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142436378.png" alt="image-20240814142436378"></p>
<h5 id="⑥-Filter登录校验-JWT令牌有效性"><a href="#⑥-Filter登录校验-JWT令牌有效性" class="headerlink" title="⑥&#x3D;&#x3D;Filter登录校验&#x3D;&#x3D;JWT令牌有效性"></a>⑥&#x3D;&#x3D;Filter登录校验&#x3D;&#x3D;JWT令牌有效性</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142707065.png" alt="image-20240814142707065"></p>
<h6 id="返回固定错误信息"><a href="#返回固定错误信息" class="headerlink" title="返回固定错误信息"></a>返回固定错误信息</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142742362.png" alt="image-20240814142742362"></p>
<h6 id="Filter登录校验流程"><a href="#Filter登录校验流程" class="headerlink" title="Filter登录校验流程"></a>Filter登录校验流程</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814142928947.png" alt="image-20240814142928947"></p>
<h6 id="阿里对象快速转JSON的依赖"><a href="#阿里对象快速转JSON的依赖" class="headerlink" title="阿里对象快速转JSON的依赖"></a>阿里对象快速转JSON的依赖</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--fastJSON--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.76<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//类型强转，向下转型</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">resp</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.获取请求url。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> req.getRequestURL().toString();</span><br><span class="line">        log.info(<span class="string">&quot;请求的url: &#123;&#125;&quot;</span>,url);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.判断请求url中是否包含login，如果包含，说明是登录操作，放行。</span></span><br><span class="line">        <span class="keyword">if</span>(url.contains(<span class="string">&quot;login&quot;</span>))&#123;</span><br><span class="line">            log.info(<span class="string">&quot;登录操作, 放行...&quot;</span>);</span><br><span class="line">            filterChain.doFilter(servletRequest,servletResponse); <span class="comment">//放行</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.获取请求头中的令牌（token）。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.判断令牌是否存在，如果不存在，返回错误结果（未登录）。</span></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasLength(jwt))&#123; <span class="comment">//为null或&quot;&quot;</span></span><br><span class="line">            log.info(<span class="string">&quot;请求头token为空,返回未登录的信息&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//手动转换 对象--json --------&gt; 阿里巴巴fastJSON</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">notLoginJson</span> <span class="operator">=</span> JSONObject.toJSONString(error);</span><br><span class="line">            resp.getWriter().write(notLoginJson); <span class="comment">//将登录的错误信息响应给前端</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.解析token，如果解析失败，返回错误结果（未登录）。</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.parseJWT(jwt);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;<span class="comment">//报错则表示，jwt解析失败，jwt令牌被篡改或过期等</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.info(<span class="string">&quot;解析令牌失败, 返回未登录错误信息&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//手动转换 对象--json --------&gt; 阿里巴巴fastJSON</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">notLoginJson</span> <span class="operator">=</span> JSONObject.toJSONString(error);</span><br><span class="line">            resp.getWriter().write(notLoginJson); <span class="comment">//将登录的错误信息响应给前端</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.放行。</span></span><br><span class="line">        log.info(<span class="string">&quot;令牌合法, 放行&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Filter.<span class="built_in">super</span>.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（6）拦截器Interceptor"><a href="#（6）拦截器Interceptor" class="headerlink" title="（6）拦截器Interceptor"></a>（6）拦截器Interceptor</h4><h5 id="①概述-2"><a href="#①概述-2" class="headerlink" title="①概述"></a>①概述</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814145534018.png" alt="image-20240814145534018"></p>
<h5 id="②快速入门-1"><a href="#②快速入门-1" class="headerlink" title="②快速入门"></a>②快速入门</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814145454967.png" alt="image-20240814145454967"></p>
<h6 id="连接器LoginCheckInterceptor类"><a href="#连接器LoginCheckInterceptor类" class="headerlink" title="连接器LoginCheckInterceptor类"></a>连接器LoginCheckInterceptor类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//IOC控制反转，将该bean对象的控制权交给spring（放到容器中）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123; <span class="comment">//该拦截器需要再WebConfig中进行添加（注册）。</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 目标资源方法(Controller中的方法)运行前运行, 返回true: 放行, 放回false, 不放行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//6.放行。</span></span><br><span class="line">        log.info(<span class="string">&quot;令牌合法, 放行&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 目标资源方法(Controller中的方法)运行后运行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 视图渲染完毕后运行, 最后运行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="配置类WebConfig"><a href="#配置类WebConfig" class="headerlink" title="配置类WebConfig"></a>配置类WebConfig</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//声明这是spring中的配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//将LoginCheckInterceptor拦截器的bean对象注入，以便于使用</span></span><br><span class="line">    <span class="keyword">private</span> LoginCheckInterceptor loginCheckInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加拦截器，并配置拦截器要拦截的请求路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//  /** 表示拦截所有的请求路径</span></span><br><span class="line">        registry.addInterceptor(loginCheckInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="③拦截器的拦截路径"><a href="#③拦截器的拦截路径" class="headerlink" title="③拦截器的拦截路径"></a>③拦截器的拦截路径</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814150909726.png" alt="image-20240814150909726"></p>
<h5 id="④拦截器的执行流程"><a href="#④拦截器的执行流程" class="headerlink" title="④拦截器的执行流程"></a>④拦截器的执行流程</h5><h6 id="Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序-，"><a href="#Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序-，" class="headerlink" title="&#x3D;&#x3D;Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序&#x3D;&#x3D;，"></a>&#x3D;&#x3D;Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序&#x3D;&#x3D;，</h6><h6 id="所以spring提供了一个-前端控制器DispatcherServlet-，接受前端的请求，再将这些请求转给Controller，访问对应的接口。"><a href="#所以spring提供了一个-前端控制器DispatcherServlet-，接受前端的请求，再将这些请求转给Controller，访问对应的接口。" class="headerlink" title="所以spring提供了一个&#x3D;&#x3D;前端控制器DispatcherServlet&#x3D;&#x3D;，接受前端的请求，再将这些请求转给Controller，访问对应的接口。"></a>所以spring提供了一个&#x3D;&#x3D;前端控制器DispatcherServlet&#x3D;&#x3D;，接受前端的请求，再将这些请求转给Controller，访问对应的接口。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814151820004.png" alt="image-20240814151820004"></p>
<h5 id="⑤-拦截器登录校验-jWT令牌有效性"><a href="#⑤-拦截器登录校验-jWT令牌有效性" class="headerlink" title="⑤&#x3D;&#x3D;拦截器登录校验&#x3D;&#x3D;jWT令牌有效性"></a>⑤&#x3D;&#x3D;拦截器登录校验&#x3D;&#x3D;jWT令牌有效性</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.Result;</span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.JwtUtils;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//IOC控制反转，将该对象的控制权交给spring（放到IOC容器中进行管理，成为IOC容器中的bean对象）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginCheckInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123; <span class="comment">//该拦截器需要再WebConfig中进行添加（注册）。</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 目标资源方法(Controller中的方法)运行前运行, 返回true: 放行, 放回false, 不放行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.获取请求url。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURL().toString();</span><br><span class="line">        log.info(<span class="string">&quot;请求的url: &#123;&#125;&quot;</span>,url);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.判断请求url中是否包含login，如果包含，说明是登录操作，放行。</span></span><br><span class="line">        <span class="keyword">if</span>(url.contains(<span class="string">&quot;login&quot;</span>))&#123;</span><br><span class="line">            log.info(<span class="string">&quot;登录操作, 放行...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.获取请求头中的令牌（token）。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.判断令牌是否存在，如果不存在，返回错误结果（未登录）。</span></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasLength(jwt))&#123; <span class="comment">//为null或&quot;&quot;</span></span><br><span class="line">            log.info(<span class="string">&quot;请求头token为空,返回未登录的信息&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//手动转换 对象--json --------&gt; 阿里巴巴fastJSON</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">notLoginJson</span> <span class="operator">=</span> JSONObject.toJSONString(error);</span><br><span class="line">            response.getWriter().write(notLoginJson); <span class="comment">//将登录的错误信息响应给前端</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.解析token，如果解析失败，返回错误结果（未登录）。</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.parseJWT(jwt);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;<span class="comment">//报错则表示，jwt解析失败，jwt令牌被篡改或过期等</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.info(<span class="string">&quot;解析令牌失败, 返回未登录错误信息&quot;</span>);</span><br><span class="line">            <span class="type">Result</span> <span class="variable">error</span> <span class="operator">=</span> Result.error(<span class="string">&quot;NOT_LOGIN&quot;</span>);</span><br><span class="line">            <span class="comment">//手动转换 对象--json --------&gt; 阿里巴巴fastJSON</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">notLoginJson</span> <span class="operator">=</span> JSONObject.toJSONString(error);</span><br><span class="line">            response.getWriter().write(notLoginJson); <span class="comment">//将登录的错误信息响应给前端</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.放行。</span></span><br><span class="line">        log.info(<span class="string">&quot;令牌合法, 放行&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 目标资源方法(Controller中的方法)运行后运行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 视图渲染完毕后运行, 最后运行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="六、Tomcat服务器"><a href="#六、Tomcat服务器" class="headerlink" title="六、Tomcat服务器"></a>六、Tomcat服务器</h2><h3 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h3><h4 id="（1）Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序，所以spring提供了一个前端控制器DispatcherServlet，接受前端的请求，再将这些请求转给Controller，访问对应的接口。"><a href="#（1）Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序，所以spring提供了一个前端控制器DispatcherServlet，接受前端的请求，再将这些请求转给Controller，访问对应的接口。" class="headerlink" title="（1）Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序，所以spring提供了一个前端控制器DispatcherServlet，接受前端的请求，再将这些请求转给Controller，访问对应的接口。"></a>（1）Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序，所以spring提供了一个前端控制器DispatcherServlet，接受前端的请求，再将这些请求转给Controller，访问对应的接口。</h4><h5 id="SpringBoot项目是在内嵌的tomcat服务器上运行的"><a href="#SpringBoot项目是在内嵌的tomcat服务器上运行的" class="headerlink" title="&#x3D;&#x3D;SpringBoot项目是在内嵌的tomcat服务器上运行的&#x3D;&#x3D;"></a><strong>&#x3D;&#x3D;SpringBoot项目是在内嵌的tomcat服务器上运行的&#x3D;&#x3D;</strong></h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814151820004.png"/>



<h2 id="七、异常处理"><a href="#七、异常处理" class="headerlink" title="七、异常处理"></a>七、异常处理</h2><h3 id="1、思考"><a href="#1、思考" class="headerlink" title="1、思考"></a>1、思考</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814153621314.png" alt="image-20240814153621314"></p>
<h3 id="2、全局异常处理器"><a href="#2、全局异常处理器" class="headerlink" title="2、全局异常处理器"></a>2、全局异常处理器</h3><h6 id="RestControllerAdvice注解，表示该类为全局异常处理器"><a href="#RestControllerAdvice注解，表示该类为全局异常处理器" class="headerlink" title="@RestControllerAdvice注解，表示该类为全局异常处理器"></a>@RestControllerAdvice注解，表示该类为全局异常处理器</h6><h6 id="ExceptionHandler-Exception-class-注解，表示设置需要捕获的异常，其中-Exception-class表示捕获所有异常-。"><a href="#ExceptionHandler-Exception-class-注解，表示设置需要捕获的异常，其中-Exception-class表示捕获所有异常-。" class="headerlink" title="@ExceptionHandler(Exception.class)注解，表示设置需要捕获的异常，其中&#x3D;&#x3D;Exception.class表示捕获所有异常&#x3D;&#x3D;。"></a>@ExceptionHandler(Exception.class)注解，表示设置需要捕获的异常，其中&#x3D;&#x3D;Exception.class表示捕获所有异常&#x3D;&#x3D;。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814153740401.png" alt="image-20240814153740401"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局异常处理器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">ex</span><span class="params">(Exception exception)</span>&#123;</span><br><span class="line">        exception.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;对不起,操作失败,请联系管理员&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>在Spring MVC中的拦截器（<code>HandlerInterceptor</code>）中，<code>preHandle</code>方法的返回值决定了请求是否继续执行。如果你返回<code>false</code>，请求就会被终止，不会继续执行后续的拦截器或处理器（即控制器方法）。如果返回<code>true</code>，则请求继续执行。</p>
<p>&#x3D;&#x3D;当你选择抛出异常而不返回<code>false</code>时&#x3D;&#x3D;，有几个关键点可以解释为什么这是一种可行的做法：</p>
<ol>
<li><p><strong>抛出异常会中断执行流：</strong></p>
<ul>
<li>当<code>preHandle</code>方法抛出异常时，当前的执行流会被中断，Spring框架不会继续处理后续的拦截器或控制器方法。<strong>这与返回<code>false</code>的效果相同，即请求处理被终止</strong>。</li>
</ul>
</li>
<li><p><strong>全局异常处理器介入：</strong></p>
<ul>
<li>抛出的异常会被Spring的全局异常处理器（<code>@ControllerAdvice</code>中的<code>@ExceptionHandler</code>方法）捕获，并进行相应的处理。全局异常处理器会根据异常类型生成合适的HTTP响应（如设置状态码和返回错误信息），然后返回给客户端。这种方式比在拦截器中返回<code>false</code>直接终止请求处理更加灵活和可控。</li>
</ul>
</li>
<li><p><strong>避免冗余的控制流：</strong></p>
<ul>
<li>如果你在抛出异常后还返回<code>false</code>，这实际上是多余的，因为抛出异常已经有效地中断了正常的请求处理流程。返回<code>false</code>在这种情况下不会执行，因为控制权已经被异常处理逻辑接管。</li>
</ul>
</li>
<li><p><strong>代码简洁性和可维护性：</strong></p>
<ul>
<li>抛出异常让你可以利用Spring的全局异常处理机制，集中管理错误处理逻辑。这使得代码更加简洁，并且减少了在不同地方重复处理错误的情况。通过全局异常处理，你可以统一地处理各种异常情况，从而提高代码的可维护性。</li>
</ul>
</li>
</ol>
<p>综上所述，抛出异常并让全局异常处理器处理，使得拦截器中的代码更加简洁，同时利用Spring框架提供的功能，更好地处理异常并生成一致的响应。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * jwt令牌校验的拦截器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtTokenAdminInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JwtProperties jwtProperties;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//判断当前拦截到的是Controller的方法还是其他资源</span></span><br><span class="line">        <span class="keyword">if</span> (!(handler <span class="keyword">instanceof</span> HandlerMethod)) &#123;</span><br><span class="line">            <span class="comment">//当前拦截到的不是动态方法，直接放行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1、从请求头中获取令牌</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(jwtProperties.getAdminTokenName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、校验令牌</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;jwt校验:&#123;&#125;&quot;</span>, token);</span><br><span class="line">            <span class="comment">//如果jwt解析报错说明token有误，解析失败</span></span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(jwtProperties.getAdminSecretKey(), token);</span><br><span class="line">            <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> Long.valueOf(claims.get(JwtClaimsConstant.EMP_ID).toString());</span><br><span class="line">            log.info(<span class="string">&quot;当前员工id：&quot;</span>, empId);</span><br><span class="line">            <span class="comment">//3、通过，放行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">//4、不通过，响应401状态码</span></span><br><span class="line">            response.setStatus(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BaseException</span>(<span class="string">&quot;jwt校验错误&quot;</span>); </span><br><span class="line">            <span class="comment">//没有直接使用return false而是直接抛出异常，让全局异常处理器将异常信息返回给前端</span></span><br><span class="line"><span class="comment">//            return false;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="八、事务管理"><a href="#八、事务管理" class="headerlink" title="八、事务管理"></a>八、事务管理</h2><h3 id="1、事务的概念"><a href="#1、事务的概念" class="headerlink" title="1、事务的概念"></a>1、事务的概念</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814155755485.png" alt="image-20240814155755485"></p>
<h3 id="2、案例分析"><a href="#2、案例分析" class="headerlink" title="2、案例分析"></a>2、案例分析</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814155832451.png" alt="image-20240814155832451"></p>
<h3 id="3、Spring事务管理-Transactional注解"><a href="#3、Spring事务管理-Transactional注解" class="headerlink" title="3、Spring事务管理-&#x3D;&#x3D;@Transactional注解&#x3D;&#x3D;"></a>3、Spring事务管理-&#x3D;&#x3D;@Transactional注解&#x3D;&#x3D;</h3><p>&#x3D;&#x3D;事务管理日志开关配置-application.yaml文件中配置&#x3D;&#x3D;</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#spring事务管理日志</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">org.springframework.jdbc.support.JdbcTransactionManager:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814155919968.png" alt="image-20240814155919968"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span> <span class="comment">//IOC 控制反转：对象的创建控制权由程序自身转移到外部（容器），这种思想称为控制反转</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptMapper deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 没有事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">/*    @Override</span></span><br><span class="line"><span class="comment">    public void delete(Integer id) &#123;</span></span><br><span class="line"><span class="comment">        deptMapper.deleteById(id);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span> <span class="comment">//spring事务管理注解</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        deptMapper.deleteById(id); <span class="comment">//根据ID删除部门数据</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>; <span class="comment">//报异常，有事务会自动回滚rollback</span></span><br><span class="line"></span><br><span class="line">        empMapper.deleteByDeptId(id); <span class="comment">//根据部门ID删除该部门下的员工</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（1）事务属性-rollbackFor"><a href="#（1）事务属性-rollbackFor" class="headerlink" title="（1）事务属性-&#x3D;&#x3D;rollbackFor&#x3D;&#x3D;"></a>（1）事务属性-&#x3D;&#x3D;rollbackFor&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814161651205.png" alt="image-20240814161651205"></p>
<h6 id="spring事务管理注解-该注解-默认只会对运行时异常RunTimeException进行回滚-。"><a href="#spring事务管理注解-该注解-默认只会对运行时异常RunTimeException进行回滚-。" class="headerlink" title="spring事务管理注解,该注解&#x3D;&#x3D;默认只会对运行时异常RunTimeException进行回滚&#x3D;&#x3D;。"></a>spring事务管理注解,该注解&#x3D;&#x3D;默认只会对运行时异常RunTimeException进行回滚&#x3D;&#x3D;。</h6><h6 id="设置rollbackFor为后Exception-class可以-对报出的所有异常都可进行回滚-。"><a href="#设置rollbackFor为后Exception-class可以-对报出的所有异常都可进行回滚-。" class="headerlink" title="设置rollbackFor为后Exception.class可以&#x3D;&#x3D;对报出的所有异常都可进行回滚&#x3D;&#x3D;。"></a>设置rollbackFor为后Exception.class可以&#x3D;&#x3D;对报出的所有异常都可进行回滚&#x3D;&#x3D;。</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//@Transactional //spring事务管理注解,该注解默认只会对运行时异常RunTimeException进行回滚。</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span> <span class="comment">//设置rollbackFor为后Exception.class可以对报出的所有异常都可进行回滚。</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    deptMapper.deleteById(id); <span class="comment">//根据ID删除部门数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//int i = 1/0; //报异常，有事务会自动回滚rollback,该异常属于运行时异常RunTimeException。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="comment">//该异常不属于运行时异常RunTimeException,</span></span><br><span class="line">        <span class="comment">//如果注解@Transactional未设置rollbackFor = Exception.class，事务不会对其进行回滚。</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;出错了！！！！！&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    empMapper.deleteByDeptId(id); <span class="comment">//根据部门ID删除该部门下的员工</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（2）事务属性-传播行为"><a href="#（2）事务属性-传播行为" class="headerlink" title="（2）事务属性-&#x3D;&#x3D;传播行为&#x3D;&#x3D;"></a>（2）事务属性-&#x3D;&#x3D;传播行为&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814162320433.png" alt="image-20240814162320433"></p>
<p><img src="C:/Users/%E5%B0%8F%E9%B9%8F/AppData/Roaming/Typora/typora-user-images/image-20240814162304235.png"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814162915535.png" alt="image-20240814162915535"></p>
<h6 id="传播行为的两大使用场景-REQUIRES-和-REQUIRES-NEW"><a href="#传播行为的两大使用场景-REQUIRES-和-REQUIRES-NEW" class="headerlink" title="传播行为的两大使用场景-&#x3D;&#x3D;REQUIRES&#x3D;&#x3D;和&#x3D;&#x3D;REQUIRES_NEW&#x3D;&#x3D;"></a>传播行为的两大使用场景-&#x3D;&#x3D;REQUIRES&#x3D;&#x3D;和&#x3D;&#x3D;REQUIRES_NEW&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814170521145.png" alt="image-20240814170521145"></p>
<h4 id="（3）解散部门并-添加日志信息"><a href="#（3）解散部门并-添加日志信息" class="headerlink" title="（3）解散部门并&#x3D;&#x3D;添加日志信息&#x3D;&#x3D;"></a>（3）解散部门并&#x3D;&#x3D;添加日志信息&#x3D;&#x3D;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有事务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@Transactional //spring事务管理注解,该注解默认只会对运行时异常RunTimeException进行回滚。</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span> <span class="comment">//设置rollbackFor为后Exception.class可以对报出的所有异常都可进行回滚。</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">deleteSuccessMark</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">exceptionMsg</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            deptMapper.deleteById(id); <span class="comment">//根据ID删除部门数据</span></span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>; <span class="comment">//报异常，有事务会自动回滚rollback,该异常属于运行时异常RunTimeException。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*        if(true)&#123;</span></span><br><span class="line"><span class="comment">            //该异常不属于运行时异常RunTimeException,</span></span><br><span class="line"><span class="comment">            //如果注解@Transactional未设置rollbackFor = Exception.class，事务不会对其进行回滚。</span></span><br><span class="line"><span class="comment">            throw new Exception(&quot;出错了！！！！！&quot;);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">            empMapper.deleteByDeptId(id); <span class="comment">//根据部门ID删除该部门下的员工</span></span><br><span class="line"></span><br><span class="line">            deleteSuccessMark = <span class="literal">true</span>; <span class="comment">// 如果代码执行到这里，表示操作成功</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            deleteSuccessMark = <span class="literal">false</span>; <span class="comment">// 捕获到异常，表示操作失败</span></span><br><span class="line">            exceptionMsg = e.getMessage(); <span class="comment">//保存异常信息</span></span><br><span class="line">            <span class="keyword">throw</span> e; <span class="comment">// 继续抛出异常，以便事务管理器处理回滚</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//将对部门表的操作日志添加到部门的日志表中，</span></span><br><span class="line">            <span class="comment">//需要考虑事务的传播行为：</span></span><br><span class="line">            <span class="comment">//@Transactional()默认是@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line">            <span class="comment">//表示需要事务，有则加入(会加入到外层事务，如果外层事务出现异常进行了回滚则该操作也会一同回滚)，无则创建新事务</span></span><br><span class="line">            <span class="comment">//@Transactional(propagation = Propagation.REQUIRES_NEW) //挂起外层事务，创建一个新的事物并提交，提交完后再执行外层事务</span></span><br><span class="line">            <span class="type">DeptLog</span> <span class="variable">deptLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeptLog</span>();</span><br><span class="line">            deptLog.setCreateTime(LocalDateTime.now());</span><br><span class="line">            <span class="keyword">if</span> (deleteSuccessMark) &#123;</span><br><span class="line">                deptLog.setDescription(<span class="string">&quot;成功执行了解散部门的操作,此次解散的是&quot;</span>+id+<span class="string">&quot;号部门&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                deptLog.setDescription(<span class="string">&quot;解散&quot;</span> + id + <span class="string">&quot;号部门的操作失败\n&quot;</span>+<span class="string">&quot;失败原因：&quot;</span>+exceptionMsg);</span><br><span class="line">            &#125;</span><br><span class="line">            deptLogService.insert(deptLog);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<h6 id="设置-Transactional的propagation属性值，进行事务传播管理"><a href="#设置-Transactional的propagation属性值，进行事务传播管理" class="headerlink" title="&#x3D;&#x3D;设置@Transactional的propagation属性值，进行事务传播管理&#x3D;&#x3D;"></a>&#x3D;&#x3D;设置@Transactional的propagation属性值，进行事务传播管理&#x3D;&#x3D;</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptLogServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptLogService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptLogMapper deptLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@Transactional()默认是@Transactional(propagation = Propagation.REQUIRED) </span></span><br><span class="line">    <span class="comment">//表示需要事务，有则加入(会加入到外层事务，如果外层事务出现异常进行了回滚则该操作也会一同回滚)，无则创建新事务</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span> <span class="comment">//挂起外层事务，创建一个新的事物并提交，提交完后再执行外层事务</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(DeptLog deptLog)</span> &#123;</span><br><span class="line">        deptLogMapper.insert(deptLog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="九、AOP"><a href="#九、AOP" class="headerlink" title="九、AOP"></a>九、AOP</h2><h3 id="1、AOP快速入门"><a href="#1、AOP快速入门" class="headerlink" title="1、AOP快速入门"></a>1、AOP快速入门</h3><h4 id="（1）AOP的使用场景"><a href="#（1）AOP的使用场景" class="headerlink" title="（1）AOP的使用场景"></a>（1）AOP的使用场景</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814172050231.png" alt="image-20240814172050231"></p>
<h4 id="（2）AOP的概述"><a href="#（2）AOP的概述" class="headerlink" title="（2）AOP的概述"></a>（2）AOP的概述</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814172308990.png" alt="image-20240814172308990"></p>
<p>这段话的核心是在解释AOP技术（面向切面编程）以及Spring框架中AOP的实现方式，主要通过动态代理机制对特定的方法进行增强。让我们逐步解析这段话：</p>
<h5 id="①AOP技术（面向切面编程）"><a href="#①AOP技术（面向切面编程）" class="headerlink" title="①AOP技术（面向切面编程）"></a>①<strong>AOP技术（面向切面编程）</strong></h5><ul>
<li><strong>概念</strong>：AOP（Aspect-Oriented Programming）是一种编程范式，旨在将关注点（如日志记录、安全、事务管理等）与业务逻辑分离开来。这些关注点通常是横切关注点（cross-cutting concerns），因为它们贯穿于应用程序的多个模块。</li>
<li>&#x3D;&#x3D;<strong>目的</strong>&#x3D;&#x3D;：通过AOP，可以将这些横切关注点集中管理，避免在业务代码中重复编写相同的代码，从而提高代码的可维护性和可重用性。</li>
</ul>
<h5 id="②-动态代理是AOP的主流实现"><a href="#②-动态代理是AOP的主流实现" class="headerlink" title="②&#x3D;&#x3D;动态代理是AOP的主流实现&#x3D;&#x3D;"></a>②&#x3D;&#x3D;<strong>动态代理是AOP的主流实现</strong>&#x3D;&#x3D;</h5><ul>
<li>&#x3D;&#x3D;<strong>动态代理</strong>&#x3D;&#x3D;：在Java中，动态代理是一种设计模式，它&#x3D;&#x3D;允许在运行时创建代理类对象&#x3D;&#x3D;，而&#x3D;&#x3D;不需要在编译时明确指定代理类&#x3D;&#x3D;。动态代理可以拦截对目标对象的方法调用，并在调用前后进行增强处理（如添加日志、进行权限检查等）。</li>
<li>&#x3D;&#x3D;<strong>AOP实现</strong>&#x3D;&#x3D;：AOP技术通常通过动态代理来实现。也就是说，&#x3D;&#x3D;AOP框架会在运行时为目标对象创建一个代理对象&#x3D;&#x3D;，并在代理对象中加入&#x3D;&#x3D;切面逻辑&#x3D;&#x3D;（即横切关注点）。当客户端调用目标对象的方法时，&#x3D;&#x3D;实际上是调用了代理对象的方法&#x3D;&#x3D;，&#x3D;&#x3D;切面逻辑会在调用前后执行。&#x3D;&#x3D;</li>
</ul>
<h5 id="③Spring-AOP是Spring框架中的高级技术"><a href="#③Spring-AOP是Spring框架中的高级技术" class="headerlink" title="③Spring AOP是Spring框架中的高级技术"></a>③<strong>Spring AOP是Spring框架中的高级技术</strong></h5><ul>
<li><strong>Spring AOP</strong>：Spring AOP是Spring框架中的一个子模块，专门用于实现AOP功能。它通过在Spring容器中管理的Bean对象上应用动态代理，来实现对特定方法的增强。</li>
<li><strong>Bean对象管理</strong>：在Spring中，Bean对象是通过Spring容器来管理的。Spring AOP通过对这些Bean对象的生命周期进行干预（主要是通过代理机制），来对特定方法进行拦截和增强。</li>
<li><strong>动态代理机制</strong>：Spring AOP的底层实现主要依赖Java的动态代理（适用于接口）和CGLIB代理（适用于没有实现接口的类）。通过动态代理，Spring AOP能够在不修改原始业务逻辑代码的情况下，为Bean对象的某些方法添加切面逻辑。</li>
</ul>
<h5 id="④-对特定方法进行编程"><a href="#④-对特定方法进行编程" class="headerlink" title="④ 对特定方法进行编程"></a>④ <strong>对特定方法进行编程</strong></h5><ul>
<li><strong>方法增强</strong>：所谓对特定方法进行编程，指的是在某些特定的方法执行前、执行后，或者抛出异常时，添加额外的逻辑。这种增强是通过AOP切面来实现的，常见的增强操作包括日志记录、权限校验、事务处理等。</li>
</ul>
<h5 id="⑤总结"><a href="#⑤总结" class="headerlink" title="⑤总结"></a>⑤总结</h5><p>这段话的意思是，AOP（面向切面编程）是一种编程技术，它通过动态代理的方式，对对象的方法进行增强。Spring AOP是Spring框架中的一种高级技术，它利用动态代理机制，在管理Spring Bean对象的过程中，对特定方法进行编程，从而实现诸如日志、事务等横切关注点的集中管理。</p>
<h4 id="（3）AOP的依赖导入和编写步骤"><a href="#（3）AOP的依赖导入和编写步骤" class="headerlink" title="（3）AOP的依赖导入和编写步骤"></a>（3）AOP的依赖导入和编写步骤</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--AOP--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814173049841.png"></p>
<h5 id="案例代码"><a href="#案例代码" class="headerlink" title="&#x3D;&#x3D;案例代码&#x3D;&#x3D;"></a>&#x3D;&#x3D;案例代码&#x3D;&#x3D;</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 记录各个方法的执行耗时时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//将该类交给IOC容器管理</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//将该类表示为AOP类，（切面类）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span> </span><br><span class="line">    <span class="comment">//注解@Around用于设置针对的范围，后面的表达式称为切入点表达式</span></span><br><span class="line">    <span class="comment">//com.itheima.service，表示包名</span></span><br><span class="line">    <span class="comment">//第一个*表示任意类型的返回值，第二个*表示任意类名，第三个*表示任意方法名</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordTime</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//1.记录开始时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">beginTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//2.调用原始方法运行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> proceedingJoinPoint.proceed(); <span class="comment">//执行原始方法并获取返回值</span></span><br><span class="line">        <span class="comment">//3.记录结束时间，计算方法执行耗时</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        log.info(proceedingJoinPoint.getSignature()+<span class="string">&quot;执行耗时：&#123;&#125;ms&quot;</span>,endTime-beginTime);</span><br><span class="line">        <span class="keyword">return</span> object; <span class="comment">//返回原始方法的返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（4）AOP的使用场景和优势"><a href="#（4）AOP的使用场景和优势" class="headerlink" title="（4）AOP的使用场景和优势"></a>（4）AOP的使用场景和优势</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814174718026.png" alt="image-20240814174718026"></p>
<h3 id="2、AOP的核心概念"><a href="#2、AOP的核心概念" class="headerlink" title="2、AOP的核心概念"></a>2、AOP的核心概念</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814212123619.png" alt="image-20240814212123619"></p>
<h3 id="3、AOP的执行流程"><a href="#3、AOP的执行流程" class="headerlink" title="3、AOP的执行流程"></a>3、AOP的执行流程</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814212809219.png" alt="image-20240814212809219"></p>
<h3 id="4、AOP的进阶"><a href="#4、AOP的进阶" class="headerlink" title="4、AOP的进阶"></a>4、AOP的进阶</h3><h4 id="（1）通知类型"><a href="#（1）通知类型" class="headerlink" title="（1）通知类型"></a>（1）通知类型</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814214155231.png" alt="image-20240814214155231"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814214231960.png" alt="image-20240814214231960"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//切面类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.DeptService.*(..))&quot;)</span> <span class="comment">//提取相同的切入点表达式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &quot;<span class="doctag">@Before</span>：前置通知，此注解标注的通知方法在目标方法前被执行&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect Before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &quot;<span class="doctag">@Around</span>：环绕通知，此注解标注的通知方法在目标方法前、后都被执行&quot;</span></span><br><span class="line"><span class="comment">     * &quot; 注意事项:</span></span><br><span class="line"><span class="comment">     *  1.<span class="doctag">@Around</span>环绕通知需要自己调用ProceedingJoinPoint.proceed()来让原始方法执行,其他通知不需要考虑目标方法执行</span></span><br><span class="line"><span class="comment">     *  2.<span class="doctag">@Around</span>环绕通知方法的返回值,必须指定为object，来接收原始方法的返回值。&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect Around before ... &quot;</span>);</span><br><span class="line">        <span class="comment">//调用目标对象的原始方法执行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect Around after ... &quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &quot;<span class="doctag">@After</span>：后置通知，此注解标注的通知方法在目标方法后被执行，无论是否有异常都会执行&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect After ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &quot;<span class="doctag">@AfterReturning</span>：返回后通知，此注解标注的通知方法在目标方法后被执行，有异常不会执行&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect AfterReturning ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &quot;<span class="doctag">@AfterThrowing</span>：异常后通知，此注解标注的通知方法发生异常后执行&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;AOP MyAspect AfterThrowing ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="①五种通知类型的-内部执行顺序"><a href="#①五种通知类型的-内部执行顺序" class="headerlink" title="①五种通知类型的&#x3D;&#x3D;内部执行顺序&#x3D;&#x3D;"></a>①五种通知类型的&#x3D;&#x3D;内部执行顺序&#x3D;&#x3D;</h5><h6 id="前提：对同一个方法同时加入了五种不同的通知类型"><a href="#前提：对同一个方法同时加入了五种不同的通知类型" class="headerlink" title="前提：对同一个方法同时加入了五种不同的通知类型"></a>前提：对同一个方法同时加入了五种不同的通知类型</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814224259357.png" alt="image-20240814224259357"></p>
<h4 id="（2）通知顺序-Order-数字-注解"><a href="#（2）通知顺序-Order-数字-注解" class="headerlink" title="（2）通知顺序-&#x3D;&#x3D;@Order(数字)注解&#x3D;&#x3D;"></a>（2）通知顺序-&#x3D;&#x3D;@Order(数字)注解&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814220252662.png" alt="image-20240814220252662"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814220333588.png" alt="image-20240814220333588"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814220357439.png" alt="image-20240814220357439"></p>
<h4 id="（3）切入点表达式-Execution"><a href="#（3）切入点表达式-Execution" class="headerlink" title="（3）切入点表达式-&#x3D;&#x3D;Execution&#x3D;&#x3D;"></a>（3）切入点表达式-&#x3D;&#x3D;Execution&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814220711253.png" alt="image-20240814220711253"></p>
<h5 id="①切入点表达式-execution"><a href="#①切入点表达式-execution" class="headerlink" title="①切入点表达式-&#x3D;&#x3D;execution&#x3D;&#x3D;"></a>①切入点表达式-&#x3D;&#x3D;execution&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814220804255.png" alt="image-20240814220804255"></p>
<h5 id="②通配符-和"><a href="#②通配符-和" class="headerlink" title="②通配符&#x3D;&#x3D;*和..&#x3D;&#x3D;"></a>②通配符&#x3D;&#x3D;*和..&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814221851073.png" alt="image-20240814221851073"></p>
<h5 id="③书写建议"><a href="#③书写建议" class="headerlink" title="③书写建议"></a>③书写建议</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814221907657.png" alt="image-20240814221907657"></p>
<h5 id="④例子"><a href="#④例子" class="headerlink" title="④例子"></a>④例子</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试切入点表达式-execution的写法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span> <span class="comment">//利用Order注解更改默认(依据类名)的顺序</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecutionTestAspect</span> &#123;</span><br><span class="line">    <span class="comment">//完整的切入点表达式,切入service包中的DeptService接口中的delete方法:</span></span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">       void delete(Integer id) throws Exception;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(public void com.itheima.service.DeptService.delete(java.lang.Integer) throws Exception)&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt_complete</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//利用或(||)，且(&amp;&amp;)，非(!)来组合比较复杂的切入点表达式</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.DeptService.list()) ||&quot; +</span></span><br><span class="line"><span class="meta">            &quot;execution(* com.itheima.service.DeptService.delete(java.lang.Integer)) &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt_combination</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt_complete()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test01</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;完整的切入点表达式(切入service包中的DeptService接口中的delete方法)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt_combination()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;利用或(||)，且(&amp;&amp;)，非(!)来组合比较复杂的切入点表达式&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814222130905.png" alt="image-20240814222130905"></p>
<h4 id="（4）切入点表达式-annotation-利用-注解标识"><a href="#（4）切入点表达式-annotation-利用-注解标识" class="headerlink" title="（4）切入点表达式-&#x3D;&#x3D;@annotation&#x3D;&#x3D;(利用&#x3D;&#x3D;注解标识&#x3D;&#x3D;)"></a>（4）切入点表达式-&#x3D;&#x3D;@annotation&#x3D;&#x3D;(利用&#x3D;&#x3D;注解标识&#x3D;&#x3D;)</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814225215992.png" alt="image-20240814225215992"></p>
<h5 id="①-编写注解-Test-Annotation"><a href="#①-编写注解-Test-Annotation" class="headerlink" title="①&#x3D;&#x3D;编写注解&#x3D;&#x3D;@Test_Annotation"></a>①&#x3D;&#x3D;编写注解&#x3D;&#x3D;@Test_Annotation</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 利用注解标识的方式，进行描述切入点表达式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">//让该Test_Annotation注解,仅在运行时生效</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span> <span class="comment">//表示该注解作用在方法上</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Test_Annotation &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="②给项目中的-方法标识注解-Test-Annotation"><a href="#②给项目中的-方法标识注解-Test-Annotation" class="headerlink" title="②给项目中的&#x3D;&#x3D;方法标识注解&#x3D;&#x3D;@Test_Annotation"></a>②给项目中的&#x3D;&#x3D;方法标识注解&#x3D;&#x3D;@Test_Annotation</h5><h6 id="注意-：-自定义注解-Test-Annotation，-必须添加到service的实现类的方法上，不能添加到service的接口方法上-。"><a href="#注意-：-自定义注解-Test-Annotation，-必须添加到service的实现类的方法上，不能添加到service的接口方法上-。" class="headerlink" title="&#x3D;&#x3D;注意&#x3D;&#x3D;：&#x3D;&#x3D;自定义注解&#x3D;&#x3D;@Test_Annotation，&#x3D;&#x3D;必须添加到service的实现类的方法上，不能添加到service的接口方法上&#x3D;&#x3D;。"></a>&#x3D;&#x3D;注意&#x3D;&#x3D;：&#x3D;&#x3D;自定义注解&#x3D;&#x3D;@Test_Annotation，&#x3D;&#x3D;必须添加到service的实现类的方法上，不能添加到service的接口方法上&#x3D;&#x3D;。</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span> <span class="comment">//IOC 控制反转：对象的创建控制权由程序自身转移到外部（容器），这种思想称为控制反转</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptMapper deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//注入DeptLogService的Bean对象</span></span><br><span class="line">    <span class="keyword">private</span> DeptLogService deptLogService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test_Annotation</span> <span class="comment">//添加注解Test_Annotation进行标识</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deptMapper.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="③-编写切面表达式"><a href="#③-编写切面表达式" class="headerlink" title="③&#x3D;&#x3D;编写切面表达式&#x3D;&#x3D;"></a>③&#x3D;&#x3D;编写切面表达式&#x3D;&#x3D;</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(0)</span> <span class="comment">//利用Order注解更改默认(依据类名)的顺序</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationTestAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.itheima.anno.Test_Annotation)&quot;)</span> <span class="comment">//利用@annotation注解去项目中寻找有被@Test_Annotation注解修饰的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;AnnotationTestAspect ... before...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="④测试类-测试"><a href="#④测试类-测试" class="headerlink" title="④测试类-测试"></a>④测试类-测试</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814231614060.png" alt="image-20240814231614060"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AspectTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAnnotationAspect</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        deptService.list();</span><br><span class="line">        System.out.println(<span class="string">&quot;正在运行testAnnotationAspect...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="⑤结果"><a href="#⑤结果" class="headerlink" title="⑤结果"></a>⑤结果</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814231807825.png" alt="image-20240814231807825"></p>
<h4 id="（5）连接点-JoinPoint"><a href="#（5）连接点-JoinPoint" class="headerlink" title="（5）连接点-&#x3D;&#x3D;JoinPoint&#x3D;&#x3D;"></a>（5）连接点-&#x3D;&#x3D;JoinPoint&#x3D;&#x3D;</h4><h5 id="①-Around通知"><a href="#①-Around通知" class="headerlink" title="①&#x3D;&#x3D;@Around通知&#x3D;&#x3D;"></a>①&#x3D;&#x3D;@Around通知&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814233424427.png" alt="image-20240814233424427"></p>
<h5 id="②其他四种通知"><a href="#②其他四种通知" class="headerlink" title="②其他四种通知"></a>②其他四种通知</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814233547372.png" alt="image-20240814233547372"></p>
<h5 id="③Code"><a href="#③Code" class="headerlink" title="③Code"></a>③Code</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//切面类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JoinPointTestAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.DeptService.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;JoinPointTestAspect ... before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;JoinPointTestAspect around before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 获取 目标对象的类名 .</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> joinPoint.getTarget().getClass().getName();</span><br><span class="line">        log.info(<span class="string">&quot;目标对象的类名:&#123;&#125;&quot;</span>, className);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 获取 目标方法的方法名 .</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> joinPoint.getSignature().getName();</span><br><span class="line">        log.info(<span class="string">&quot;目标方法的方法名: &#123;&#125;&quot;</span>,methodName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 获取 目标方法运行时传入的参数 .</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        log.info(<span class="string">&quot;目标方法运行时传入的参数: &#123;&#125;&quot;</span>, Arrays.toString(args));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 放行 目标方法执行 .</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> joinPoint.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 获取 目标方法运行的返回值 .</span></span><br><span class="line">        log.info(<span class="string">&quot;目标方法运行的返回值: &#123;&#125;&quot;</span>,result);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;MyAspect8 around after ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="（6）案例-操作日志"><a href="#（6）案例-操作日志" class="headerlink" title="（6）案例-&#x3D;&#x3D;操作日志&#x3D;&#x3D;"></a>（6）案例-&#x3D;&#x3D;操作日志&#x3D;&#x3D;</h4><h5 id="①案例背景"><a href="#①案例背景" class="headerlink" title="①案例背景"></a>①案例背景</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814233926336.png" alt="image-20240814233926336"></p>
<h5 id="②思路分析"><a href="#②思路分析" class="headerlink" title="②思路分析"></a>②思路分析</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240814234202690.png" alt="image-20240814234202690"></p>
<h5 id="③实现步骤"><a href="#③实现步骤" class="headerlink" title="③实现步骤"></a>③实现步骤</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815002920463.png" alt="image-20240815002920463"></p>
<h5 id="④Code"><a href="#④Code" class="headerlink" title="④Code"></a>④Code</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.itheima.anno.Log)&quot;)</span> <span class="comment">//提取切面表达式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request; <span class="comment">//注入请求对象</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OperateLogMapper operateLogMapper; <span class="comment">//注入OperateLogMapper</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 要求：将项目中的增、删、改相关接口的操作日志记录到数据库表中。</span></span><br><span class="line"><span class="comment">     * 日志信息包含：操作人、操作时间、执行方法的全类名、执行方法名、方法运行时参数、返回值、方法执行时长</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proceedingJoinPoint</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span> <span class="comment">//设置通知的类型为Around</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordLogMsg</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//1.操作人ID - 当前登录员工ID</span></span><br><span class="line">        <span class="comment">//获取请求头中携带的jwt令牌, 解析令牌，获取员工ID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtils.parseJWT(jwt);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">operateUserId</span> <span class="operator">=</span> (Integer) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.获取操作时间</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">operateTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.操作类名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> proceedingJoinPoint.getTarget().getClass().getName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.操作方法名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> proceedingJoinPoint.getSignature().getName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.操作方法参数</span></span><br><span class="line">        Object[] args = proceedingJoinPoint.getArgs();</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodParams</span> <span class="operator">=</span> Arrays.toString(args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.记录方法的开始执行时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//调用原始目标方法运行</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.记录方法的结束时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//7.记录方法返回值，把将要响应的JSON数据转为字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">returnValue</span> <span class="operator">=</span> JSONObject.toJSONString(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.统计操作耗时</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">costTime</span> <span class="operator">=</span> end - begin;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//记录操作日志</span></span><br><span class="line">        <span class="type">OperateLog</span> <span class="variable">operateLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperateLog</span>(<span class="literal">null</span>, operateUserId, operateTime,</span><br><span class="line">                className, methodName, methodParams, returnValue, costTime);</span><br><span class="line">        operateLogMapper.insert(operateLog); <span class="comment">//添加进日志表操作中</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;AOP记录操作日志: &#123;&#125;&quot;</span>, operateLog);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result; <span class="comment">//返回方法执行的结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="十、SpringBoot原理篇"><a href="#十、SpringBoot原理篇" class="headerlink" title="十、SpringBoot原理篇"></a>十、SpringBoot原理篇</h2><h3 id="1、配置优先级"><a href="#1、配置优先级" class="headerlink" title="1、配置优先级"></a>1、配置优先级</h3><h4 id="（1）properties，yml，yaml三种配置文件优先级"><a href="#（1）properties，yml，yaml三种配置文件优先级" class="headerlink" title="（1）properties，yml，yaml三种配置文件优先级"></a>（1）properties，yml，yaml三种配置文件优先级</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815112451146.png" alt="image-20240815112451146"></p>
<h4 id="（2）-Java系统属性-和-命令行参数-的优先级"><a href="#（2）-Java系统属性-和-命令行参数-的优先级" class="headerlink" title="（2）&#x3D;&#x3D;Java系统属性&#x3D;&#x3D;和&#x3D;&#x3D;命令行参数&#x3D;&#x3D;的优先级"></a>（2）&#x3D;&#x3D;Java系统属性&#x3D;&#x3D;和&#x3D;&#x3D;命令行参数&#x3D;&#x3D;的优先级</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815113433895.png" alt="image-20240815113433895"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815113238030.png" alt="image-20240815113238030"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815113058245.png" alt="image-20240815113058245"></p>
<h4 id="（3）项目打包后如何配置项目属性-java属性和命令行参数"><a href="#（3）项目打包后如何配置项目属性-java属性和命令行参数" class="headerlink" title="（3）项目打包后如何配置项目属性(java属性和命令行参数)"></a>（3）项目打包后如何配置项目属性(java属性和命令行参数)</h4><h6 id="spring-boot-maven-plugin插件"><a href="#spring-boot-maven-plugin插件" class="headerlink" title="spring-boot-maven-plugin插件"></a>spring-boot-maven-plugin插件</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815113702871.png" alt="image-20240815113702871"></p>
<h5 id="①打包-jar"><a href="#①打包-jar" class="headerlink" title="①打包-jar"></a>①打包-jar</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815113928647.png" alt="image-20240815113928647"></p>
<h5 id="②-target目录-寻找打包好的jar包"><a href="#②-target目录-寻找打包好的jar包" class="headerlink" title="②&#x3D;&#x3D;target目录&#x3D;&#x3D;寻找打包好的jar包"></a>②&#x3D;&#x3D;target目录&#x3D;&#x3D;寻找打包好的jar包</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815114025484.png" alt="image-20240815114025484"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815114152947.png" alt="image-20240815114152947"></p>
<h5 id="③进入cmd-配置java系统属性-options-和命令行参数-args"><a href="#③进入cmd-配置java系统属性-options-和命令行参数-args" class="headerlink" title="③进入cmd-配置java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)和命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)"></a>③进入cmd-配置java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)和命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815114337674.png" alt="image-20240815114337674"></p>
<h5 id="④默认端口8080"><a href="#④默认端口8080" class="headerlink" title="④默认端口8080"></a>④默认端口8080</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815114720914.png" alt="image-20240815114720914"></p>
<h5 id="⑤命令行参数-args-的优先级高于java系统属性-options"><a href="#⑤命令行参数-args-的优先级高于java系统属性-options" class="headerlink" title="⑤命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)的优先级高于java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)"></a>⑤命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)的优先级高于java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815114910323.png" alt="image-20240815114910323"></p>
<h3 id="2、Bean对象的管理"><a href="#2、Bean对象的管理" class="headerlink" title="2、Bean对象的管理"></a>2、Bean对象的管理</h3><h4 id="（1）从IOC容器中-获取bean对象"><a href="#（1）从IOC容器中-获取bean对象" class="headerlink" title="（1）从IOC容器中&#x3D;&#x3D;获取bean对象&#x3D;&#x3D;"></a>（1）从IOC容器中&#x3D;&#x3D;获取bean对象&#x3D;&#x3D;</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815142013771.png"/>

<h6 id="手动利用-IOC容器对象-ApplicationContext-获取其中指定的bean对象"><a href="#手动利用-IOC容器对象-ApplicationContext-获取其中指定的bean对象" class="headerlink" title="手动利用&#x3D;&#x3D;IOC容器对象(ApplicationContext)&#x3D;&#x3D;,获取其中指定的bean对象"></a>手动利用&#x3D;&#x3D;IOC容器对象(ApplicationContext)&#x3D;&#x3D;,获取其中指定的bean对象</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 手动利用IOC容器对象(ApplicationContext),获取其中指定的bean对象</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetBeanTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext; <span class="comment">//获取IOC容器对象</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetBean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//根据IOC容器中bean的名称获取</span></span><br><span class="line">        <span class="type">DeptController</span> <span class="variable">deptController01</span> <span class="operator">=</span> (DeptController) applicationContext.getBean(<span class="string">&quot;deptController&quot;</span>);</span><br><span class="line">        System.out.println(deptController01);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据IOC容器中bean的类型获取</span></span><br><span class="line">        <span class="type">DeptController</span> <span class="variable">deptController02</span> <span class="operator">=</span> (DeptController) applicationContext.getBean(DeptController.class);</span><br><span class="line">        System.out.println(deptController02);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据IOC容器中bean的 名称 及 类型 获取</span></span><br><span class="line">        <span class="type">DeptController</span> <span class="variable">deptController03</span> <span class="operator">=</span> (DeptController) applicationContext.getBean(<span class="string">&quot;deptController&quot;</span>,DeptController.class);</span><br><span class="line">        System.out.println(deptController03);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815144942307.png" alt="image-20240815144942307"></p>
<h4 id="（2）Bean的作用域"><a href="#（2）Bean的作用域" class="headerlink" title="（2）Bean的作用域"></a>（2）Bean的作用域</h4><h5 id="①五种作用域"><a href="#①五种作用域" class="headerlink" title="①五种作用域"></a>①五种作用域</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815145141390.png" alt="image-20240815145141390"></p>
<h5 id="②-Scope-和-Lazy-注解"><a href="#②-Scope-和-Lazy-注解" class="headerlink" title="②&#x3D;&#x3D;@Scope&#x3D;&#x3D;和&#x3D;&#x3D;@Lazy&#x3D;&#x3D;注解"></a>②&#x3D;&#x3D;@Scope&#x3D;&#x3D;和&#x3D;&#x3D;@Lazy&#x3D;&#x3D;注解</h5><h6 id="1）-Scope注解可用来配置IOC容器中Bean的作用域"><a href="#1）-Scope注解可用来配置IOC容器中Bean的作用域" class="headerlink" title="1）@Scope注解可用来配置IOC容器中Bean的作用域"></a>1）@Scope注解可用来配置IOC容器中Bean的作用域</h6><h6 id="2）由于默认的-singleton-的bean，是在-spring启动时-IOC容器启动时-被创建的-，可使用-Lazy注解来延迟初始化-延迟到第一次使用时才被创建"><a href="#2）由于默认的-singleton-的bean，是在-spring启动时-IOC容器启动时-被创建的-，可使用-Lazy注解来延迟初始化-延迟到第一次使用时才被创建" class="headerlink" title="2）由于默认的&#x3D;&#x3D;singleton&#x3D;&#x3D;的bean，是在&#x3D;&#x3D;spring启动时(IOC容器启动时)被创建的&#x3D;&#x3D;，可使用&#x3D;&#x3D;@Lazy注解来延迟初始化(延迟到第一次使用时才被创建)&#x3D;&#x3D;"></a>2）由于默认的&#x3D;&#x3D;singleton&#x3D;&#x3D;的bean，是在&#x3D;&#x3D;spring启动时(IOC容器启动时)被创建的&#x3D;&#x3D;，可使用&#x3D;&#x3D;@Lazy注解来延迟初始化(延迟到第一次使用时才被创建)&#x3D;&#x3D;</h6><h6 id="3）-prototype-的bean，每一次使用该bean的时候都会创建一个新的实例。"><a href="#3）-prototype-的bean，每一次使用该bean的时候都会创建一个新的实例。" class="headerlink" title="3）&#x3D;&#x3D;prototype&#x3D;&#x3D;的bean，每一次使用该bean的时候都会创建一个新的实例。"></a>3）&#x3D;&#x3D;prototype&#x3D;&#x3D;的bean，每一次使用该bean的时候都会创建一个新的实例。</h6><h6 id="4）实际开发当中，-绝大部分的Bean是单例-的，也就是说绝大部分Bean不需要配置scope属性。"><a href="#4）实际开发当中，-绝大部分的Bean是单例-的，也就是说绝大部分Bean不需要配置scope属性。" class="headerlink" title="4）实际开发当中，&#x3D;&#x3D;绝大部分的Bean是单例&#x3D;&#x3D;的，也就是说绝大部分Bean不需要配置scope属性。"></a>4）实际开发当中，&#x3D;&#x3D;绝大部分的Bean是单例&#x3D;&#x3D;的，也就是说绝大部分Bean不需要配置scope属性。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815145524263.png" alt="image-20240815145524263"></p>
<h6 id="5）测试"><a href="#5）测试" class="headerlink" title="5）测试"></a>5）测试</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815150334535.png" alt="image-20240815150334535"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815150713844.png" alt="image-20240815150713844"></p>
<h4 id="（3）第三方Bean"><a href="#（3）第三方Bean" class="headerlink" title="（3）第三方Bean"></a>（3）第三方Bean</h4><h6 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815160931460.png" alt="image-20240815160931460"></p>
<h5 id="①四种-声明IOC控制反转的注解"><a href="#①四种-声明IOC控制反转的注解" class="headerlink" title="①四种&#x3D;&#x3D;声明IOC控制反转的注解&#x3D;&#x3D;"></a>①四种&#x3D;&#x3D;声明IOC控制反转的注解&#x3D;&#x3D;</h5><h6 id="Controller-Service-Repository注解，都是-基于-Component注解衍生而来-；其目的都是为了IOC控制反转，将该对象变成IOC容器中的bean对象便于之后直接注入使用该bean对象，避免了重复创建对象。"><a href="#Controller-Service-Repository注解，都是-基于-Component注解衍生而来-；其目的都是为了IOC控制反转，将该对象变成IOC容器中的bean对象便于之后直接注入使用该bean对象，避免了重复创建对象。" class="headerlink" title="@Controller,@Service,@Repository注解，都是&#x3D;&#x3D;基于@Component注解衍生而来&#x3D;&#x3D;；其目的都是为了IOC控制反转，将该对象变成IOC容器中的bean对象便于之后直接注入使用该bean对象，避免了重复创建对象。"></a>@Controller,@Service,@Repository注解，都是&#x3D;&#x3D;基于@Component注解衍生而来&#x3D;&#x3D;；其目的都是为了IOC控制反转，将该对象变成IOC容器中的bean对象便于之后直接注入使用该bean对象，避免了重复创建对象。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815151616361.png" alt="image-20240815151616361"></p>
<h5 id="②让-第三方的包中的对象-给IOC管理-成为Bean对象"><a href="#②让-第三方的包中的对象-给IOC管理-成为Bean对象" class="headerlink" title="②让&#x3D;&#x3D;第三方的包中的对象&#x3D;&#x3D;给IOC管理&#x3D;&#x3D;成为Bean对象&#x3D;&#x3D;"></a>②让&#x3D;&#x3D;第三方的包中的对象&#x3D;&#x3D;给IOC管理&#x3D;&#x3D;成为Bean对象&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815152624324.png" alt="image-20240815152624324"></p>
<h6 id="1、测试案例-第三方依赖-XML文件解析"><a href="#1、测试案例-第三方依赖-XML文件解析" class="headerlink" title="1、测试案例-第三方依赖(&#x3D;&#x3D;XML文件解析&#x3D;&#x3D;)"></a>1、测试案例-第三方依赖(&#x3D;&#x3D;XML文件解析&#x3D;&#x3D;)</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815153036437.png" alt="image-20240815153036437"></p>
<h6 id="2、-不使用依赖注入-多次调用，需要重复创建多个对象"><a href="#2、-不使用依赖注入-多次调用，需要重复创建多个对象" class="headerlink" title="2、&#x3D;&#x3D;不使用依赖注入&#x3D;&#x3D;-多次调用，需要重复创建多个对象"></a>2、&#x3D;&#x3D;不使用依赖注入&#x3D;&#x3D;-多次调用，需要重复创建多个对象</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815154618953.png" alt="image-20240815154618953"></p>
<h6 id="3-，如果第三方bean-需要依赖其它bean对象-，直接在bean定义方法中设置形参即可，容器会根据类型自动装配。"><a href="#3-，如果第三方bean-需要依赖其它bean对象-，直接在bean定义方法中设置形参即可，容器会根据类型自动装配。" class="headerlink" title="3.，如果第三方bean&#x3D;&#x3D;需要依赖其它bean对象&#x3D;&#x3D;，直接在bean定义方法中设置形参即可，容器会根据类型自动装配。"></a>3.，如果第三方bean&#x3D;&#x3D;需要依赖其它bean对象&#x3D;&#x3D;，直接在bean定义方法中设置形参即可，容器会根据类型自动装配。</h6><h6 id="该-对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数-，spring会-自动装配-对应的bean"><a href="#该-对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数-，spring会-自动装配-对应的bean" class="headerlink" title="该&#x3D;&#x3D;对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数&#x3D;&#x3D;，spring会&#x3D;&#x3D;自动装配&#x3D;&#x3D;对应的bean"></a>该&#x3D;&#x3D;对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数&#x3D;&#x3D;，spring会&#x3D;&#x3D;自动装配&#x3D;&#x3D;对应的bean</h6><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815155305309.png" alt="image-20240815155305309" style="zoom:50%;" />



<h6 id="4、在-spring启动类-声明为第三方bean-Bean"><a href="#4、在-spring启动类-声明为第三方bean-Bean" class="headerlink" title="4、在&#x3D;&#x3D;spring启动类&#x3D;&#x3D;声明为第三方bean-@Bean"></a>4、在&#x3D;&#x3D;spring启动类&#x3D;&#x3D;声明为第三方bean-@Bean</h6><p><strong>该&#x3D;&#x3D;对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数&#x3D;&#x3D;，spring会&#x3D;&#x3D;自动装配&#x3D;&#x3D;对应的bean</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815155305309.png" alt="image-20240815155305309"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ServletComponentScan</span> <span class="comment">//由于Filter是JavaWeb中的三大组件之一，并不是springboot的功能</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TliasWebManagementApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TliasWebManagementApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明第三方bean,不在spring的启动类中声明，而使用<span class="doctag">@Configuration</span>注解声明配置类,集中分类配置更好</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deptService</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//将当前方法的返回值对象交给IOC容器管理，成为IOC容器中的bean对象</span></span><br><span class="line">    <span class="comment">//通过@Bean注解的name/value属性指定bean名称，如果未指定，默认是方法名</span></span><br><span class="line">    <span class="keyword">public</span> SAXReader <span class="title function_">saxReader</span><span class="params">(DeptService deptService)</span> &#123;</span><br><span class="line">        <span class="comment">//该对象DeptService已经在Service层中声明为IOC容器中的bean对象，可直接作为参数，spring会自动装配对应的bean</span></span><br><span class="line">        deptService.list();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="5、使用-Configuration注解-声明配置类"><a href="#5、使用-Configuration注解-声明配置类" class="headerlink" title="5、使用&#x3D;&#x3D;@Configuration注解&#x3D;&#x3D;声明配置类"></a>5、使用&#x3D;&#x3D;@Configuration注解&#x3D;&#x3D;声明配置类</h6><h6 id="声明第三方bean-不在spring的启动类中声明-，而使用-Configuration-注解声明-配置类-集中分类配置更好"><a href="#声明第三方bean-不在spring的启动类中声明-，而使用-Configuration-注解声明-配置类-集中分类配置更好" class="headerlink" title="*声明第三方bean,&#x3D;&#x3D;不在spring的启动类中声明&#x3D;&#x3D;，而使用&#x3D;&#x3D;@Configuration&#x3D;&#x3D;注解声明&#x3D;&#x3D;配置类,&#x3D;&#x3D;集中分类配置更好"></a>*声明第三方bean,&#x3D;&#x3D;不在spring的启动类中声明&#x3D;&#x3D;，而使用&#x3D;&#x3D;@Configuration&#x3D;&#x3D;注解声明&#x3D;&#x3D;配置类,&#x3D;&#x3D;集中分类配置更好</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815160052329.png" alt="image-20240815160052329"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置类：将导入的第三方中的对象，交给IOC容器管理，成为bean对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明第三方bean,不在spring的启动类中声明，而使用<span class="doctag">@Configuration</span>注解声明配置类,集中分类配置更好</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deptService</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//将当前方法的返回值对象交给IOC容器管理，成为IOC容器中的bean对象</span></span><br><span class="line">    <span class="comment">//通过@Bean注解的name/value属性指定bean名称，如果未指定，默认是方法名</span></span><br><span class="line">    <span class="keyword">public</span> SAXReader <span class="title function_">saxReader</span><span class="params">(DeptService deptService)</span> &#123;</span><br><span class="line">        <span class="comment">//该对象DeptService已经在Service层中声明为IOC容器中的bean对象，</span></span><br><span class="line">        <span class="comment">// 可直接作为参数，spring会自动装配对应的bean</span></span><br><span class="line">        deptService.list();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="6、将第三方bean注入"><a href="#6、将第三方bean注入" class="headerlink" title="6、将第三方bean注入"></a>6、将第三方bean注入</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第三方bean的管理测试</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutSourceBeanTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SAXReader saxReader; <span class="comment">//将第三方bean注入</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第三方bean的管理测试</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testThirdBean</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//SAXReader saxReader = new SAXReader(); //不使用依赖注入，多次调用，需要重复创建多个对象</span></span><br><span class="line"></span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> saxReader.read(<span class="built_in">this</span>.getClass().getClassLoader().getResource(<span class="string">&quot;BeanTest.xml&quot;</span>));</span><br><span class="line">            <span class="type">Element</span> <span class="variable">rootElement</span> <span class="operator">=</span> document.getRootElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rootElement.element(<span class="string">&quot;name&quot;</span>).getText();</span><br><span class="line">            <span class="type">String</span> <span class="variable">age</span> <span class="operator">=</span> rootElement.element(<span class="string">&quot;age&quot;</span>).getText();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;第&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;次解析：&quot;</span>+name+<span class="string">&quot;:&quot;</span>+age);</span><br><span class="line">            System.out.println(<span class="string">&quot;SAXReader对象的地址：&quot;</span>+saxReader);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240815155533034.png" alt="image-20240815155533034" style="zoom:67%;" />





<h3 id="3、SpringBoot原理-起步依赖"><a href="#3、SpringBoot原理-起步依赖" class="headerlink" title="3、SpringBoot原理-&#x3D;&#x3D;起步依赖&#x3D;&#x3D;"></a>3、SpringBoot原理-&#x3D;&#x3D;起步依赖&#x3D;&#x3D;</h3><h4 id="（1）Spring-Framework与Spring-Boot区别"><a href="#（1）Spring-Framework与Spring-Boot区别" class="headerlink" title="（1）Spring Framework与Spring Boot区别"></a>（1）Spring Framework与Spring Boot区别</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816160529067.png" alt="image-20240816160529067"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816160803347.png" alt="image-20240816160803347"></p>
<h4 id="（2）SpringBoot的起步依赖原理-Maven的依赖传递"><a href="#（2）SpringBoot的起步依赖原理-Maven的依赖传递" class="headerlink" title="（2）SpringBoot的起步依赖原理-&#x3D;&#x3D;Maven的依赖传递&#x3D;&#x3D;"></a>（2）SpringBoot的起步依赖原理-&#x3D;&#x3D;Maven的依赖传递&#x3D;&#x3D;</h4><h6 id="1、如果不使用SpringBoot的起步依赖需要逐个导入进行web开发所需的依赖包，并且各个包直接还需要满足不同-版本之间的匹配和兼容的问题"><a href="#1、如果不使用SpringBoot的起步依赖需要逐个导入进行web开发所需的依赖包，并且各个包直接还需要满足不同-版本之间的匹配和兼容的问题" class="headerlink" title="1、如果不使用SpringBoot的起步依赖需要逐个导入进行web开发所需的依赖包，并且各个包直接还需要满足不同&#x3D;&#x3D;版本之间的匹配和兼容的问题&#x3D;&#x3D;"></a>1、如果不使用SpringBoot的起步依赖需要逐个导入进行web开发所需的依赖包，并且各个包直接还需要满足不同&#x3D;&#x3D;版本之间的匹配和兼容的问题&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816161318833.png" alt="image-20240816161318833"></p>
<h6 id="2、springBoot的起步依赖集成了web开发常见的依赖"><a href="#2、springBoot的起步依赖集成了web开发常见的依赖" class="headerlink" title="2、springBoot的起步依赖集成了web开发常见的依赖"></a>2、springBoot的起步依赖集成了web开发常见的依赖</h6><h6 id="3、通过Maven的-依赖传递-实现只需导入springboot的起步依赖即可"><a href="#3、通过Maven的-依赖传递-实现只需导入springboot的起步依赖即可" class="headerlink" title="3、通过Maven的&#x3D;&#x3D;依赖传递&#x3D;&#x3D;实现只需导入springboot的起步依赖即可"></a>3、通过Maven的&#x3D;&#x3D;依赖传递&#x3D;&#x3D;实现只需导入springboot的起步依赖即可</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816161651097.png" alt="image-20240816161651097"></p>
<h3 id="4、SpringBoot原理-自动配置"><a href="#4、SpringBoot原理-自动配置" class="headerlink" title="4、SpringBoot原理-&#x3D;&#x3D;自动配置&#x3D;&#x3D;"></a>4、SpringBoot原理-&#x3D;&#x3D;自动配置&#x3D;&#x3D;</h3><h4 id="（1）自动配置的概述和测试案例"><a href="#（1）自动配置的概述和测试案例" class="headerlink" title="（1）自动配置的概述和测试案例"></a>（1）自动配置的概述和测试案例</h4><h5 id="①概述-3"><a href="#①概述-3" class="headerlink" title="①概述"></a>①概述</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816162241054.png" alt="image-20240816162241054"></p>
<h5 id="②测试案例"><a href="#②测试案例" class="headerlink" title="②测试案例"></a>②测试案例</h5><h6 id="1、查看spring项目启动后IOC容器中的Bean对象"><a href="#1、查看spring项目启动后IOC容器中的Bean对象" class="headerlink" title="1、查看spring项目启动后IOC容器中的Bean对象"></a>1、查看spring项目启动后IOC容器中的Bean对象</h6><h6 id="Gson包-SpringBoot项目中-默认已经导入-，并已经成为了IOC容器的Bean对象"><a href="#Gson包-SpringBoot项目中-默认已经导入-，并已经成为了IOC容器的Bean对象" class="headerlink" title="&#x3D;&#x3D;Gson包&#x3D;&#x3D;SpringBoot项目中&#x3D;&#x3D;默认已经导入&#x3D;&#x3D;，并已经成为了IOC容器的Bean对象"></a>&#x3D;&#x3D;Gson包&#x3D;&#x3D;SpringBoot项目中&#x3D;&#x3D;默认已经导入&#x3D;&#x3D;，并已经成为了IOC容器的Bean对象</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816162658058.png" alt="image-20240816162658058"></p>
<h6 id="2、测试Code"><a href="#2、测试Code" class="headerlink" title="2、测试Code"></a>2、测试Code</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SpringBoot自动配置的测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConfigurationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Gson gson; <span class="comment">//依赖注入</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGson</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">gsonJson</span> <span class="operator">=</span> gson.toJson(Result.success());</span><br><span class="line">        System.out.println(gsonJson);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816163245102.png" alt="image-20240816163245102" style="zoom:80%;" />



<h6 id="3-配置类最终也是SpringIOC容器当中的一个bean对象"><a href="#3-配置类最终也是SpringIOC容器当中的一个bean对象" class="headerlink" title="3.&#x3D;&#x3D;配置类最终也是SpringIOC容器当中的一个bean对象&#x3D;&#x3D;"></a>3.&#x3D;&#x3D;配置类最终也是SpringIOC容器当中的一个bean对象&#x3D;&#x3D;</h6><p><strong>1、运行SpringBoot启动类，会看到有两个CommonConfig，在第一个CommonConfig类中定义了一个bean对象，bean对象的名字叫reader。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816165223681.png" alt="image-20240816165223681"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816165244646.png" alt="image-20240816165244646"></p>
<p><strong>2、在第二个CommonConfig中它的bean名字叫commonConfig，为什么还会有这样一个bean对象呢？原因是在CommonConfig配置类上添加了一个注解@Configuration，而@Configuration底层就是@Component</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816165317767.png" alt="image-20240816165317767" style="zoom:67%;" />



<p><strong>3、所以配置类最终也是SpringIOC容器当中的一个bean对象。</strong></p>
<h4 id="（2）自动配置的原理"><a href="#（2）自动配置的原理" class="headerlink" title="（2）自动配置的原理"></a>（2）自动配置的原理</h4><h5 id="①在SpringBoot项目-spring-boot-web-config2-工程中，通过坐标引入itheima-utils依赖"><a href="#①在SpringBoot项目-spring-boot-web-config2-工程中，通过坐标引入itheima-utils依赖" class="headerlink" title="①在SpringBoot项目 spring-boot-web-config2 工程中，通过坐标引入itheima-utils依赖"></a>①在SpringBoot项目 spring-boot-web-config2 工程中，通过坐标引入itheima-utils依赖</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816171657018.png" alt="image-20240816171657018"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816171801558.png" alt="image-20240816171801558" style="zoom:67%;" />

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenParser</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parse</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;TokenParser ... parse ...&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="②在测试类中，添加测试方法"><a href="#②在测试类中，添加测试方法" class="headerlink" title="②在测试类中，添加测试方法"></a>②在测试类中，添加测试方法</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConfigurationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTokenParse</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(applicationContext.getBean(TokenParser.class));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h5 id="③执行测试方法"><a href="#③执行测试方法" class="headerlink" title="③执行测试方法"></a>③执行测试方法</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816171919021.png" alt="image-20240816171919021"></p>
<h5 id="④-SpringBootApplication注解具有包扫描的作用"><a href="#④-SpringBootApplication注解具有包扫描的作用" class="headerlink" title="④@SpringBootApplication注解具有包扫描的作用"></a>④@SpringBootApplication注解具有包扫描的作用</h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816172339225.png" alt="image-20240816172339225" style="zoom: 67%;" />

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816172713906.png" alt="image-20240816172713906"></p>
<h6 id="1、思考：引入进来的第三方依赖当中的bean以及配置类为什么没有生效？"><a href="#1、思考：引入进来的第三方依赖当中的bean以及配置类为什么没有生效？" class="headerlink" title="1、思考：引入进来的第三方依赖当中的bean以及配置类为什么没有生效？"></a>1、思考：引入进来的第三方依赖当中的bean以及配置类为什么没有生效？</h6><p>原因在我们之前讲解IOC的时候有提到过，<strong>在类上添加@Component注解来声明bean对象时，还需要&#x3D;&#x3D;保证@Component注解能被Spring的组件扫描到&#x3D;&#x3D;。</strong>SpringBoot项目中的&#x3D;&#x3D;@SpringBootApplication注解&#x3D;&#x3D;，&#x3D;&#x3D;具有包扫描的作用&#x3D;&#x3D;，但是它只会扫描启动类所在的&#x3D;&#x3D;当前包以及子包&#x3D;&#x3D;。当前包：com.itheima， 第三方依赖中提供的包：com.example（扫描不到）那么如何解决以上问题的呢？</p>
<p><strong>方案1：&#x3D;&#x3D;@ComponentScan 组件扫描&#x3D;&#x3D;</strong></p>
<p><strong>方案2：&#x3D;&#x3D;@Import 导入（使用@Import导入的类会被Spring加载到IOC容器中）&#x3D;&#x3D;</strong></p>
<h5 id="⑤方案1：-ComponentScan-组件扫描"><a href="#⑤方案1：-ComponentScan-组件扫描" class="headerlink" title="⑤方案1：&#x3D;&#x3D;@ComponentScan 组件扫描&#x3D;&#x3D;"></a>⑤<strong>方案1：&#x3D;&#x3D;@ComponentScan 组件扫描&#x3D;&#x3D;</strong></h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816173055894.png" alt="image-20240816173055894"></p>
<p>大家可以想象一下，如果采用以上这种方式来完成自动配置，那我们进行项目开发时，当需要引入大量的第三方的依赖，就需要在启动类上配置N多要扫描的包，这种方式会很繁琐。而且这种大面积的扫描性能也比较低。</p>
<p>&#x3D;&#x3D;缺点&#x3D;&#x3D;：</p>
<p>1.使用繁琐</p>
<p>2.性能低</p>
<p><strong>结论：</strong>SpringBoot中并没有采用以上这种方案。</p>
<h5 id="⑥方案2：-Import-导入"><a href="#⑥方案2：-Import-导入" class="headerlink" title="⑥方案2：&#x3D;&#x3D;@Import 导入&#x3D;&#x3D;"></a>⑥<strong>方案2：&#x3D;&#x3D;@Import 导入&#x3D;&#x3D;</strong></h5><h6 id="使用-Import导入的类会被Spring加载到IOC容器中"><a href="#使用-Import导入的类会被Spring加载到IOC容器中" class="headerlink" title="使用@Import导入的类会被Spring加载到IOC容器中"></a><strong>使用@Import导入的类会被Spring加载到IOC容器中</strong></h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816182103051.png" alt="image-20240816182103051"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816180748557.png" alt="image-20240816180748557" style="zoom:80%;" />

<h6 id="1、第三方-待导入的依赖项目-项目结构"><a href="#1、第三方-待导入的依赖项目-项目结构" class="headerlink" title="1、第三方(待导入的依赖项目)-项目结构"></a>1、第三方(待导入的依赖项目)-项目结构</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816175012882.png" alt="image-20240816175012882"></p>
<h6 id="2、启动类上使用-Import注解进行导入-繁琐"><a href="#2、启动类上使用-Import注解进行导入-繁琐" class="headerlink" title="2、启动类上使用@Import注解进行导入(&#x3D;&#x3D;繁琐&#x3D;&#x3D;)"></a>2、启动类上使用@Import注解进行导入(&#x3D;&#x3D;繁琐&#x3D;&#x3D;)</h6><p><strong>1、HeaderParser普通类 (将要添加到IOC容器的Bean对象)。</strong></p>
<p><strong>2、配置类HeaderConfig，通过该类，可以 集中声明 需要添加到IOC容器成为Bean对象的类。</strong></p>
<p><strong>3、&#x3D;&#x3D;使用@Import导入ImportSelector接口实现类(MyImportSelector)&#x3D;&#x3D;，通过实现selectImports()方法即可，以数组的方式，&#x3D;&#x3D;指定多个&#x3D;&#x3D;要 添加到IOC容器Bean对象的&#x3D;&#x3D;全类名&#x3D;&#x3D;</strong>&#x3D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ServletComponentScan</span> <span class="comment">//由于Filter是JavaWeb中的三大组件之一，并不是springboot的功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@ComponentScan(&#123;&quot;com.example&quot;,&quot;com.itheima&quot;&#125;) //使用包扫描的方法，将依赖中声明的bean对象导入到IOC容器中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@Import(&#123;TokenParser.class&#125;) //导入普通类，交给Ioc容器管理，需逐一声明，繁琐</span></span><br><span class="line"><span class="comment">//@Import(&#123;HeaderConfig.class&#125;) //导入配置类，交给Ioc容器管理，包含多个普通类</span></span><br><span class="line"><span class="comment">//@Import(&#123;MyImportSelector.class&#125;) //导入ImportSelector接口实现类，利用数组指定多个全类名</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TliasWebManagementApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TliasWebManagementApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*    */</span><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明第三方bean,不在spring的启动类中声明，而使用<span class="doctag">@Configuration</span>注解声明配置类,集中分类配置更好</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deptService</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span><span class="comment">/*</span></span><br><span class="line"><span class="comment">    @Bean //将当前方法的返回值对象交给IOC容器管理，成为IOC容器中的bean对象</span></span><br><span class="line"><span class="comment">    //通过@Bean注解的name/value属性指定bean名称，如果未指定，默认是方法名</span></span><br><span class="line"><span class="comment">    public SAXReader saxReader(DeptService deptService) &#123;</span></span><br><span class="line"><span class="comment">        //该对象DeptService已经在Service层中声明为IOC容器中的bean对象，可直接作为参数，spring会自动装配对应的bean</span></span><br><span class="line"><span class="comment">        deptService.list();</span></span><br><span class="line"><span class="comment">        return new SAXReader();</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="3、启动类上使用-EnableXXX注解-进行导入-快捷-使用第三方依赖封装好的-Import"><a href="#3、启动类上使用-EnableXXX注解-进行导入-快捷-使用第三方依赖封装好的-Import" class="headerlink" title="3、启动类上使用&#x3D;&#x3D;@EnableXXX注解&#x3D;&#x3D;进行导入(&#x3D;&#x3D;快捷-使用第三方依赖封装好的@Import&#x3D;&#x3D;-)"></a>3、启动类上使用&#x3D;&#x3D;@EnableXXX注解&#x3D;&#x3D;进行导入(&#x3D;&#x3D;快捷-使用第三方依赖封装好的@Import&#x3D;&#x3D;-)</h6><p><strong>当其他开发者&#x3D;&#x3D;使用该依赖时&#x3D;&#x3D;，可以通过&#x3D;&#x3D;在启动类上添加EnableHeaderConfig注解&#x3D;&#x3D;，指定该依赖(也就是本项目)要导入哪些bean对象或配置类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 当其他开发者使用该依赖时，可以通过在启动类上添加EnableHeaderConfig注解，</span></span><br><span class="line"><span class="comment"> * 指定该依赖(也就是本项目)要导入哪些bean对象或配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Import(MyImportSelector.class)</span><span class="comment">//使用@Import注解，指定要导入哪些bean对象或配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableHeaderConfig &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ServletComponentScan</span> <span class="comment">//由于Filter是JavaWeb中的三大组件之一，并不是springboot的功能</span></span><br><span class="line"><span class="comment">//@ComponentScan(&#123;&quot;com.example&quot;,&quot;com.itheima&quot;&#125;) //使用包扫描的方法，将依赖中声明的bean对象导入到IOC容器中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@Import(&#123;TokenParser.class&#125;) //导入普通类，交给Ioc容器管理</span></span><br><span class="line"><span class="comment">//@Import(&#123;HeaderConfig.class&#125;) //导入配置类，交给Ioc容器管理</span></span><br><span class="line"><span class="comment">//@Import(&#123;MyImportSelector.class&#125;) //导入ImportSelector接口实现类</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableHeaderConfig</span> <span class="comment">//使用第三方依赖封装好的@Import</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TliasWebManagementApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TliasWebManagementApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="4、案例代码-EnableHeaderConfig类-注解类"><a href="#4、案例代码-EnableHeaderConfig类-注解类" class="headerlink" title="4、案例代码-EnableHeaderConfig类(&#x3D;&#x3D;注解类&#x3D;&#x3D;)"></a>4、案例代码-EnableHeaderConfig类(&#x3D;&#x3D;注解类&#x3D;&#x3D;)</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用<span class="doctag">@Import</span>导入ImportSelector接口实现类，</span></span><br><span class="line"><span class="comment"> * 通过实现selectImports()方法即可，以数组的方式，指定多个要 添加到IOC容器Bean对象的全类名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="comment">//返回值字符串数组（数组中封装了全限定名称的类）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;com.example.HeaderConfig&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="5、案例代码-HeaderConfig-配置类"><a href="#5、案例代码-HeaderConfig-配置类" class="headerlink" title="5、案例代码-HeaderConfig(&#x3D;&#x3D;配置类&#x3D;&#x3D;)"></a>5、案例代码-HeaderConfig(&#x3D;&#x3D;配置类&#x3D;&#x3D;)</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置类，通过该类，可以 集中声明 需要添加到IOC容器成为Bean对象的类。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HeaderGenerator <span class="title function_">headerGenerator</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderGenerator</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="6、案例代码-MyImportSelector-封装多个全类名"><a href="#6、案例代码-MyImportSelector-封装多个全类名" class="headerlink" title="6、案例代码-MyImportSelector(&#x3D;&#x3D;封装多个全类名&#x3D;&#x3D;)"></a>6、案例代码-MyImportSelector(&#x3D;&#x3D;封装多个全类名&#x3D;&#x3D;)</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用<span class="doctag">@Import</span>导入ImportSelector接口实现类，</span></span><br><span class="line"><span class="comment"> * 通过实现selectImports()方法即可，以数组的方式，指定多个要 添加到IOC容器Bean对象的全类名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="comment">//返回值字符串数组（数组中封装了全限定名称的类）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;com.example.HeaderConfig&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="7、案例代码-待添加的Bean类"><a href="#7、案例代码-待添加的Bean类" class="headerlink" title="7、案例代码-待添加的Bean类"></a>7、案例代码-待添加的Bean类</h6><p>(HeaderGenerator,HeaderParser,TokenParser)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">generator</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HeaderGenerator ... generator ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderParser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HeaderParser ... parse ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenParser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TokenParser ... parse ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="（3）自动配置-源码跟踪"><a href="#（3）自动配置-源码跟踪" class="headerlink" title="（3）自动配置-&#x3D;&#x3D;源码跟踪&#x3D;&#x3D;"></a>（3）自动配置-&#x3D;&#x3D;源码跟踪&#x3D;&#x3D;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816203607021.png" alt="image-20240816203607021"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816204002384.png" alt="image-20240816204002384"></p>
<h5 id="①启动类-注解-SpringBootApplication拆分"><a href="#①启动类-注解-SpringBootApplication拆分" class="headerlink" title="①启动类-&#x3D;&#x3D;注解@SpringBootApplication拆分&#x3D;&#x3D;"></a>①启动类-&#x3D;&#x3D;注解@SpringBootApplication拆分&#x3D;&#x3D;</h5><p>在@SpringBootApplication注解中包含了：</p>
<h6 id="1、元注解（不再解释）"><a href="#1、元注解（不再解释）" class="headerlink" title="1、元注解（不再解释）"></a>1、元注解（不再解释）</h6><h6 id="2、-SpringBootConfiguration-表示启动类是配置类"><a href="#2、-SpringBootConfiguration-表示启动类是配置类" class="headerlink" title="2、@SpringBootConfiguration(表示启动类是配置类)"></a>2、@SpringBootConfiguration(表示启动类是配置类)</h6><h6 id="3、-EnableAutoConfiguration-Enablek开头的注解"><a href="#3、-EnableAutoConfiguration-Enablek开头的注解" class="headerlink" title="3、@EnableAutoConfiguration(Enablek开头的注解)"></a>3、@EnableAutoConfiguration(Enablek开头的注解)</h6><h6 id="4、-ComponentScan-组件扫描的注解"><a href="#4、-ComponentScan-组件扫描的注解" class="headerlink" title="4、@ComponentScan(组件扫描的注解)"></a>4、@ComponentScan(组件扫描的注解)</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816194540884.png" alt="image-20240816194540884"></p>
<h5 id="②拆分1-注解-SpringBootConfiguration"><a href="#②拆分1-注解-SpringBootConfiguration" class="headerlink" title="②拆分1-注解&#x3D;&#x3D;@SpringBootConfiguration&#x3D;&#x3D;"></a>②拆分1-注解&#x3D;&#x3D;@SpringBootConfiguration&#x3D;&#x3D;</h5><h6 id="1、-SpringBootConfiguration注解上使用了-Configuration，表明springBoot启动类就是一个配置类。"><a href="#1、-SpringBootConfiguration注解上使用了-Configuration，表明springBoot启动类就是一个配置类。" class="headerlink" title="1、@SpringBootConfiguration注解上使用了@Configuration，表明springBoot启动类就是一个配置类。"></a>1、@SpringBootConfiguration注解上使用了@Configuration，表明springBoot启动类就是一个配置类。</h6><h6 id="2、-Indexed注解，是用来加速应用启动的（不用关心）。"><a href="#2、-Indexed注解，是用来加速应用启动的（不用关心）。" class="headerlink" title="2、@Indexed注解，是用来加速应用启动的（不用关心）。"></a>2、@Indexed注解，是用来加速应用启动的（不用关心）。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816194827598.png" alt="image-20240816194827598"></p>
<h5 id="③拆分2-注解-ComponentScan"><a href="#③拆分2-注解-ComponentScan" class="headerlink" title="③拆分2-注解&#x3D;&#x3D;@ComponentScan&#x3D;&#x3D;"></a>③拆分2-注解&#x3D;&#x3D;@ComponentScan&#x3D;&#x3D;</h5><h6 id="ComponentScan注解是用来进行组件扫描的，-扫描启动类所在的包及其子包-下所有被-Component及其衍生注解声明的类-。SpringBoot启动类，之所以-具备扫描包功能-，就是因为包含了-ComponentScan注解。"><a href="#ComponentScan注解是用来进行组件扫描的，-扫描启动类所在的包及其子包-下所有被-Component及其衍生注解声明的类-。SpringBoot启动类，之所以-具备扫描包功能-，就是因为包含了-ComponentScan注解。" class="headerlink" title="@ComponentScan注解是用来进行组件扫描的，&#x3D;&#x3D;扫描启动类所在的包及其子包&#x3D;&#x3D;下所有被&#x3D;&#x3D;@Component及其衍生注解声明的类&#x3D;&#x3D;。SpringBoot启动类，之所以&#x3D;&#x3D;具备扫描包功能&#x3D;&#x3D;，就是因为包含了@ComponentScan注解。"></a>@ComponentScan注解是用来进行组件扫描的，&#x3D;&#x3D;扫描启动类所在的包及其子包&#x3D;&#x3D;下所有被&#x3D;&#x3D;@Component及其衍生注解声明的类&#x3D;&#x3D;。SpringBoot启动类，之所以&#x3D;&#x3D;具备扫描包功能&#x3D;&#x3D;，就是因为包含了@ComponentScan注解。</h6><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816195007139.png"/>

<h5 id="④拆分3-自动配置核心注解-EnableAutoConfiguration"><a href="#④拆分3-自动配置核心注解-EnableAutoConfiguration" class="headerlink" title="④拆分3-&#x3D;&#x3D;自动配置核心注解@EnableAutoConfiguration&#x3D;&#x3D;"></a>④拆分3-&#x3D;&#x3D;自动配置核心注解@EnableAutoConfiguration&#x3D;&#x3D;</h5><h6 id="0、-EnableXXX开头-的注解，一般都-封装了-Import注解"><a href="#0、-EnableXXX开头-的注解，一般都-封装了-Import注解" class="headerlink" title="0、&#x3D;&#x3D;@EnableXXX开头&#x3D;&#x3D;的注解，一般都&#x3D;&#x3D;封装了@Import注解&#x3D;&#x3D;"></a>0、&#x3D;&#x3D;@EnableXXX开头&#x3D;&#x3D;的注解，一般都&#x3D;&#x3D;封装了@Import注解&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816195408028.png" alt="image-20240816195408028"></p>
<h6 id="1、使用-封装-Import注解-，-导入了实现ImportSelector接口的实现类-。-AutoConfigurationImportSelector类-是ImportSelector接口的实现类。"><a href="#1、使用-封装-Import注解-，-导入了实现ImportSelector接口的实现类-。-AutoConfigurationImportSelector类-是ImportSelector接口的实现类。" class="headerlink" title="1、使用(封装)&#x3D;&#x3D;@Import注解&#x3D;&#x3D;，&#x3D;&#x3D;导入了实现ImportSelector接口的实现类&#x3D;&#x3D;。&#x3D;&#x3D;AutoConfigurationImportSelector类&#x3D;&#x3D;是ImportSelector接口的实现类。"></a>1、使用(封装)&#x3D;&#x3D;@Import注解&#x3D;&#x3D;，&#x3D;&#x3D;导入了实现ImportSelector接口的实现类&#x3D;&#x3D;。&#x3D;&#x3D;AutoConfigurationImportSelector类&#x3D;&#x3D;是ImportSelector接口的实现类。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816195616046.png" alt="image-20240816195616046"></p>
<h6 id="2、AutoConfigurationImportSelector类中重写了ImportSelector接口的-selectImports-方法-："><a href="#2、AutoConfigurationImportSelector类中重写了ImportSelector接口的-selectImports-方法-：" class="headerlink" title="2、AutoConfigurationImportSelector类中重写了ImportSelector接口的&#x3D;&#x3D;selectImports()方法&#x3D;&#x3D;："></a>2、AutoConfigurationImportSelector类中重写了ImportSelector接口的&#x3D;&#x3D;selectImports()方法&#x3D;&#x3D;：</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816200134291.png" alt="image-20240816200134291"></p>
<h6 id="3、selectImports-方法底层调用-getAutoConfigurationEntry-方法-，-获取-可自动配置的-配置类信息集合"><a href="#3、selectImports-方法底层调用-getAutoConfigurationEntry-方法-，-获取-可自动配置的-配置类信息集合" class="headerlink" title="3、selectImports()方法底层调用&#x3D;&#x3D;getAutoConfigurationEntry()方法&#x3D;&#x3D;，&#x3D;&#x3D;获取&#x3D;&#x3D;可自动配置的&#x3D;&#x3D;配置类信息集合&#x3D;&#x3D;"></a>3、selectImports()方法底层调用&#x3D;&#x3D;getAutoConfigurationEntry()方法&#x3D;&#x3D;，&#x3D;&#x3D;获取&#x3D;&#x3D;可自动配置的&#x3D;&#x3D;配置类信息集合&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816195909985.png" alt="image-20240816195909985"></p>
<h6 id="4、调用-getCandidateConfigurations-annotationMetadata-attributes-方法-获取-在配置文件中配置的-所有自动配置类的集合"><a href="#4、调用-getCandidateConfigurations-annotationMetadata-attributes-方法-获取-在配置文件中配置的-所有自动配置类的集合" class="headerlink" title="4、调用&#x3D;&#x3D;getCandidateConfigurations&#x3D;&#x3D;(annotationMetadata, attributes)方法&#x3D;&#x3D;获取&#x3D;&#x3D;在配置文件中配置的&#x3D;&#x3D;所有自动配置类的集合&#x3D;&#x3D;"></a>4、调用&#x3D;&#x3D;getCandidateConfigurations&#x3D;&#x3D;(annotationMetadata, attributes)方法&#x3D;&#x3D;获取&#x3D;&#x3D;在配置文件中配置的&#x3D;&#x3D;所有自动配置类的集合&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816204106658.png" alt="image-20240816204106658"></p>
<p><strong>META-INF&#x2F;spring&#x2F;&#x3D;&#x3D;org.springframework.boot.autoconfigure.AutoConfiguration.imports文件&#x3D;&#x3D;和META-INF&#x2F;&#x3D;&#x3D;spring.factories文件&#x3D;&#x3D;这两个文件在哪里呢？</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816203226666.png" alt="image-20240816203226666" style="zoom:80%;" />

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816201108989.png" alt="image-20240816201108989"></p>
<p><strong>在前面在给大家演示自动配置的时候，我们&#x3D;&#x3D;直接&#x3D;&#x3D;在测试类当中&#x3D;&#x3D;注入&#x3D;&#x3D;了一个叫gson的bean对象，进行JSON格式转换。虽然我们没有配置bean对象，但是我们是可以直接注入使用的。原因就是因为&#x3D;&#x3D;在自动配置类当中做了自动配置&#x3D;&#x3D;。到底是在哪个自动配置类当中做的自动配置呢？我们通过搜索来查询一下。</strong></p>
<p><strong>在META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports配置文件中指定了&#x3D;&#x3D;第三方依赖Gson的配置类&#x3D;&#x3D;：&#x3D;&#x3D;GsonAutoConfiguration&#x3D;&#x3D;</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816201642802.png" alt="image-20240816201642802"></p>
<p><strong>在GsonAutoConfiguration类上，添加了注解&#x3D;&#x3D;@AutoConfiguration&#x3D;&#x3D;，通过查看源码，可以明确：GsonAutoConfiguration类是一个&#x3D;&#x3D;配置类&#x3D;&#x3D;。</strong></p>
<p><strong>原理就是在&#x3D;&#x3D;配置类中定义一个@Bean标识的方法&#x3D;&#x3D;，而&#x3D;&#x3D;Spring会自动调用配置类中使用@Bean标识的方法&#x3D;&#x3D;，&#x3D;&#x3D;并把方法的返回值注册到IOC容器中。&#x3D;&#x3D;</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816201858815.png" alt="image-20240816201858815"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816203453543.png" alt="image-20240816203453543" style="zoom:67%;" />

<h5 id="⑤自动配置-源码小结"><a href="#⑤自动配置-源码小结" class="headerlink" title="⑤自动配置-&#x3D;&#x3D;源码小结&#x3D;&#x3D;"></a>⑤自动配置-&#x3D;&#x3D;源码小结&#x3D;&#x3D;</h5><p><strong>自动配置原理源码入口就是@SpringBootApplication注解，在这个注解中封装了3个注解，分别是：</strong></p>
<h6 id="1、-SpringBootConfiguration-声明当前类是一个配置类"><a href="#1、-SpringBootConfiguration-声明当前类是一个配置类" class="headerlink" title="1、@SpringBootConfiguration-声明当前类是一个配置类"></a>1、@SpringBootConfiguration-声明当前类是一个配置类</h6><h6 id="2、-ComponentScan-进行组件扫描（SpringBoot中默认扫描的是启动类所在的当前包及其子包）"><a href="#2、-ComponentScan-进行组件扫描（SpringBoot中默认扫描的是启动类所在的当前包及其子包）" class="headerlink" title="2、@ComponentScan-进行组件扫描（SpringBoot中默认扫描的是启动类所在的当前包及其子包）"></a>2、@ComponentScan-进行组件扫描（SpringBoot中默认扫描的是启动类所在的当前包及其子包）</h6><h6 id="3、-EnableAutoConfiguration"><a href="#3、-EnableAutoConfiguration" class="headerlink" title="3、@EnableAutoConfiguration"></a>3、@EnableAutoConfiguration</h6><ul>
<li><p>封装了@Import注解（Import注解中指定了一个ImportSelector接口的实现类）</p>
</li>
<li><p>在实现类重写的selectImports()方法，读取当前项目下所有依赖jar包中&#x3D;&#x3D;META-INF&#x2F;spring.factories&#x3D;&#x3D;、&#x3D;&#x3D;META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports&#x3D;&#x3D;两个文件里面定义的配置类（配置类中定义了@Bean注解标识的方法）。</p>
</li>
</ul>
<h6 id="4、流程"><a href="#4、流程" class="headerlink" title="4、流程"></a>4、流程</h6><p>当SpringBoot程序启动时，就会加载&#x3D;&#x3D;配置文件当中所定义的配置类&#x3D;&#x3D;，并将这些配置类信息(类的全限定</p>
<p>名)&#x3D;&#x3D;封装到String类型的数组中&#x3D;&#x3D;，最终通过@Import注解将这些配置类全部加载到Spring的IOC容器</p>
<p>中，交给IOC容器管理。</p>
<h6 id="5、思考"><a href="#5、思考" class="headerlink" title="5、思考"></a>5、思考</h6><p>最后呢给大家抛出一个问题：在META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports文件中&#x3D;&#x3D;定义的配置类非常多&#x3D;&#x3D;，而且&#x3D;&#x3D;每个配置类中又可以定义很多的bean&#x3D;&#x3D;，那这些bean都会注册到Spring的IOC容器中吗？</p>
<p>答案：并不是。 在&#x3D;&#x3D;声明bean对象时&#x3D;&#x3D;，上面有加一个以&#x3D;&#x3D;@Conditional开头的注解&#x3D;&#x3D;，这种注解的</p>
<p>作用就是&#x3D;&#x3D;按照条件进行装配&#x3D;&#x3D;，只有满足条件之后，才会将bean注册到Spring的IOC容器中（下面</p>
<p>会详细来讲解）</p>
<h4 id="（4）自动配置-注解-Conditional-Bean的条件装配"><a href="#（4）自动配置-注解-Conditional-Bean的条件装配" class="headerlink" title="（4）自动配置-注解&#x3D;&#x3D;@Conditional(Bean的条件装配)&#x3D;&#x3D;"></a>（4）自动配置-注解&#x3D;&#x3D;@Conditional(Bean的条件装配)&#x3D;&#x3D;</h4><p> <img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816204454568.png" alt="image-20240816204454568"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816211829094.png" alt="image-20240816211829094"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816212553973.png" alt="image-20240816212553973"></p>
<h5 id="①-ConditionalOnClass注解"><a href="#①-ConditionalOnClass注解" class="headerlink" title="①&#x3D;&#x3D;@ConditionalOnClass注解&#x3D;&#x3D;"></a>①&#x3D;&#x3D;@ConditionalOnClass注解&#x3D;&#x3D;</h5><h6 id="1、配置类"><a href="#1、配置类" class="headerlink" title="1、配置类"></a>1、配置类</h6><p><strong>&#x3D;&#x3D;环境中存在指定的这个类，才会将该bean加入IOC容器&#x3D;&#x3D;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass(name=&quot;io.jsonwebtoken.Jwts&quot;)</span><span class="comment">//环境中存在指定的这个类，才会将该bean加入IOC容器</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">     &#125;</span><br><span class="line"><span class="comment">//省略其他代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2、查看pom-xml文件是否存在对应类的依赖"><a href="#2、查看pom-xml文件是否存在对应类的依赖" class="headerlink" title="2、查看pom.xml文件是否存在对应类的依赖"></a>2、查看pom.xml文件是否存在对应类的依赖</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816204929392.png" alt="image-20240816204929392"></p>
<h6 id="3、测试类"><a href="#3、测试类" class="headerlink" title="3、测试类"></a>3、测试类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConfigurationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testHeaderParser</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(applicationContext.getBean(HeaderParser.class));</span><br><span class="line">     &#125;</span><br><span class="line">	<span class="comment">//省略其他代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="4、结果"><a href="#4、结果" class="headerlink" title="4、结果"></a>4、结果</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816205031883.png" alt="image-20240816205031883"></p>
<h5 id="②-ConditionalOnMissingBean注解"><a href="#②-ConditionalOnMissingBean注解" class="headerlink" title="②&#x3D;&#x3D;@ConditionalOnMissingBean注解&#x3D;&#x3D;"></a>②&#x3D;&#x3D;@ConditionalOnMissingBean注解&#x3D;&#x3D;</h5><h6 id="1、ConditionalOnMissingBean"><a href="#1、ConditionalOnMissingBean" class="headerlink" title="1、ConditionalOnMissingBean"></a>1、ConditionalOnMissingBean</h6><p><strong>&#x3D;&#x3D;不存在该类型的bean，才会将该bean加入IOC容器&#x3D;&#x3D;</strong></p>
<h6 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h6><p>通常用来&#x3D;&#x3D;实现默认的Bean&#x3D;&#x3D;,如果你没有自己注册HeaderParser类的Bean到lOC容器中那么spring才会自动配置该类型的Bean到IOC容器中。如果你自己已经注册了HeaderParser类的Bean，那就用你注册的Bean。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816212459133.png" alt="image-20240816212459133"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span> <span class="comment">//不存在该类型的bean，才会将该bean加入IOC容器</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">//省略其他代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h6><p><strong>SpringBoot&#x3D;&#x3D;在调用@Bean标识的headerParser()前&#x3D;&#x3D;，IOC容器中是&#x3D;&#x3D;没有HeaderParser类型的bean&#x3D;&#x3D;，所以HeaderParser对象正常创建，并注册到IOC容器中。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816205314936.png" alt="image-20240816205314936"></p>
<h6 id="2、-ConditionalOnMissingBean-name-”deptController2”"><a href="#2、-ConditionalOnMissingBean-name-”deptController2”" class="headerlink" title="2、@ConditionalOnMissingBean&#x3D;&#x3D;(name&#x3D;”deptController2”)&#x3D;&#x3D;"></a>2、@ConditionalOnMissingBean&#x3D;&#x3D;(name&#x3D;”deptController2”)&#x3D;&#x3D;</h6><p><strong>&#x3D;&#x3D;不存在指定名称的bean，才会将该bean加入IOC容器&#x3D;&#x3D;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(name=&quot;deptController2&quot;)</span><span class="comment">//不存在指定名称的bean，才会将该bean加入IOC容器</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">//省略其他代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="测试结果-1"><a href="#测试结果-1" class="headerlink" title="测试结果"></a>测试结果</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816205700515.png" alt="image-20240816205700515"></p>
<h6 id="3、-ConditionalOnMissingBean-HeaderConfig-class"><a href="#3、-ConditionalOnMissingBean-HeaderConfig-class" class="headerlink" title="3、@ConditionalOnMissingBean&#x3D;&#x3D;(HeaderConfig.class)&#x3D;&#x3D;"></a>3、@ConditionalOnMissingBean&#x3D;&#x3D;(HeaderConfig.class)&#x3D;&#x3D;</h6><p><strong>&#x3D;&#x3D;不存在指定类型的bean，才会将bean加入IOC容器&#x3D;&#x3D;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(HeaderConfig.class)</span><span class="comment">//不存在指定类型的bean，才会将bean加入IOC容器</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">//省略其他代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816210021751.png" alt="image-20240816210021751" style="zoom: 50%;" />

<h6 id="测试结果-2"><a href="#测试结果-2" class="headerlink" title="测试结果"></a>测试结果</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816210130654.png" alt="image-20240816210130654"></p>
<h5 id="③-ConditionalOnProperty注解"><a href="#③-ConditionalOnProperty注解" class="headerlink" title="③&#x3D;&#x3D;@ConditionalOnProperty注解&#x3D;&#x3D;"></a>③&#x3D;&#x3D;@ConditionalOnProperty注解&#x3D;&#x3D;</h5><h6 id="1、-ConditionalOnProperty这个注解和-配置文件当中配置的属性-有关系"><a href="#1、-ConditionalOnProperty这个注解和-配置文件当中配置的属性-有关系" class="headerlink" title="1、@ConditionalOnProperty这个注解和&#x3D;&#x3D;配置文件当中配置的属性&#x3D;&#x3D;有关系"></a>1、@ConditionalOnProperty这个注解和&#x3D;&#x3D;配置文件当中配置的属性&#x3D;&#x3D;有关系</h6><h6 id="2、先在application-yml配置文件中添加如下的键值对："><a href="#2、先在application-yml配置文件中添加如下的键值对：" class="headerlink" title="2、先在application.yml配置文件中添加如下的键值对："></a>2、先在application.yml配置文件中添加如下的键值对：</h6><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816211939293.png" alt="image-20240816211939293" style="zoom: 50%;" />

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">name:itheima</span></span><br></pre></td></tr></table></figure>

<h6 id="3、在声明bean的时候就可以指定一个条件-ConditionalOnProperty"><a href="#3、在声明bean的时候就可以指定一个条件-ConditionalOnProperty" class="headerlink" title="3、在声明bean的时候就可以指定一个条件&#x3D;&#x3D;@ConditionalOnProperty&#x3D;&#x3D;"></a>3、在声明bean的时候就可以指定一个条件&#x3D;&#x3D;@ConditionalOnProperty&#x3D;&#x3D;</h6><h6 id="4、配置文件中存在指定属性名与值，才会将bean加入IOC容器"><a href="#4、配置文件中存在指定属性名与值，才会将bean加入IOC容器" class="headerlink" title="4、配置文件中存在指定属性名与值，才会将bean加入IOC容器"></a>4、配置文件中存在指定属性名与值，才会将bean加入IOC容器</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeaderConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnProperty(name =&quot;name&quot;,havingValue = &quot;itheima&quot;)</span><span class="comment">//配置文件中存在指定属性名与值，才会将bean加入IOC容器</span></span><br><span class="line">    <span class="keyword">public</span> HeaderParser <span class="title function_">headerParser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderParser</span>();</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HeaderGenerator <span class="title function_">headerGenerator</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeaderGenerator</span>();</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="④-案例-GsonAutoConfiguration"><a href="#④-案例-GsonAutoConfiguration" class="headerlink" title="④&#x3D;&#x3D;案例&#x3D;&#x3D;-GsonAutoConfiguration"></a>④&#x3D;&#x3D;案例&#x3D;&#x3D;-GsonAutoConfiguration</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816210753867.png" alt="image-20240816210753867"></p>
<h4 id="（5）小结"><a href="#（5）小结" class="headerlink" title="（5）小结"></a>（5）小结</h4><p><strong>自动配置的核心就在@SpringBootApplication注解上，SpringBootApplication这个注解底层包含了3个注解，分别是：</strong></p>
<p><strong>@SpringBootConfiguration</strong></p>
<p><strong>@ComponentScan</strong></p>
<p><strong>@EnableAutoConfiguration</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816212730454.png" alt="image-20240816212730454"></p>
<p>**&#x3D;&#x3D;@EnableAutoConfiguration&#x3D;&#x3D;**这个注解才是自动配置的核心。</p>
<ul>
<li>它&#x3D;&#x3D;封装了一个@Import注解&#x3D;&#x3D;，Import注解里面指定了一个&#x3D;&#x3D;ImportSelector接口的实现类&#x3D;&#x3D;。</li>
<li>在这个实现类中，重写了ImportSelector接口中的selectImports()方法。</li>
<li>而selectImports()方法中会去读取两份配置文件，并将配置文件中定义的配置类做为selectImports()方法的返回值返回，返回值代表的就是需要将哪些类交给Spring的IOC容器进行管理。</li>
<li>那么所有自动配置类的中声明的bean都会加载到Spring的IOC容器中吗? 其实并不会，因为这些配置类中在声明bean时，通常都会&#x3D;&#x3D;添加@Conditional开头的注解&#x3D;&#x3D;，这个注解就是&#x3D;&#x3D;进行条件装配&#x3D;&#x3D;。而Spring会根据Conditional注解有选择性的进行bean的创建。</li>
<li>@Enable 开头的注解底层，它就封装了一个注解 import 注解，它里面指定了一个类，是ImportSelector 接口的实现类。在实现类当中，我们需要去实现 ImportSelector 接口当中的一个方法 selectImports 这个方法。这个方法的返回值代表的就是我需要将哪些类交给 spring 的 IOC容器进行管理。</li>
<li>此时它会去读取两份配置文件，一份儿是 &#x3D;&#x3D;spring.factories&#x3D;&#x3D;，另外一份儿是&#x3D;&#x3D;autoConfiguration.imports&#x3D;&#x3D;。而在 autoConfiguration.imports 这份儿文件当中，它就会去&#x3D;&#x3D;配置大量的自动配置的类&#x3D;&#x3D;。</li>
<li>而前面我们也提到过这些所有的自动配置类当中，所有的 bean都会加载到 spring 的IOC 容器当中吗？其实并不会，因为这些配置类当中，在声明 bean 的时候，通常会加上这么一类@Conditional 开头的注解。这个注解就是进行条件装配。所以SpringBoot非常的智能，它会根据 @Conditional 注解来进行条件装配。只有条件成立，它才会声明这个bean，才会将这个 bean 交给 IOC 容器管理。</li>
</ul>
<h4 id="（6）案例-自定义Starter"><a href="#（6）案例-自定义Starter" class="headerlink" title="（6）案例-自定义Starter"></a>（6）案例-自定义Starter</h4><h5 id="①场景"><a href="#①场景" class="headerlink" title="①场景"></a>①场景</h5><h6 id="1、spring官方命名规范一般是：spring-boot-starter-xxx-2-7-x"><a href="#1、spring官方命名规范一般是：spring-boot-starter-xxx-2-7-x" class="headerlink" title="1、spring官方命名规范一般是：spring-boot-starter-xxx:2.7.x"></a>1、spring官方命名规范一般是：spring-boot-starter-xxx:2.7.x</h6><h6 id="2、其他依赖则是：mybatis-spring-boot-starter-2-2-x"><a href="#2、其他依赖则是：mybatis-spring-boot-starter-2-2-x" class="headerlink" title="2、其他依赖则是：mybatis-spring-boot-starter:2.2.x"></a>2、其他依赖则是：mybatis-spring-boot-starter:2.2.x</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816215947581.png" alt="image-20240816215947581"></p>
<h6 id="3、由于有依赖传递并且依赖管理功能包含了自动配置管理所以-只需导入-具有依赖管理功能的-依赖包xxx-starter-即可"><a href="#3、由于有依赖传递并且依赖管理功能包含了自动配置管理所以-只需导入-具有依赖管理功能的-依赖包xxx-starter-即可" class="headerlink" title="3、由于有依赖传递并且依赖管理功能包含了自动配置管理所以&#x3D;&#x3D;只需导入&#x3D;&#x3D;具有依赖管理功能的&#x3D;&#x3D;依赖包xxx-starter&#x3D;&#x3D;即可"></a>3、由于有依赖传递并且依赖管理功能包含了自动配置管理所以&#x3D;&#x3D;只需导入&#x3D;&#x3D;具有依赖管理功能的&#x3D;&#x3D;依赖包xxx-starter&#x3D;&#x3D;即可</h6><h6 id="4、-业务场景-："><a href="#4、-业务场景-：" class="headerlink" title="4、&#x3D;&#x3D;业务场景&#x3D;&#x3D;："></a>4、&#x3D;&#x3D;业务场景&#x3D;&#x3D;：</h6><ul>
<li><p>我们前面案例当中所使用的阿里云OSS对象存储服务，现在阿里云的官方是没有给我们提供</p>
<p>对应的起步依赖的，这个时候使用起来就会比较繁琐，我们需要引入对应的依赖。</p>
<p>我们还需要在配置文件当中进行配置，还需要基于官方SDK示例来改造对应的工具类，</p>
<p>我们在项目当中才可以进行使用。</p>
</li>
<li><p>大家想在我们当前项目当中使用了阿里云OSS，我们需要进行这么多步的操作。在别的项目组当中</p>
<p>要想使用阿里云OSS，是不是也需要进行这么多步的操作，所以这个时候我们就可以自定义一些公共组件，</p>
<p>在这些公共组件当中，我就可以提前把需要配置的bean都提前配置好。将来在项目当中，我要想使用这个技术，</p>
<p>我直接将组件对应的坐标直接引入进来，就已经自动配置好了，就可以直接使用了。</p>
<p>我们也可以把公共组件提供给别的项目组进行使用，这样就可以大大的简化我们的开发。</p>
</li>
</ul>
<p>在SpringBoot项目中，一般都会将这些公共组件封装为SpringBoot当中的starter，也就是我们所</p>
<p>说的起步依赖。</p>
<h6 id="5、-自定义starter"><a href="#5、-自定义starter" class="headerlink" title="5、&#x3D;&#x3D;自定义starter&#x3D;&#x3D;"></a>5、&#x3D;&#x3D;自定义starter&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816213857144.png" alt="image-20240816213857144"></p>
<h6 id="6、定义配置文件"><a href="#6、定义配置文件" class="headerlink" title="6、定义配置文件"></a>6、定义配置文件</h6><p><strong>Mybatis提供了配置类，并且也提供了springboot会自动读取的配置文件。当SpringBoot项目启动时，会&#x3D;&#x3D;读取到spring.factories配置文件中的配置类并加载配置类&#x3D;&#x3D;，生成相关bean对象注册到IOC容器中。</strong></p>
<p><strong>结果：我们可以直接在SpringBoot程序中使用Mybatis自动配置的bean对象。</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816220259407.png" alt="image-20240816220259407" style="zoom:80%;" />

<h6 id="7、定义两个模块"><a href="#7、定义两个模块" class="headerlink" title="7、定义两个模块"></a>7、定义两个模块</h6><p><strong>在自定义一个起步依赖starter的时候，按照规范需要定义两个模块：</strong></p>
<ol>
<li><strong>starter模块（进行依赖管理[把程序开发所需要的依赖都定义在starter起步依赖中]）</strong></li>
<li><strong>autoconfigure模块（自动配置）</strong></li>
</ol>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816214243352.png" alt="image-20240816214243352"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816214708503.png" alt="image-20240816214708503"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816215146984.png" alt="image-20240816215146984"></p>
<h5 id="②需求"><a href="#②需求" class="headerlink" title="②需求"></a>②需求</h5><h6 id="1、-自定义aliyun-oss-spring-boot-starter-，完成阿里云OSS操作工具类AliyunOSSUtils的-自动配置-。"><a href="#1、-自定义aliyun-oss-spring-boot-starter-，完成阿里云OSS操作工具类AliyunOSSUtils的-自动配置-。" class="headerlink" title="1、&#x3D;&#x3D;自定义aliyun-oss-spring-boot-starter&#x3D;&#x3D;，完成阿里云OSS操作工具类AliyunOSSUtils的&#x3D;&#x3D;自动配置&#x3D;&#x3D;。"></a>1、&#x3D;&#x3D;自定义aliyun-oss-spring-boot-starter&#x3D;&#x3D;，完成阿里云OSS操作工具类AliyunOSSUtils的&#x3D;&#x3D;自动配置&#x3D;&#x3D;。</h6><h6 id="2、-目标-：引入起步依赖引入之后，要想使用阿里云OSS，-注入AliyunOSSUtils直接使用即可"><a href="#2、-目标-：引入起步依赖引入之后，要想使用阿里云OSS，-注入AliyunOSSUtils直接使用即可" class="headerlink" title="2、&#x3D;&#x3D;目标&#x3D;&#x3D;：引入起步依赖引入之后，要想使用阿里云OSS，&#x3D;&#x3D;注入AliyunOSSUtils直接使用即可&#x3D;&#x3D;"></a>2、&#x3D;&#x3D;目标&#x3D;&#x3D;：引入起步依赖引入之后，要想使用阿里云OSS，&#x3D;&#x3D;注入AliyunOSSUtils直接使用即可&#x3D;&#x3D;</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816215621802.png" alt="image-20240816215621802"></p>
<h5 id="③阿里云OSS具体使用-正常使用未配置"><a href="#③阿里云OSS具体使用-正常使用未配置" class="headerlink" title="③阿里云OSS具体使用(正常使用未配置)"></a>③阿里云OSS具体使用(正常使用未配置)</h5><h6 id="1、配置文件"><a href="#1、配置文件" class="headerlink" title="1、配置文件"></a>1、配置文件</h6><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#阿里云OSS配置</span></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">https://oss-cn-hangzhou.aliyuncs.com</span></span><br><span class="line">    <span class="attr">accessKeyId:</span> <span class="string">LTAI4GCH1vX6DKqJWxd6nEuW</span></span><br><span class="line">    <span class="attr">accessKeySecret:</span> <span class="string">yBshYweHOpqDuhCArrVHwIiBKpyqSL</span></span><br><span class="line">    <span class="attr">bucketName:</span> <span class="string">web-tlias</span></span><br></pre></td></tr></table></figure>



<h6 id="2、AliOSSProperties类"><a href="#2、AliOSSProperties类" class="headerlink" title="2、AliOSSProperties类"></a>2、AliOSSProperties类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;aliyun.oss&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="3、AliOSSUtils工具类"><a href="#3、AliOSSUtils工具类" class="headerlink" title="3、AliOSSUtils工具类"></a>3、AliOSSUtils工具类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 阿里云 OSS 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*    // Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line"><span class="comment">    String endpoint = &quot;https://oss-cn-chengdu.aliyuncs.com&quot;;</span></span><br><span class="line"><span class="comment">    // 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line"><span class="comment">    String accessKeyId = &quot;LTAI5tH2N5MkrjPKxuemv8Sd&quot;;</span></span><br><span class="line"><span class="comment">    String accessKeySecret = &quot;4kr7BLZBAopplxYS4lnXux6Kt6surm&quot;;</span></span><br><span class="line"><span class="comment">    // 填写Bucket名称，例如examplebucket。</span></span><br><span class="line"><span class="comment">    String bucketName = &quot;springboot-web-tlias-test1&quot;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    // Endpoint以华东1（杭州）为例，其它Region请按实际情况填写。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.endpoint&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String endpoint ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.accessKeyId&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String accessKeyId ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.accessKeySecret&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String accessKeySecret ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 填写Bucket名称，例如examplebucket。</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;aliyun.oss.bucketName&#125;&quot;)</span></span><br><span class="line"><span class="comment">    String bucketName;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//依赖注入</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOSSProperties aliOSSProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取阿里云OSS参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> aliOSSProperties.getEndpoint();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> aliOSSProperties.getAccessKeyId();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> aliOSSProperties.getAccessKeySecret();</span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> aliOSSProperties.getBucketName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖,使用UUID重新命名文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件访问路径</span></span><br><span class="line">        <span class="comment">//https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">        <span class="comment">//-&gt; https://springboot-web-tlias-test1.oss-cn-chengdu.aliyuncs.com/test.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="④实现步骤"><a href="#④实现步骤" class="headerlink" title="④实现步骤"></a>④实现步骤</h5><p><strong>需求明确了，接下来我们再来分析一下具体的实现步骤：</strong></p>
<ul>
<li><p><strong>第1步：&#x3D;&#x3D;创建自定义starter模块&#x3D;&#x3D;（进行依赖管理）</strong></p>
<p><strong>把阿里云OSS&#x3D;&#x3D;所有的依赖统一管理起来&#x3D;&#x3D;</strong></p>
</li>
<li><p><strong>第2步：&#x3D;&#x3D;创建autoconfigure模块&#x3D;&#x3D;</strong></p>
<p><strong>在starter中引入autoconfigure （我们使用时只需要引入starter起步依赖即可）</strong></p>
</li>
<li><p><strong>第3步：&#x3D;&#x3D;在autoconfigure中完成自动配置&#x3D;&#x3D;</strong></p>
<p> <strong>1、定义一个&#x3D;&#x3D;自动配置类&#x3D;&#x3D;，在自动配置类中将&#x3D;&#x3D;所要配置的bean&#x3D;&#x3D;都提前配置好</strong></p>
<p> <strong>2、定义&#x3D;&#x3D;配置文件&#x3D;&#x3D;，把自动配置类的全类名定义在配置文件中</strong></p>
</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816215621802.png" alt="image-20240816215621802"></p>
<h5 id="⑤自定义starter-具体实现"><a href="#⑤自定义starter-具体实现" class="headerlink" title="⑤自定义starter-&#x3D;&#x3D;具体实现&#x3D;&#x3D;"></a>⑤自定义starter-&#x3D;&#x3D;具体实现&#x3D;&#x3D;</h5><h6 id="1-、aliyun-oss-spring-boot-starter模块"><a href="#1-、aliyun-oss-spring-boot-starter模块" class="headerlink" title="1.、aliyun-oss-spring-boot-starter模块"></a>1.、aliyun-oss-spring-boot-starter模块</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816235448788.png" alt="image-20240816235448788"></p>
<h6 id="2、创建完starter模块后，删除多余的文件，最终保留内容如下："><a href="#2、创建完starter模块后，删除多余的文件，最终保留内容如下：" class="headerlink" title="2、创建完starter模块后，删除多余的文件，最终保留内容如下："></a>2、创建完starter模块后，删除多余的文件，最终保留内容如下：</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816235530539.png" alt="image-20240816235530539"></p>
<h6 id="3、删除pom-xml文件中多余的内容后："><a href="#3、删除pom-xml文件中多余的内容后：" class="headerlink" title="3、删除pom.xml文件中多余的内容后："></a>3、删除pom.xml文件中多余的内容后：</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-oss-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="4、aliyun-oss-spring-boot-autoconfigure模块"><a href="#4、aliyun-oss-spring-boot-autoconfigure模块" class="headerlink" title="4、aliyun-oss-spring-boot-autoconfigure模块"></a>4、aliyun-oss-spring-boot-autoconfigure模块</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816235701209.png" alt="image-20240816235701209"></p>
<h6 id="5、创建完autoconfigure模块后，删除多余的文件，最终保留内容如下："><a href="#5、创建完autoconfigure模块后，删除多余的文件，最终保留内容如下：" class="headerlink" title="5、创建完autoconfigure模块后，删除多余的文件，最终保留内容如下："></a>5、创建完autoconfigure模块后，删除多余的文件，最终保留内容如下：</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816235714408.png" alt="image-20240816235714408"></p>
<h6 id="6、删除pom-xml文件中多余的内容后："><a href="#6、删除pom-xml文件中多余的内容后：" class="headerlink" title="6、删除pom.xml文件中多余的内容后："></a>6、删除pom.xml文件中多余的内容后：</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-oss-spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--springBoot web 开发起步依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--阿里云OSS--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="7、按照我们之前的分析，是需要在starter模块中来引入autoconfigure这个模块的。打开starter模块中的pom文件："><a href="#7、按照我们之前的分析，是需要在starter模块中来引入autoconfigure这个模块的。打开starter模块中的pom文件：" class="headerlink" title="7、按照我们之前的分析，是需要在starter模块中来引入autoconfigure这个模块的。打开starter模块中的pom文件："></a>7、按照我们之前的分析，是需要在starter模块中来引入autoconfigure这个模块的。打开starter模块中的pom文件：</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">3.3</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;aliyun-oss-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;url/&gt;</span><br><span class="line">    &lt;licenses&gt;</span><br><span class="line">        &lt;license/&gt;</span><br><span class="line">    &lt;/licenses&gt;</span><br><span class="line">    &lt;developers&gt;</span><br><span class="line">        &lt;developer/&gt;</span><br><span class="line">    &lt;/developers&gt;</span><br><span class="line">    &lt;scm&gt;</span><br><span class="line">        &lt;connection/&gt;</span><br><span class="line">        &lt;developerConnection/&gt;</span><br><span class="line">        &lt;tag/&gt;</span><br><span class="line">        &lt;url/&gt;</span><br><span class="line">    &lt;/scm&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;<span class="number">17</span>&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--引入autoconfigure模块--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;aliyun-oss-spring-boot-autoconfigure&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="8、在autoconfigure模块当中来完成自动配置操作。"><a href="#8、在autoconfigure模块当中来完成自动配置操作。" class="headerlink" title="8、在autoconfigure模块当中来完成自动配置操作。"></a>8、在autoconfigure模块当中来完成自动配置操作。</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240816235931272.png" alt="image-20240816235931272"></p>
<p><strong>拷贝阿里云OSS依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--阿里云OSS--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>现在大家思考下，在类上添加的@Component注解还有用吗？</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000033998.png" alt="image-20240817000033998"></p>
<p><strong>答案：没用了。 在SpringBoot项目中，并不会去扫描com.aliyun.oss这个包，不扫描这个包那类上的注解也就失去了作用</strong>。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000102374.png" alt="image-20240817000102374"></p>
<p><strong>下面我们就要定义一个自动配置类了，在自动配置类当中来声明AliOSSUtils的bean对象。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000126581.png" alt="image-20240817000126581"></p>
<h6 id="8、AliOSSAutoConfiguration类-EnableConfigurationProperties"><a href="#8、AliOSSAutoConfiguration类-EnableConfigurationProperties" class="headerlink" title="8、AliOSSAutoConfiguration类-&#x3D;&#x3D;@EnableConfigurationProperties&#x3D;&#x3D;"></a>8、AliOSSAutoConfiguration类-&#x3D;&#x3D;@EnableConfigurationProperties&#x3D;&#x3D;</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiaopeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//配置类</span></span><br><span class="line"><span class="comment">//由于需要设置阿里云相关的配置信息，所以需要将AliOSSProperties类声明到IOC容器中</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(AliOSSProperties.class)</span><span class="comment">//内部使用@Import注解将AliOSSProperties类导入到IOC容器中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//只有将AliOSSProperties类声明为Bean对象后，就能直接使用IOC容器中的所有bean对象</span></span><br><span class="line">    <span class="keyword">public</span> AliOSSUtils <span class="title function_">aliOSSUtils</span><span class="params">(AliOSSProperties aliOSSProperties)</span>&#123;</span><br><span class="line">        <span class="comment">//创建AliOSSUtils对象，并交给SpringIOC容器</span></span><br><span class="line">        <span class="type">AliOSSUtils</span> <span class="variable">aliOSSUtils</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AliOSSUtils</span>(); </span><br><span class="line">        <span class="comment">//由于需要设置阿里云相关的配置信息，所以需要将AliOSSProperties类声明到IOC容器中</span></span><br><span class="line">        aliOSSUtils.setAliOSSProperties(aliOSSProperties);</span><br><span class="line">        <span class="keyword">return</span> aliOSSUtils;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="9、AliOSSProperties类"><a href="#9、AliOSSProperties类" class="headerlink" title="9、AliOSSProperties类"></a>9、AliOSSProperties类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;aliyun.oss&quot;)</span> <span class="comment">//这个注解的对象必须是Bean对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEndpoint</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> endpoint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEndpoint</span><span class="params">(String endpoint)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.endpoint = endpoint;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAccessKeyId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accessKeyId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAccessKeyId</span><span class="params">(String accessKeyId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accessKeyId = accessKeyId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAccessKeySecret</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accessKeySecret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAccessKeySecret</span><span class="params">(String accessKeySecret)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accessKeySecret = accessKeySecret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBucketName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bucketName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBucketName</span><span class="params">(String bucketName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bucketName = bucketName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="10、AliOSSUtils类"><a href="#10、AliOSSUtils类" class="headerlink" title="10、AliOSSUtils类"></a>10、AliOSSUtils类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 阿里云 OSS 工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOSSUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//依赖注入</span></span><br><span class="line">    <span class="keyword">private</span> AliOSSProperties aliOSSProperties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AliOSSProperties <span class="title function_">getAliOSSProperties</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> aliOSSProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAliOSSProperties</span><span class="params">(AliOSSProperties aliOSSProperties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.aliOSSProperties = aliOSSProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现上传图片到OSS</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取阿里云OSS参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> aliOSSProperties.getEndpoint();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeyId</span> <span class="operator">=</span> aliOSSProperties.getAccessKeyId();</span><br><span class="line">        <span class="type">String</span> <span class="variable">accessKeySecret</span> <span class="operator">=</span> aliOSSProperties.getAccessKeySecret();</span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> aliOSSProperties.getBucketName();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取上传的文件的输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 避免文件覆盖,使用UUID重新命名文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID().toString() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上传文件到 OSS</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        ossClient.putObject(bucketName, fileName, inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取文件访问路径</span></span><br><span class="line">        <span class="comment">//https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">        <span class="comment">//-&gt; https://springboot-web-tlias-test1.oss-cn-chengdu.aliyuncs.com/test.jpg</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + fileName;</span><br><span class="line">        <span class="comment">// 关闭ossClient</span></span><br><span class="line">        ossClient.shutdown();</span><br><span class="line">        <span class="keyword">return</span> url;<span class="comment">// 把上传到oss的路径返回</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="11、在aliyun-oss-spring-boot-autoconfigure模块中的resources下，新建自动配置文件"><a href="#11、在aliyun-oss-spring-boot-autoconfigure模块中的resources下，新建自动配置文件" class="headerlink" title="11、在aliyun-oss-spring-boot-autoconfigure模块中的resources下，新建自动配置文件"></a>11、在aliyun-oss-spring-boot-autoconfigure模块中的resources下，新建自动配置文件</h6><p><strong>文件目录:&#x3D;&#x3D;META-INF&#x2F;spring&#x3D;&#x3D;</strong></p>
<p><strong>文件名称：&#x3D;&#x3D;org.springframework.boot.autoconfigure.AutoConfiguration.imports&#x3D;&#x3D;</strong></p>
<p><strong>文件内容：&#x3D;&#x3D;配置类全类名&#x3D;&#x3D;<strong>（</strong>com.aliyun.oss.AliOSSAutoConfiguration</strong>）</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000403120.png" alt="image-20240817000403120"></p>
<h5 id="⑥自定义starter-测试"><a href="#⑥自定义starter-测试" class="headerlink" title="⑥自定义starter-测试"></a>⑥自定义starter-测试</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000718881.png" alt="image-20240817000718881"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817000727841.png" alt="image-20240817000727841"></p>
<h6 id="1、测试前准备："><a href="#1、测试前准备：" class="headerlink" title="1、测试前准备："></a>1、测试前准备：</h6><ol>
<li><strong>在test工程中引入阿里云starter依赖通过依赖传递，会把autoconfigure依赖也引入了</strong></li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入阿里云OSS起步依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-oss-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>在test工程中的application.yml文件中，配置阿里云OSS配置参数信息（从以前的工程中拷贝即可）</strong></li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#阿里云OSS配置</span></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">https://oss-cn-chengdu.aliyuncs.com</span></span><br><span class="line">    <span class="attr">accessKeyId:</span> <span class="string">LTAI5tH2N5MkrjPKxuemv8Sd</span></span><br><span class="line">    <span class="attr">accessKeySecret:</span> <span class="string">4kr7BLZBAopplxYS4lnXux6Kt6surm</span></span><br><span class="line">    <span class="attr">bucketName:</span> <span class="string">springboot-web-tlias-test1</span></span><br></pre></td></tr></table></figure>

<p>   3.<strong>在test工程中的UploadController类编写代码</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOSSUtils aliOSSUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile image)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//上传文件到阿里云 OSS</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> aliOSSUtils.upload(image);</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>编写完代码后，我们启动当前的SpringBoot测试工程：</strong></p>
<p><strong>随着SpringBoot项目启动，自动配置会把AliOSSUtils的bean对象装配到IOC容器中</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817001030684.png"/>

<h6 id="2、用postman工具进行文件上传"><a href="#2、用postman工具进行文件上传" class="headerlink" title="2、用postman工具进行文件上传"></a>2、用postman工具进行文件上传</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817001111186.png" alt="image-20240817001111186"></p>
<h6 id="3、通过断点可以看到自动注入AliOSSUtils的bean对象"><a href="#3、通过断点可以看到自动注入AliOSSUtils的bean对象" class="headerlink" title="3、通过断点可以看到自动注入AliOSSUtils的bean对象"></a>3、通过断点可以看到自动注入AliOSSUtils的bean对象</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817001141202.png" alt="image-20240817001141202"></p>
<h2 id="十一、Web后端开发总结"><a href="#十一、Web后端开发总结" class="headerlink" title="十一、Web后端开发总结"></a>十一、Web后端开发总结</h2><p>到此基于SpringBoot进行web后端开发的相关知识我们已经学习完毕了。下面我们一起针对这段web课</p>
<p>程做一个总结。</p>
<p>我们来回顾一下关于web后端开发，我们都学习了哪些内容，以及每一块知识，具体是属于哪个框架</p>
<p>的。</p>
<h3 id="1、三层架构"><a href="#1、三层架构" class="headerlink" title="1、三层架构"></a>1、三层架构</h3><p>web后端开发现在基本上都是<strong>基于标准的三层架构</strong>进行开发的，在三层架构当中，**&#x3D;&#x3D;Controller控制器&#x3D;&#x3D;**</p>
<p><strong>层负责&#x3D;&#x3D;接收请求响应数据&#x3D;&#x3D;，&#x3D;&#x3D;Service业务层&#x3D;&#x3D;负责具体的&#x3D;&#x3D;业务逻辑处理&#x3D;&#x3D;，而&#x3D;&#x3D;Dao数据访问层&#x3D;&#x3D;也叫持久层，</strong></p>
<p><strong>就是用来&#x3D;&#x3D;处理数据访问操作&#x3D;&#x3D;的，来完成数据库当中数据的增删改查操作。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817141745038.png" alt="image-20240817141745038"></p>
<h3 id="2、过滤器Filter和拦截器Interceptor"><a href="#2、过滤器Filter和拦截器Interceptor" class="headerlink" title="2、过滤器Filter和拦截器Interceptor"></a>2、过滤器Filter和拦截器Interceptor</h3><p>如果我们在&#x3D;&#x3D;<strong>执行具体的业务处理之前</strong>&#x3D;&#x3D;，需要去做一些通用的业务处理，比如：</p>
<p>我们要进行&#x3D;&#x3D;<strong>统一的登录校验</strong>&#x3D;&#x3D;，我们要进行&#x3D;&#x3D;<strong>统一的字符编码</strong>&#x3D;&#x3D;等这些操作时，</p>
<p>我们就可以借助于&#x3D;&#x3D;<strong>Javaweb当中三大组件之一的过滤器Filter</strong>&#x3D;&#x3D;或者是&#x3D;&#x3D;<strong>Spring当中提供的拦截器Interceptor</strong>&#x3D;&#x3D;来实现。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817142052724.png" alt="image-20240817142052724"></p>
<h3 id="3、架构解耦-IOC和DI"><a href="#3、架构解耦-IOC和DI" class="headerlink" title="3、架构解耦-IOC和DI"></a>3、架构解耦-IOC和DI</h3><p>而为了实现三层架构层与层之间的解耦，我们学习了Spring框架当中的第一大核心：**&#x3D;&#x3D;IOC控制反转与DI依赖注入&#x3D;&#x3D;。**</p>
<ul>
<li>所谓<strong>IOC控制反转</strong>，指的是<strong>将对象创建的控制权由应用程序自身交给外部容器</strong>，这个容器就是我们常说的<strong>IOC容器或Spring容器</strong>。</li>
<li>而<strong>DI依赖注入</strong>指的是<strong>容器为程序提供运行时所需要的资源</strong>。</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817142217171.png" alt="image-20240817142217171"></p>
<h3 id="4、AOP面向切面编程、JWT、Mybatis…"><a href="#4、AOP面向切面编程、JWT、Mybatis…" class="headerlink" title="4、AOP面向切面编程、JWT、Mybatis…"></a>4、AOP面向切面编程、JWT、Mybatis…</h3><p>除了IOC与DI我们还讲到了<strong>AOP面向切面编程</strong>，还有<strong>Spring中的事务管理</strong>、<strong>全局异常处理器</strong>，以及<strong>传递</strong></p>
<p><strong>会话技术Cookie、Session</strong>以及新的会话跟踪解决方案<strong>JWT令牌</strong>，<strong>阿里云OSS对象存储服务</strong>，以及通过</p>
<p><strong>Mybatis持久层架构</strong>操作数据库等技术。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817142329354.png" alt="image-20240817142329354"></p>
<h3 id="5、框架功能分类"><a href="#5、框架功能分类" class="headerlink" title="5、框架功能分类"></a>5、框架功能分类</h3><p>我们在学习这些web后端开发技术的时候，我们都是基于主流的SpringBoot进行整合使用的。而</p>
<p><strong>SpringBoot又是用来简化开发</strong>，提高开发效率的。像<strong>过滤器、拦截器、IOC、DI、AOP、事务管理</strong>等</p>
<p>这些技术到底是哪个框架提供的核心功能？</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817142506432.png" alt="image-20240817142506432"></p>
<ul>
<li><strong>Filter过滤器、Cookie、 Session</strong>这些都是传统的**&#x3D;&#x3D;JavaWeb&#x3D;&#x3D;**提供的技术。</li>
<li><strong>JWT令牌、阿里云OSS对象存储服务</strong>，是现在企业项目中常见的一些&#x3D;&#x3D;<strong>解决方案</strong>&#x3D;&#x3D;。</li>
<li><strong>IOC控制反转、DI依赖注入、AOP面向切面编程、事务管理、全局异常处理、拦截器等</strong>，这些技术都是 &#x3D;&#x3D;<strong>Spring Framework框架</strong>&#x3D;&#x3D;当中提供的核心功能。</li>
<li><strong>Mybatis</strong>就是一个&#x3D;&#x3D;<strong>持久层的框架</strong>&#x3D;&#x3D;，是用来操作数据库的。</li>
</ul>
<h3 id="6、SpringMVC"><a href="#6、SpringMVC" class="headerlink" title="6、SpringMVC"></a>6、SpringMVC</h3><ul>
<li>在Spring框架的生态中，对web程序开发提供了很好的支持，如：全局异常处理器、拦截器这些都是Spring框架中web开发模块所提供的功能，而&#x3D;&#x3D;<strong>Spring框架的web开发模块</strong>&#x3D;&#x3D;，我们也称为：&#x3D;&#x3D;<strong>SpringMVC</strong>&#x3D;&#x3D;</li>
<li>SpringMVC不是一个单独的框架，它是<strong>Spring框架的一部分</strong>，<strong>是Spring框架中的web开发模块，是用来&#x3D;&#x3D;简化原始的Servlet程序开发的&#x3D;&#x3D;。</strong></li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817142903388.png" alt="image-20240817142903388"></p>
<h3 id="7、SSM"><a href="#7、SSM" class="headerlink" title="7、SSM"></a>7、SSM</h3><ul>
<li>外界俗称的<strong>SSM</strong>，就是由：<strong>SpringMVC、Spring Framework、Mybatis三块组成</strong>。</li>
<li>基于传统的SSM框架进行整合开发项目<strong>会比较繁琐，而且效率也比较低</strong>。</li>
<li>所以在现在的企业项目开发当中，基本上都是&#x3D;&#x3D;<strong>直接基于SpringBoot整合SSM进行项目开发</strong>&#x3D;&#x3D;的。到此我们web后端开发的内容就已经全部讲解结束了</li>
</ul>
<h2 id="十二、Maven高级"><a href="#十二、Maven高级" class="headerlink" title="十二、Maven高级"></a>十二、Maven高级</h2><h3 id="1、分模块设计与开发"><a href="#1、分模块设计与开发" class="headerlink" title="1、分模块设计与开发"></a>1、分模块设计与开发</h3><h4 id="（1）介绍"><a href="#（1）介绍" class="headerlink" title="（1）介绍"></a>（1）介绍</h4><p>所谓分模块设计，顾名思义指的就是我们在设计一个 Java 项目的时候，<strong>将一个 Java 项目拆分成多个模块进行开发</strong>。</p>
<h5 id="①未分模块设计的问题"><a href="#①未分模块设计的问题" class="headerlink" title="①未分模块设计的问题"></a>①未分模块设计的问题</h5><p><strong>总结起来，主要两点问题：&#x3D;&#x3D;不方便项目的维护和管理、项目中的通用组件难以复用&#x3D;&#x3D;。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817154845057.png" alt="image-20240817154845057"></p>
<ul>
<li>如果项目不分模块，也就意味着所有的业务代码是不是都写在这一个 Java 项目当中。随着这个项目的业务扩张，项目当中的业务功能可能会越来越多。</li>
<li>假如我们开发的是一个大型的电商项目，里面可能就包括了商品模块的功能、搜索模块的功能、购物车模块、订单模块、用户中心等等。这些所有的业务代码我们都在一个 Java 项目当中编写。</li>
<li>此时大家可以试想一下，假如我们开发的是一个大型的电商网站，这个项目组至少几十号甚至几百号开发人员，这些开发人员全部操作这一个 Java 项目。此时大家就会发现我们项目<strong>管理和维护起来将会非常的困难</strong>。</li>
<li>而且大家再来看，假如在我们的项目当中，我们<strong>自己定义了一些通用的工具类以及通用的组件</strong>，而公司还有其他的项目组，其他项目组也想使用我们所封装的这些组件和工具类，其实是非常不方便的。因为 Java 项目当中包含了当前项目的所有业务代码，所以就造成了这里面所封装的一些组件会<strong>难以复用</strong>。</li>
</ul>
<h5 id="②分模块设计"><a href="#②分模块设计" class="headerlink" title="②分模块设计"></a>②分模块设计</h5><p>分模块设计我们在进行项目设计阶段，就可以<strong>将一个大的项目拆分成若干个模块，每一个模块都是独立的</strong>。</p>
<p><strong>分模块设计就是将项目按照&#x3D;&#x3D;功能&#x3D;&#x3D;或者&#x3D;&#x3D;结构&#x3D;&#x3D;拆分成&#x3D;&#x3D;若干个子模块&#x3D;&#x3D;，</strong></p>
<p><strong>方便项目的管理维护、拓展，也方便模块之间的&#x3D;&#x3D;相互调用&#x3D;&#x3D;、&#x3D;&#x3D;资源共享&#x3D;&#x3D;。</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817155112671.png" alt="image-20240817155112671" style="zoom:80%;" />



<ul>
<li>比如我们可以将商品的相关功能放在商品模块当中，搜索的相关业务功能我都封装在搜索模块当中，还有像购物车模块、订单模块。而为了组件的复用，我们也可以<strong>将项目当中的实体类、工具类以及我们定义的通用的组件都单独的抽取到一个模块当中</strong>。</li>
<li>如果当前这个模块，比如订单模块需要用到这些实体类以及工具类或者这些通用组件，此时直接在订单模块当中<strong>引入工具类的坐标就可以了</strong>。这样我们就将一个项目拆分成了若干个模块儿，这就是<strong>分模块儿设计</strong>。</li>
<li>分模块儿设计之后，大家再来看。我们在进行项目管理的时候，我就可以几个人一组，几个人来负责订单模块儿，另外几个人来负责购物车模块儿，这样更加<strong>便于项目的管理以及项目的后期维护</strong>。</li>
<li>而且分模块设计之后，如果我们需要用到另外一个模块的功能，我们<strong>直接依赖模块</strong>就可以了。比如商品模块、搜索模块、购物车订单模块都需要依赖于通用组件当中封装的一些工具类，我只需要引入通用组件的坐标就可以了。</li>
</ul>
<h4 id="（2）实践"><a href="#（2）实践" class="headerlink" title="（2）实践"></a>（2）实践</h4><h5 id="①分析"><a href="#①分析" class="headerlink" title="①分析"></a>①分析</h5><p>好，我们明白了什么是分模块设计以及分模块设计的优势之后，接下来我们就来看一下我们之前所开发的案例工程。</p>
<p>我们可以看到在这个项目当中，除了我们所开发的部门管理以及员工管理、登录认证等相关业务功能以外，我们是不是也定义了一些实体类，也就是<strong>pojo包</strong>下存放的一些类，像分页结果的封装类PageBean、 <strong>统一响应结果Result</strong>，我们还定义了一些<strong>通用的工具类，像Jwts、阿里云OSS操作的工具类</strong>等等。如果在当前公司的其他项目组当中，也想使用我们所封装的这些公共的组件，该怎么办？大家可以思考一下。</p>
<ul>
<li><p><strong>方案一</strong>：直接依赖我们当前项目 tlias-web-management ，但是存在两大缺点：这个项目当中包含所有的业务功能代码，而想共享的资源，仅仅是pojo下的实体类，以及utils 下的工具类。如果全部都依赖进来，项目在启动时将会把所有的类都加载进来，会<strong>影响性能</strong>。如果直接把这个项目都依赖进来了，那也就意味着我们所有的业务代码都对外公开了，这个是非常<strong>不安全</strong>的。</p>
</li>
<li><p><strong>方案二：</strong>分模块设计<strong>将pojo包下的实体类</strong>，<strong>抽取到</strong>一个<strong>maven模块中</strong> tlias-pojo将utils包下的工具类，抽取到一个maven模块中 tlias-utils其他的业务代码，放在tlias-web-management这个模块中，在该模块中需要用到实体类pojo、工具类utils，<strong>直接引入对应的依赖</strong>即可。</p>
</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817155826946.png" alt="image-20240817155826946"></p>
<p><strong>&#x3D;&#x3D;注意&#x3D;&#x3D;：分模块开发需要先针对模块功能进行设计，再进行编码。不会先将工程开发完毕，然后进行拆分。</strong>PS：当前我们是为了演示分模块开发，所以是基于我们前面开发的案例项目进行拆分的，**&#x3D;&#x3D;实际中都是分模块设计，然后再开发的&#x3D;&#x3D;**。</p>
<h5 id="②实现"><a href="#②实现" class="headerlink" title="②实现"></a>②实现</h5><p>思路我们分析完毕，接下来，我们就根据我们分析的思路，按照如下模块进行拆分：</p>
<h6 id="1-创建-maven模块-tlias-pojo，存放实体类"><a href="#1-创建-maven模块-tlias-pojo，存放实体类" class="headerlink" title="1. 创建&#x3D;&#x3D;maven模块&#x3D;&#x3D;tlias-pojo，存放实体类"></a><strong>1.</strong> 创建&#x3D;&#x3D;maven模块&#x3D;&#x3D;tlias-pojo，存放实体类</h6><p><strong>1、创建一个正常的Maven模块，模块名tlias-pojo</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160039329.png" alt="image-20240817160039329"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160102064.png" alt="image-20240817160102064" style="zoom:80%;" />



<p><strong>2、然后在tlias-pojo中创建一个包 com.itheima.pojo (和原来案例项目中的pojo包名一致)</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160129082.png" alt="image-20240817160129082"></p>
<p><strong>3、将原来案例项目 tlias-web-management 中的pojo包下的实体类，复制到tlias-pojo模块中</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160143242.png" alt="image-20240817160143242"></p>
<p><strong>4、在 tlias-pojo 模块的pom.xml文件中引入依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>5、删除原有案例项目tlias-web-management的pojo包【直接删除不要犹豫，我们已经将该模块拆分出去了】，然后在pom.xml中引入 tlias-pojo的依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-pojo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="2、-创建Maven模块tlias-utils，存放相关工具类"><a href="#2、-创建Maven模块tlias-utils，存放相关工具类" class="headerlink" title="2、 创建Maven模块tlias-utils，存放相关工具类"></a>2、 创建Maven模块tlias-utils，存放相关工具类</h6><p><strong>1、创建一个正常的Maven模块，模块名tlias-utils</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160400908.png" alt="image-20240817160400908" style="zoom:80%;" />



<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160415676.png" alt="image-20240817160415676" style="zoom:80%;" />



<p><strong>2、 然后在 tlias-utils 中创建一个包 com.itheima.utils (和原来案例项目中的utils包名一致)</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160443127.png" alt="image-20240817160443127"></p>
<p><strong>3、 将原来案例项目 tlias-web-management 中的utils包下的实体类，复制到tlias-utils模块中</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160459028.png" alt="image-20240817160459028"></p>
<p><strong>4、 在 tlias-utils 模块的pom.xml文件中引入依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--阿里云OSS--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--WEB开发--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 5、<strong>删除原有案例项目tlias-web-management的utils包【直接删除不要犹豫，我们已经将该模块拆分出去了】，然后在pom.xml中引入 tlias-utils的依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="（3）总结"><a href="#（3）总结" class="headerlink" title="（3）总结"></a>（3）总结</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817160748904.png" alt="image-20240817160748904"></p>
<h3 id="2、继承-继承关系"><a href="#2、继承-继承关系" class="headerlink" title="2、继承-继承关系"></a>2、继承-继承关系</h3><h4 id="（1）继承关系-引入"><a href="#（1）继承关系-引入" class="headerlink" title="（1）继承关系-引入"></a>（1）继承关系-引入</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817164525762.png" alt="image-20240817164525762"></p>
<p>在案例项目分模块开发之后啊，我们会看到tlias-pojo、tlias-utils、tlias-web-management中<strong>都引入了一个依赖 lombok 的依赖</strong>。我们在三个模块中<strong>分别配置了一次</strong>。</p>
<p>如果是做一个大型的项目，这三个模块当中<strong>重复的依赖可能会很多很多</strong>。如果每一个 Maven 模块里面，我们都来单独的配置一次，功能虽然能实现，但是配置是比较**&#x3D;&#x3D;繁琐&#x3D;&#x3D;**的。而接下来我们要讲解的 Maven 的继承用来解决这问题的。</p>
<h4 id="（2）继承关系"><a href="#（2）继承关系" class="headerlink" title="（2）继承关系"></a>（2）继承关系</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817164657544.png" alt="image-20240817164657544"></p>
<p>我们可以再创建一个父工程 tlias-parent ，然后让上述的三个模块 tlias-pojo、tliasutils、tlias-web-management 都来<strong>继承这个父工程</strong> 。 然后再**将各个模块中都共有的依赖，&#x3D;&#x3D;都提取到父工程 tlias-parent中进行配置&#x3D;&#x3D;**，只要子工程继承了父工程，依赖它也会继承下来，这样就无需在各个子工程中进行配置了。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>...<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>...<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>...<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>....<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="（3）思路分析"><a href="#（3）思路分析" class="headerlink" title="（3）思路分析"></a>（3）思路分析</h4><ul>
<li>我们当前的<strong>项目 tlias-web-management</strong>，还稍微有一点<strong>特殊</strong>，因为是一个<strong>springboot项目</strong>，而所有的springboot项目都有一个**&#x3D;&#x3D;统一的父工程&#x3D;&#x3D;<strong>，就是</strong>spring-boot-starter-parent**。</li>
<li>与java语言类似，<strong>Maven不支持多继承</strong>，**&#x3D;&#x3D;一个maven项目只能继承一个父工程&#x3D;&#x3D;**，如果继承了spring-bootstarter-parent，就没法继承我们自己定义的父工程 tlias-parent了。那我们怎么来解决这个问题呢？</li>
<li>那此时，大家可以想一下，Java虽然不支持多继承，但是可以支持<strong>多重继承</strong>，比如：A 继承 B， B继承C。 那在Maven中也是支持多重继承的，所以呢，我们就可以让 我们自己创建的三个模块，都继承tlias-parent，而tlias-parent 再继承 spring-boot-starter-parent，就可以了。 具体结构如下：</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817165455614.png" alt="image-20240817165455614"></p>
<h4 id="（4）实现"><a href="#（4）实现" class="headerlink" title="（4）实现"></a>（4）实现</h4><h5 id="①设置打包方式pom"><a href="#①设置打包方式pom" class="headerlink" title="①设置打包方式pom"></a>①设置打包方式pom</h5><p><strong>创建maven模块tlias-parent，该工程为父工程，&#x3D;&#x3D;设置打包方式pom(默认jar)&#x3D;&#x3D;</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817165551802.png" alt="image-20240817165551802"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817165956297.png" alt="image-20240817165956297" style="zoom:80%;" />

<h6 id="1、工程结构如下："><a href="#1、工程结构如下：" class="headerlink" title="1、工程结构如下："></a>1、工程结构如下：</h6><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817170014954.png" alt="image-20240817170014954"></p>
<h6 id="2、父工程tlias-parent的pom-xml文件配置如下"><a href="#2、父工程tlias-parent的pom-xml文件配置如下" class="headerlink" title="2、父工程tlias-parent的pom.xml文件配置如下"></a>2、父工程tlias-parent的pom.xml文件配置如下</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="3、-Maven打包方式"><a href="#3、-Maven打包方式" class="headerlink" title="3、&#x3D;&#x3D;Maven打包方式&#x3D;&#x3D;"></a>3、&#x3D;&#x3D;Maven打包方式&#x3D;&#x3D;</h6><ul>
<li><strong>jar：普通模块打包，springboot项目基本都是jar包（内嵌tomcat运行）</strong></li>
<li><strong>war：普通web程序打包，需要部署在外部的tomcat服务器中运行</strong></li>
<li><strong>pom：父工程或聚合工程，该模块不写代码，仅进行依赖管理</strong></li>
</ul>
<h5 id="②在子工程的pom-xml文件中，-配置继承关系"><a href="#②在子工程的pom-xml文件中，-配置继承关系" class="headerlink" title="②在子工程的pom.xml文件中，&#x3D;&#x3D;配置继承关系&#x3D;&#x3D;"></a>②在子工程的pom.xml文件中，&#x3D;&#x3D;配置继承关系&#x3D;&#x3D;</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817165720730.png" alt="image-20240817165720730"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../tlias-parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tlias-utils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里是以 tlias-utils 为例，<strong>指定了其父工程</strong>。其他的模块，都是相同的配置方式。</p>
<p>&#x3D;&#x3D;注意&#x3D;&#x3D;：</p>
<ul>
<li>在子工程中，配置了继承关系之后，<strong>坐标中的groupId是可以省略的</strong>，因为会自动继承父工程的 。</li>
<li><strong>relativePath指定父工程的pom文件的相对位置</strong>（如果不指定，将从本地仓库&#x2F;远程仓库查找该工程）。</li>
<li><strong>..&#x2F;</strong> 代表的上一级目录</li>
</ul>
<h5 id="③在-父工程-中配置-各个工程共有的依赖-（子工程会自动继承父工程的依赖）"><a href="#③在-父工程-中配置-各个工程共有的依赖-（子工程会自动继承父工程的依赖）" class="headerlink" title="③在&#x3D;&#x3D;父工程&#x3D;&#x3D;中配置&#x3D;&#x3D;各个工程共有的依赖&#x3D;&#x3D;（子工程会自动继承父工程的依赖）"></a>③在&#x3D;&#x3D;父工程&#x3D;&#x3D;中配置&#x3D;&#x3D;各个工程共有的依赖&#x3D;&#x3D;（子工程会自动继承父工程的依赖）</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817165813183.png" alt="image-20240817165813183"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此时，我们已经将各个子工程中共有的依赖（lombok），都定义在了父工程中，<strong>子工程中</strong>的这一项依赖，<strong>就可以直接删除了。</strong>删除之后，我们会看到父工程中配置的依赖 lombok，<strong>子工程直接继承下来</strong>了。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817170345617.png" alt="image-20240817170345617"></p>
<h4 id="（5）工程结构说明"><a href="#（5）工程结构说明" class="headerlink" title="（5）工程结构说明"></a>（5）工程结构说明</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817170419737.png" alt="image-20240817170419737"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817170434731.png" alt="image-20240817170434731"></p>
<h3 id="3、继承-版本锁定"><a href="#3、继承-版本锁定" class="headerlink" title="3、继承-版本锁定"></a>3、继承-版本锁定</h3><h4 id="（1）引入"><a href="#（1）引入" class="headerlink" title="（1）引入"></a>（1）引入</h4><p>如果项目中各个模块中都公共的这部分依赖，我们可以直接定义在父工程中，从而简化子工程的配置。然而在项目开发中，还有一部分依赖，并不是各个模块都共有的，可能只是其中的一小部分模块中使用到了这个依赖。</p>
<ul>
<li>比如：在tlias-web-management、tlias-web-system、tlias-web-report这三个子工程中，都使用到了jwt的依赖。</li>
<li>但是 tlias-pojo、tlias-utils中并不需要这个依赖，那此时，这个依赖，我们不会直接配置在父工程 tlias-parent中，而是哪个模块需要，就在哪个模块中配置。</li>
<li>而由于是<strong>一个项目中的多个模块</strong>，那多个模块中，我们要使用的<strong>同一个依赖的版本要一致</strong>，这样便于项目依赖的统一管理。比如：这个jwt依赖，我们都使用的是 0.9.1 这个版本。</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817203431447.png" alt="image-20240817203431447"></p>
<p>那假如说，我们项目要升级，要使用到jwt最新版本 0.9.2 中的一个新功能，那此时需要将依赖的版本升级到0.9.2，那此时该怎么做呢 ？</p>
<ul>
<li><p>第一步：去找当前项目中所有的模块的pom.xml配置文件，看哪些模块用到了jwt的依赖。</p>
</li>
<li><p>第二步：找到这个依赖之后，将其版本version，更换为 0.9.2。</p>
</li>
</ul>
<p><strong>问题：如果项目拆分的模块比较多，每一次更换版本，我们都得找到这个项目中的每一个模块，一个一</strong></p>
<p><strong>个的更改。 很容易就会出现，遗漏掉一个模块，忘记更换版本的情况。</strong></p>
<p>那我们又该如何来解决这个问题，如何来统一管理各个依赖的版本呢？</p>
<p>答案：**&#x3D;&#x3D;Maven的版本锁定功能&#x3D;&#x3D;**。</p>
<h4 id="（2）-dependencyManagement-统一管理依赖版本"><a href="#（2）-dependencyManagement-统一管理依赖版本" class="headerlink" title="（2）&#x3D;&#x3D;dependencyManagement&#x3D;&#x3D;统一管理依赖版本"></a>（2）&#x3D;&#x3D;dependencyManagement&#x3D;&#x3D;统一管理依赖版本</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817202227775.png" alt="image-20240817202227775"></p>
<p>子工程引入依赖时，无需指定<version>版本号，<strong>父工程统一管理</strong>。<strong>变更依赖版本，只需在父工程中统一变更。</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817202800759.png" alt="image-20240817202800759"></p>
<p>在maven中，可以在<strong>父工程的pom文件中</strong>通过 &#x3D;&#x3D;&lt; dependencyManagement &gt;&#x3D;&#x3D; 来统一管理依赖版本。</p>
<h5 id="①使用介绍"><a href="#①使用介绍" class="headerlink" title="①使用介绍"></a>①使用介绍</h5><h6 id="父工程"><a href="#父工程" class="headerlink" title="父工程"></a>父工程</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--统一管理依赖版本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="子工程"><a href="#子工程" class="headerlink" title="子工程"></a>子工程</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="注意"><a href="#注意" class="headerlink" title="&#x3D;&#x3D;注意&#x3D;&#x3D;"></a>&#x3D;&#x3D;注意&#x3D;&#x3D;</h6><ul>
<li><strong>在父工程中所配置的 <dependencyManagement> &#x3D;&#x3D;只能统一管理依赖版本&#x3D;&#x3D;，并&#x3D;&#x3D;不会将这个依赖直接引入&#x3D;&#x3D;进来。 这点和 <dependencies> 是不同的。</strong></li>
<li><strong>&#x3D;&#x3D;子工程&#x3D;&#x3D;要使用这个依赖，还是&#x3D;&#x3D;需要引入&#x3D;&#x3D;的，只是此时就&#x3D;&#x3D;无需指定 <version> 版本号&#x3D;&#x3D;了，&#x3D;&#x3D;父工程统一管理&#x3D;&#x3D;。变更依赖版本，只需在父工程中统一变更。</strong></li>
</ul>
<h4 id="（3）属性配置-properties"><a href="#（3）属性配置-properties" class="headerlink" title="（3）属性配置-&lt; properties&gt;"></a>（3）属性配置-&lt; properties&gt;</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817203122089.png" alt="image-20240817203122089" style="zoom: 80%;" />

<p>我们也可以通过<strong>自定义属性及属性引用的形</strong>式，在父工程中将**依赖的版本号进行&#x3D;&#x3D;集中管理维护&#x3D;&#x3D;**。 具体语法为：</p>
<h5 id="①-自定义属性"><a href="#①-自定义属性" class="headerlink" title="① 自定义属性"></a>① 自定义属性</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②引用属性"><a href="#②引用属性" class="headerlink" title="②引用属性"></a>②引用属性</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="③在父工程中，将所有的版本号，都集中管理维护起来。"><a href="#③在父工程中，将所有的版本号，都集中管理维护起来。" class="headerlink" title="③在父工程中，将所有的版本号，都集中管理维护起来。"></a>③在父工程中，将所有的版本号，都集中管理维护起来。</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--自定义依赖版本属性-集中管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jjwt.version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">jjwt.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun.oss.version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">aliyun.oss.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jaxb.version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">jaxb.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation.version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">activation.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jaxb.runtime.version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">jaxb.runtime.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--依赖导入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--统一管理依赖版本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--JWT令牌--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jjwt.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--阿里云OSS--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.oss.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jaxb.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.activation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;activation.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- no more than 2.3.3--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.glassfish.jaxb<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-runtime<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jaxb.runtime.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="（4）dependencyManagement与dependencies的-区别"><a href="#（4）dependencyManagement与dependencies的-区别" class="headerlink" title="（4）dependencyManagement与dependencies的&#x3D;&#x3D;区别&#x3D;&#x3D;"></a>（4）dependencyManagement与dependencies的&#x3D;&#x3D;区别&#x3D;&#x3D;</h4><p><strong>面试题：</strong> </p>
<ul>
<li><p><strong><dependencyManagement> 与 <dependencies> 的区别是什么&#x3D;&#x3D;<dependencies> 是直接依赖&#x3D;&#x3D;，在父工程配置了依赖，子工程会&#x3D;&#x3D;直接继承&#x3D;&#x3D;下来。</strong></p>
</li>
<li><p><strong>&#x3D;&#x3D;<dependencyManagement> 是统一管理依赖版本&#x3D;&#x3D;，&#x3D;&#x3D;不会直接依赖&#x3D;&#x3D;，还&#x3D;&#x3D;需要在子工程&#x3D;&#x3D;中&#x3D;&#x3D;引入所需依赖&#x3D;&#x3D;(&#x3D;&#x3D;无需指定版本&#x3D;&#x3D;)</strong></p>
</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817204341793.png" alt="image-20240817204341793"></p>
<h3 id="4、聚合"><a href="#4、聚合" class="headerlink" title="4、聚合"></a>4、聚合</h3><h4 id="（1）引入-1"><a href="#（1）引入-1" class="headerlink" title="（1）引入"></a>（1）引入</h4><p>分模块设计与开发之后啊，我们的<strong>项目被拆分为多个模块</strong>，而<strong>模块之间的关系，可能错综复杂</strong>。 那就比如我们当前的案例项目，结构如下（相对还是比较简单的）：</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817205516791.png" alt="image-20240817205516791" style="zoom:80%;" />

<p>此时，tlias-web-management 模块的<strong>父工程是 tlias-parent</strong>，该模块又依赖了tlias-pojo、tlias-utils模块。 </p>
<ul>
<li>那此时，我们<strong>要想将 tlias-web-management 模块打包</strong>，是比较<strong>繁琐</strong>的。</li>
<li>因为在<strong>进行项目打包时</strong>，maven会从<strong>本地仓库中来查找tlias-parent父工程</strong>，以及它所依赖的模块tlias-pojo、tlias-utils，而<strong>本地仓库目前是没有这几个依赖的</strong>。</li>
<li>所以，我们再<strong>打包</strong>tlias-web-management <strong>模块前</strong>，**需要将 tlias-parent、tlias-pojo、tlias-utils分别执行&#x3D;&#x3D;install生命周期安装到maven的本地仓库&#x3D;&#x3D;**，</li>
<li>然后再<strong>针对于 tlias-webmanagement 模块</strong>执行**&#x3D;&#x3D;package&#x3D;&#x3D;进行打包操作**。</li>
</ul>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817205839831.png" alt="image-20240817205839831" style="zoom:67%;" />

<p>那此时，大家试想一下，如果开发一个大型项目，<strong>拆分的模块很多</strong>，模块之间的<strong>依赖关系错综复杂</strong>，那此时要进行项目的打包、安装操作，是非常繁琐的。 而我们接下来，要讲解的**&#x3D;&#x3D;maven的聚合&#x3D;&#x3D;<strong>就是来解决这个问题的，通过maven的聚合就可以轻松实现项目的</strong>一键构建（&#x3D;&#x3D;清理、编译、测试、打包、安装&#x3D;&#x3D;等**）。</p>
<h4 id="（2）介绍"><a href="#（2）介绍" class="headerlink" title="（2）介绍"></a>（2）介绍</h4><h5 id="①父工程和聚合工程"><a href="#①父工程和聚合工程" class="headerlink" title="①父工程和聚合工程"></a>①父工程和聚合工程</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817211012106.png" alt="image-20240817211012106"></p>
<ul>
<li>**聚合：将多个模块组织成一个&#x3D;&#x3D;整体&#x3D;&#x3D;，&#x3D;&#x3D;同时进行项目的构建&#x3D;&#x3D;**。</li>
<li><strong>聚合工程：</strong>一个<strong>不具有业务功能</strong>的<strong>“空”工程</strong>（<strong>有且仅有一个pom文件</strong>） 【PS：一般来说，继承关系中的&#x3D;&#x3D;<strong>父工程</strong>&#x3D;&#x3D;与聚合关系中的&#x3D;&#x3D;<strong>聚合工程</strong>&#x3D;&#x3D;是&#x3D;&#x3D;<strong>同一个</strong>&#x3D;&#x3D;】</li>
<li><strong>作用：快速构建项目（无需根据依赖关系手动构建，直接在聚合工程上构建即可）</strong></li>
</ul>
<h4 id="（3）实现"><a href="#（3）实现" class="headerlink" title="（3）实现"></a>（3）实现</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817211052992.png" alt="image-20240817211052992"></p>
<h5 id="①聚合其他模块-moudules"><a href="#①聚合其他模块-moudules" class="headerlink" title="①聚合其他模块-&lt; moudules &gt;"></a>①聚合其他模块-&lt; moudules &gt;</h5><p>在maven中，我们可以在<strong>聚合工程</strong>中通过 <strong>&lt; moudules &gt;</strong> 设置当前聚合工程<strong>所包含的子模块的名称</strong>。我们可以在 tlias-parent中，添加如下配置，来指定当前聚合工程，需要聚合的模块：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--聚合其他模块--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-pojo<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-utils<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../tlias-web-management<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>那此时，我们要进行编译、打包、安装操作，就无需在每一个模块上操作了。<strong>只需要在聚合工程上，统一进行操作</strong>就可以了。</p>
<h5 id="②测试"><a href="#②测试" class="headerlink" title="②测试"></a>②测试</h5><p>执行在<strong>聚合工程 tlias-parent 中</strong>执行 <strong>package 打包指令</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817210531119.png" alt="image-20240817210531119" style="zoom:67%;" />

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817210544506.png" alt="image-20240817210544506"></p>
<ul>
<li>那 tlias-parent 中所聚合的<strong>其他模块全部都会执行 package 指令</strong>，这就是通过聚合实现项目的**&#x3D;&#x3D;一键构建&#x3D;&#x3D;<strong>（</strong>一键清理clean、一键编译compile、一键测试test、一键打包package、一键安装install**等）。</li>
</ul>
<h3 id="5、继承和聚合对比"><a href="#5、继承和聚合对比" class="headerlink" title="5、继承和聚合对比"></a>5、继承和聚合对比</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817210914806.png" alt="image-20240817210914806"></p>
<h4 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a><strong>1、作用</strong></h4><ul>
<li><p><strong>聚合用于&#x3D;&#x3D;快速构建项目&#x3D;&#x3D;</strong></p>
</li>
<li><p><strong>继承用于&#x3D;&#x3D;简化依赖配置&#x3D;&#x3D;、&#x3D;&#x3D;统一管理依赖&#x3D;&#x3D;</strong></p>
</li>
</ul>
<h4 id="2、相同点："><a href="#2、相同点：" class="headerlink" title="2、相同点："></a><strong>2、相同点：</strong></h4><ul>
<li><p><strong>聚合与继承的pom.xml文件打包方式&#x3D;&#x3D;均为pom&#x3D;&#x3D;，通常将两种关系制作到同一个pom文件中</strong></p>
</li>
<li><p><strong>聚合与继承均属于&#x3D;&#x3D;设计型模块&#x3D;&#x3D;，并&#x3D;&#x3D;无实际的模块内容&#x3D;&#x3D;</strong></p>
</li>
</ul>
<h4 id="3、不同点："><a href="#3、不同点：" class="headerlink" title="3、不同点："></a><strong>3、不同点：</strong></h4><ul>
<li><strong>聚合是在&#x3D;&#x3D;聚合工程&#x3D;&#x3D;中配置关系，聚合&#x3D;&#x3D;可以感知&#x3D;&#x3D;到&#x3D;&#x3D;参与聚合的模块&#x3D;&#x3D;有哪些</strong></li>
<li><strong>继承是在&#x3D;&#x3D;子模块&#x3D;&#x3D;中配置关系，父模块&#x3D;&#x3D;无法感知&#x3D;&#x3D;哪些子模块&#x3D;&#x3D;继承&#x3D;&#x3D;了自己</strong></li>
</ul>
<h3 id="6、Maven私服"><a href="#6、Maven私服" class="headerlink" title="6、Maven私服"></a>6、Maven私服</h3><h4 id="1、场景"><a href="#1、场景" class="headerlink" title="1、场景"></a>1、场景</h4><p>在介绍什么是私服之前，我们先来分析一下同一个公司，两个项目组之间如何<strong>基于私服进行资源的共享</strong>。</p>
<p>假设现在有两个团队，A 和 B。 A 开发了一个模块 tlias-utils，模块开发完毕之后，<strong>将模块打成jar包</strong>，并安装到了A的本地仓库。</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817214752022.png" alt="image-20240817214752022"></p>
<p>那此时，该公司的B团队开发项目时，要想使用 tlias-utils 中提供的工具类，该怎么办呢？ 对于</p>
<p>maven项目来说，是不是在pom.xml文件中引入 tlias-utils的坐标就可以了呢？</p>
<p> <img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817214813832.png" alt="image-20240817214813832"></p>
<p>大家可以思考一下，当B团队在maven项目的pom.xml配置文件中引入了依赖的坐标之后，maven是如何查找这个依赖的？ 查找顺序为：</p>
<ul>
<li><p><strong>1). 本地仓库：本地仓库中是没有这个依赖jar包的。</strong></p>
</li>
<li><p><strong>2). 远程中央仓库：由于该模块时自己公司开发的，远程仓库中也没有这个依赖</strong>。</p>
</li>
</ul>
<p>因为目前tlias-utils这个依赖，还在A的本地仓库中的。 B电脑上的maven项目，是不可能找得到A电脑上maven本地仓库的jar包的。 那此时，大家可能会有一个<strong>想法</strong>：<strong>因为A和B都会连接中央仓库</strong>，我们可以将A本地仓库的jar包，直接上传到中央仓库，然后B从中央仓库中下载tlias-utils这个依赖。</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817214948979.png" alt="image-20240817214948979" style="zoom:80%;" />

<p>这个想法很美好，但是现实很残酷。这个方案是<strong>行不通</strong>的，因为<strong>中央仓库全球只有一个</strong>，不是什么人都可以往中央仓库中来上传jar包的，我们是<strong>没有权限操作</strong>的。</p>
<p>那此时，<strong>maven的私服</strong>就出场了，<strong>私服其实就是架设在公司局域网内部的一台服务器</strong>，就是<strong>一种特殊的远程仓库</strong>。</p>
<ul>
<li>有了私服之后，各个团队就可以直接来连接私服了。</li>
<li>A 连接上私服之后，他就可以把jar包直接上传到私服当中。</li>
<li>我公司自己内部搭建的服务器，我是不是有权限操作呀，把jar包上传到私服之后，我让B 团队的所有开发人员也连接同一台私服。</li>
<li>连接上这一台私服之后，他就会根据坐标的信息，直接从私服当中将对应的jar包下载到自己的本地仓库，这样就可以使用到依赖当中所提供的一些工具类了。这样我们就可以通过私服来完成资源的共享。</li>
</ul>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817215118500.png" alt="image-20240817215118500" style="zoom:80%;" />

<p>而如果我们在项目中需要使用其他第三方提供的依赖，如果<strong>本地仓库没有</strong>，也会<strong>自动连接私服下载</strong>，如果<strong>私服没有</strong>，<strong>私服此时会自动连接中央仓库</strong>，去中央仓库中下载依赖，然后将下载的依赖存储在私服仓库及本地仓库中。</p>
<h4 id="2、介绍"><a href="#2、介绍" class="headerlink" title="2、介绍"></a>2、介绍</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817215425646.png" alt="image-20240817215425646"></p>
<h5 id="①私服"><a href="#①私服" class="headerlink" title="①私服"></a>①私服</h5><p><strong>是一种特殊的远程仓库，它是架设在局域网内的仓库服务，用来代理位于外部的中央仓库，用于解决团队内部的资源共享与资源同步问题。</strong></p>
<h5 id="②依赖查找顺序"><a href="#②依赖查找顺序" class="headerlink" title="②依赖查找顺序"></a>②依赖查找顺序</h5><p>​	①本地仓库</p>
<p>​	②私服仓库</p>
<p>​	③中央仓库</p>
<h5 id="③注意事项"><a href="#③注意事项" class="headerlink" title="③注意事项"></a><strong>③注意事项</strong></h5><p>私服在企业项目开发中，<strong>一个项目&#x2F;公司，只需要一台即可</strong>（无需我们自己搭建，会使用即可）。</p>
<h4 id="3、资源上传与下载"><a href="#3、资源上传与下载" class="headerlink" title="3、资源上传与下载"></a>3、资源上传与下载</h4><h5 id="①步骤分析"><a href="#①步骤分析" class="headerlink" title="①步骤分析"></a>①步骤分析</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817215906858.png" alt="image-20240817215906858"></p>
<p>资源上传与下载，我们需要做<strong>三步配置，执行一条指令</strong>。</p>
<ul>
<li><strong>第一步配置：在maven的配置文件中配置访问私服的&#x3D;&#x3D;用户名、密码&#x3D;&#x3D;。</strong></li>
<li><strong>第二步配置：在maven的&#x3D;&#x3D;配置文件&#x3D;&#x3D;中配置连接&#x3D;&#x3D;私服的地址(url地址)&#x3D;&#x3D;。</strong></li>
<li><strong>第三步配置：在项目的&#x3D;&#x3D;pom.xml&#x3D;&#x3D;文件中配置&#x3D;&#x3D;上传资源的位置&#x3D;&#x3D;(url地址)。</strong></li>
<li><strong>配置好了上述三步之后，要上传资源到私服仓库，就执行执行&#x3D;&#x3D;maven生命周期：deploy&#x3D;&#x3D;。</strong></li>
</ul>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817215707989.png" alt="image-20240817215707989" style="zoom:80%;" />

<h5 id="②私服仓库说明"><a href="#②私服仓库说明" class="headerlink" title="②私服仓库说明"></a>②私服仓库说明</h5><ul>
<li><strong>RELEASE：存储自己开发的&#x3D;&#x3D;RELEASE&#x3D;&#x3D;发布版本的资源。</strong></li>
<li><strong>SNAPSHOT：存储自己开发的&#x3D;&#x3D;SNAPSHOT&#x3D;&#x3D;发布版本的资源。</strong></li>
<li><strong>Central：存储的是从&#x3D;&#x3D;中央仓库&#x3D;&#x3D;下载下来的依赖。</strong></li>
</ul>
<h5 id="③项目版本说明"><a href="#③项目版本说明" class="headerlink" title="③项目版本说明"></a>③项目版本说明</h5><ul>
<li><strong>RELEASE(发布版本)：&#x3D;&#x3D;功能趋于稳定&#x3D;&#x3D;、当前更新停止，可以用于发行的版本，存储在私服中的RELEASE仓库中。</strong></li>
<li><strong>SNAPSHOT(快照版本)：功能不稳定、尚处于开发中的版本，即&#x3D;&#x3D;快照版本&#x3D;&#x3D;，存储在私服的SNAPSHOT仓库中。</strong></li>
</ul>
<h4 id="4、实现"><a href="#4、实现" class="headerlink" title="4、实现"></a>4、实现</h4><p>为了模拟企业开发，这里我准备好了一台服务器（192.168.150.101），私服已经搭建好了，我们可</p>
<p>以访问（<strong>局域网访问不了</strong>）私服测试：<strong><a target="_blank" rel="noopener" href="http://192.168.150.101:8081/">http://192.168.150.101:8081</a></strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817215959995.png" alt="image-20240817215959995"></p>
<p><strong>私服准备好了之后，我们要做如下几步配置：</strong></p>
<h5 id="①设置-私服-的访问-用户名-密码-（在自己-maven-安装目录下的-conf-settings-xml-中的-servers-中配置）"><a href="#①设置-私服-的访问-用户名-密码-（在自己-maven-安装目录下的-conf-settings-xml-中的-servers-中配置）" class="headerlink" title="①设置&#x3D;&#x3D;私服&#x3D;&#x3D;的访问&#x3D;&#x3D;用户名&#x2F;密码&#x3D;&#x3D;（在自己&#x3D;&#x3D;maven&#x3D;&#x3D;安装目录下的&#x3D;&#x3D;conf&#x2F;settings.xml&#x3D;&#x3D;中的&#x3D;&#x3D;servers&#x3D;&#x3D;中配置）"></a>①设置&#x3D;&#x3D;私服&#x3D;&#x3D;的访问&#x3D;&#x3D;用户名&#x2F;密码&#x3D;&#x3D;（在自己&#x3D;&#x3D;maven&#x3D;&#x3D;安装目录下的&#x3D;&#x3D;conf&#x2F;settings.xml&#x3D;&#x3D;中的&#x3D;&#x3D;servers&#x3D;&#x3D;中配置）</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="②设置-私服依赖下载-的-仓库组-地址（在自己maven安装目录下的conf-settings-xml中的-mirrors-、-profiles-中配置）"><a href="#②设置-私服依赖下载-的-仓库组-地址（在自己maven安装目录下的conf-settings-xml中的-mirrors-、-profiles-中配置）" class="headerlink" title="②设置&#x3D;&#x3D;私服依赖下载&#x3D;&#x3D;的&#x3D;&#x3D;仓库组&#x3D;&#x3D;地址（在自己maven安装目录下的conf&#x2F;settings.xml中的&#x3D;&#x3D;mirrors&#x3D;&#x3D;、&#x3D;&#x3D;profiles&#x3D;&#x3D;中配置）"></a>②设置&#x3D;&#x3D;私服依赖下载&#x3D;&#x3D;的&#x3D;&#x3D;仓库组&#x3D;&#x3D;地址（在自己maven安装目录下的conf&#x2F;settings.xml中的&#x3D;&#x3D;mirrors&#x3D;&#x3D;、&#x3D;&#x3D;profiles&#x3D;&#x3D;中配置）</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>allow-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/mavenpublic/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h5 id="③IDEA的maven工程的-pom文件-中配置上传（发布）地址-直接在tlias-parent-父工程-中配置-发布地址"><a href="#③IDEA的maven工程的-pom文件-中配置上传（发布）地址-直接在tlias-parent-父工程-中配置-发布地址" class="headerlink" title="③IDEA的maven工程的&#x3D;&#x3D;pom文件&#x3D;&#x3D;中配置上传（发布）地址(直接在tlias-parent(&#x3D;&#x3D;父工程&#x3D;&#x3D;)中配置&#x3D;&#x3D;发布地址&#x3D;&#x3D;)"></a>③IDEA的maven工程的&#x3D;&#x3D;pom文件&#x3D;&#x3D;中配置上传（发布）地址(直接在tlias-parent(&#x3D;&#x3D;父工程&#x3D;&#x3D;)中配置&#x3D;&#x3D;发布地址&#x3D;&#x3D;)</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- release版本的发布地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/mavenreleases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- snapshot版本的发布地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.150.101:8081/repository/mavensnapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h5 id="④配置完成之后，我们就可以在tlias-parent中执行-deploy生命周期-，将项目-发布到私服仓库中-。"><a href="#④配置完成之后，我们就可以在tlias-parent中执行-deploy生命周期-，将项目-发布到私服仓库中-。" class="headerlink" title="④配置完成之后，我们就可以在tlias-parent中执行&#x3D;&#x3D;deploy生命周期&#x3D;&#x3D;，将项目&#x3D;&#x3D;发布到私服仓库中&#x3D;&#x3D;。"></a>④配置完成之后，我们就可以在tlias-parent中执行&#x3D;&#x3D;<strong>deploy</strong>生命周期&#x3D;&#x3D;，将项目&#x3D;&#x3D;发布到私服仓库中&#x3D;&#x3D;。</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817220447255.png" alt="image-20240817220447255"></p>
<p><strong>通过日志，我们可以看到，这几个模块打的&#x3D;&#x3D;jar包&#x3D;&#x3D;确实已经上传到了私服仓库中（由于当前我们的项目是SNAPSHOT版本，所以jar包是上传到了snapshot仓库中）。</strong></p>
<p>那接下来，我们再来打开私服来看一下：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817220523015.png" alt="image-20240817220523015"></p>
<p><strong>我们看到，我们项目中的这几个模块，在私服中都有了。 那接下来，当其他项目组的开发人员在项目中，就可以直接通过依赖的坐标，就可以完成引入对应的依赖，此时本地仓库没有，就会自动从私服仓库中下载。</strong></p>
<h5 id="⑤备注说明"><a href="#⑤备注说明" class="headerlink" title="⑤备注说明"></a>⑤备注说明</h5><ul>
<li><p>课上演示的时候，为了模拟真实的线上环境，老师使用了一台服务器192.168.150.101，并在服务器上安装了maven的私服。 而这台服务器大家并<strong>不能直接访问。</strong></p>
</li>
<li><p>同学们如果要测试使用私服进行资源的上传和下载。可以参照如下步骤，启动给大家准备的本地私服操作：</p>
<ul>
<li><p><strong>解压： 资料中提供的压缩包 apache-maven-nexus.zip</strong></p>
</li>
<li><p><strong>进入目录： apache-maven-nexus\nexus-3.39.0-01\bin</strong></p>
</li>
<li><p><strong>启动服务：双击 start.bat</strong></p>
</li>
<li><p><strong>访问服务：localhost:8081</strong></p>
</li>
<li><p><strong>私服配置说明：将上述配置私服信息的 192.168.150.101 改为 localhost</strong></p>
</li>
</ul>
</li>
</ul>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240817220546919.png" alt="image-20240817220546919"></p>
<h2 id="十二、Web开发总结"><a href="#十二、Web开发总结" class="headerlink" title="十二、Web开发总结"></a>十二、Web开发总结</h2><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240818160430961.png" alt="image-20240818160430961"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240818160410426.png" alt="image-20240818160410426"></p>
<h2 id="十三、开发小技巧"><a href="#十三、开发小技巧" class="headerlink" title="十三、开发小技巧"></a>十三、开发小技巧</h2><h3 id="1、TODO标签"><a href="#1、TODO标签" class="headerlink" title="1、TODO标签"></a>1、TODO标签</h3><p><strong>TODO标签对代码进行标记用来&#x3D;&#x3D;快速定位&#x3D;&#x3D;到后续需要改进的地方</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240818225131384.png" alt="image-20240818225131384"></p>
<h2 id="十四、Spring-Cache"><a href="#十四、Spring-Cache" class="headerlink" title="十四、Spring Cache"></a>十四、Spring Cache</h2><h3 id="2-1-Spring-Cache"><a href="#2-1-Spring-Cache" class="headerlink" title="2.1 Spring Cache"></a>2.1 Spring Cache</h3><h4 id="2-1-1-介绍"><a href="#2-1-1-介绍" class="headerlink" title="2.1.1 介绍"></a>2.1.1 介绍</h4><p>Spring Cache 是一个框架，实现了基于注解的缓存功能，只需要简单地加一个注解，就能实现缓存功能。</p>
<p>Spring Cache 提供了一层抽象，底层可以切换不同的缓存实现，例如：</p>
<ul>
<li>EHCache</li>
<li>Caffeine</li>
<li>Redis(常用)</li>
</ul>
<p><strong>起步依赖：</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  		            		       	 <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-1-2-常用注解"><a href="#2-1-2-常用注解" class="headerlink" title="2.1.2 &#x3D;&#x3D;常用注解&#x3D;&#x3D;"></a>2.1.2 &#x3D;&#x3D;常用注解&#x3D;&#x3D;</h4><p>在SpringCache中提供了很多缓存操作的注解，常见的是以下的几个：</p>
<table>
<thead>
<tr>
<th><strong>注解</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>@EnableCaching</strong></td>
<td>开启缓存注解功能，通常加在启动类上</td>
</tr>
<tr>
<td><strong>@Cacheable</strong></td>
<td><strong>在方法执行前</strong>先查询缓存中是否有数据，如果有数据，则直接返回缓存数据；如果没有缓存数据，调用方法并将方法返回值放到缓存中</td>
</tr>
<tr>
<td><strong>@CachePut</strong></td>
<td><strong>在方法执行后</strong>，将方法的返回值放到缓存中</td>
</tr>
<tr>
<td><strong>@CacheEvict</strong></td>
<td>&#x3D;&#x3D;<strong>方法执行后</strong>&#x3D;&#x3D;，将一条或多条数据从缓存中删除</td>
</tr>
</tbody></table>
<p>在spring boot项目中，使用缓存技术只需在项目中导入相关缓存技术的依赖包，并在启动类上使用@EnableCaching开启缓存支持即可。</p>
<p>例如，使用Redis作为缓存技术，只需要导入Spring data Redis的maven坐标即可。</p>
<h4 id="2-1-3-入门案例"><a href="#2-1-3-入门案例" class="headerlink" title="2.1.3 入门案例"></a>2.1.3 入门案例</h4><p><strong>1). 环境准备</strong></p>
<p>**导入基础工程:**底层已使用Redis缓存实现</p>
<p>基础环境的代码，在我们今天的资料中已经准备好了， 大家只需要将这个工程导入进来就可以了。导入进来的工程结构如下： </p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210183942040.png" alt="image-20221210183942040" style="zoom:50%;" /> 

<p><strong>数据库准备:</strong></p>
<p>创建名为spring_cache_demo数据库，将springcachedemo.sql脚本直接导入数据库中。</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210184346304.png" alt="image-20221210184346304" style="zoom:80%;" /> 



<h5 id="①引导类上加-EnableCaching"><a href="#①引导类上加-EnableCaching" class="headerlink" title="①引导类上加&#x3D;&#x3D;@EnableCaching&#x3D;&#x3D;"></a><strong>①引导类上加&#x3D;&#x3D;@EnableCaching&#x3D;&#x3D;</strong></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span><span class="comment">//开启缓存注解功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheDemoApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(CacheDemoApplication.class,args);</span><br><span class="line">        log.info(<span class="string">&quot;项目启动成功...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="②-CachePut注解"><a href="#②-CachePut注解" class="headerlink" title="② &#x3D;&#x3D;@CachePut注解&#x3D;&#x3D;"></a><strong>② &#x3D;&#x3D;@CachePut注解&#x3D;&#x3D;</strong></h5><p><strong>@CachePut 说明：</strong> </p>
<ul>
<li>​	<strong>作用: 在&#x3D;&#x3D;方法执行后&#x3D;&#x3D;，&#x3D;&#x3D;将方法返回值&#x3D;&#x3D;，放入缓存</strong></li>
<li>​	<strong>value: 缓存的名称, 每个缓存名称下面可以有很多key</strong></li>
<li>​	<strong>key: 缓存的key  ———-&gt; 支持Spring的表达式语言SPEL语法</strong></li>
</ul>
<p><strong>在save方法上加注解@CachePut</strong></p>
<p>当前UserController的save方法是用来保存用户信息的，我们希望在该用户信息保存到数据库的同时，也往缓存中缓存一份数据，我们可以在save方法上加上注解 @CachePut，用法如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* CachePut：将方法返回值放入缓存</span></span><br><span class="line"><span class="comment">* value：缓存的名称，每个缓存名称下面可以有多个key</span></span><br><span class="line"><span class="comment">* key：缓存的key</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line">   <span class="meta">@CachePut(value = &quot;userCache&quot;, key = &quot;#user.id&quot;)</span><span class="comment">//key的生成：userCache::1</span></span><br><span class="line">   <span class="keyword">public</span> User <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">       userMapper.insert(user);</span><br><span class="line">       <span class="keyword">return</span> user;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong>key的写法如下</p>
<p><strong>#user.id : #user指的是方法形参的名称, id指的是user的id属性 , 也就是使用user的id属性作为key ;</strong></p>
<p>#result.id : #result代表方法返回值，该表达式 代表以返回对象的id属性作为key ；</p>
<p>#p0.id：#p0指的是方法中的第一个参数，id指的是第一个参数的id属性,也就是使用第一个参数的id属性作为key ;</p>
<p>#a0.id：#a0指的是方法中的第一个参数，id指的是第一个参数的id属性,也就是使用第一个参数的id属性作为key ;</p>
<p>#root.args[0].id:#root.args[0]指的是方法中的第一个参数，id指的是第一个参数的id属性,也就是使用第一个参数</p>
<p>的id属性作为key ;</p>
<p><strong>启动服务,通过swagger接口文档测试，访问UserController的save()方法</strong></p>
<p>因为id是自增，所以不需要设置id属性</p>
 <img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210191702887.png" alt="image-20221210191702887" style="zoom:50%;" /> 

<p><strong>查看user表中的数据</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210192325931.png" alt="image-20221210192325931" style="zoom: 67%;" /> 

<p><strong>查看Redis中的数据</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210192418204.png" alt="image-20221210192418204" style="zoom:50%;" /> 



<h5 id="③-Cacheable注解"><a href="#③-Cacheable注解" class="headerlink" title="③&#x3D;&#x3D;@Cacheable注解&#x3D;&#x3D;"></a><strong>③&#x3D;&#x3D;@Cacheable注解&#x3D;&#x3D;</strong></h5><p><strong>@Cacheable 说明:</strong></p>
<ul>
<li><p>​	<strong>作用: &#x3D;&#x3D;在方法执行前&#x3D;&#x3D;，spring先查看缓存中是否有数据，如果有数据，则直接返回缓存数据；若没有数据，调用方法并将方法返回值放到缓存中</strong></p>
</li>
<li><p>​	<strong>value: 缓存的名称，每个缓存名称下面可以有多个key</strong></p>
</li>
<li><p>​	<strong>key: 缓存的key  ———-&gt; 支持Spring的表达式语言SPEL语法</strong></p>
<h6 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h6></li>
<li><p><strong>这里的注解</strong>@Cacheable 其实底层使用了**&#x3D;&#x3D;动态代理&#x3D;&#x3D;<strong>的技术，在方法执行前就对缓存(Redis)进行查询，若有则直接返回缓存中的，若没有，则通过</strong>&#x3D;&#x3D;反射&#x3D;&#x3D;<strong>的方式去</strong>调用方法<strong>，并将</strong>该方法的返回值**放到指定的缓存中</p>
</li>
</ul>
<p> <strong>在getById上加注解@Cacheable</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Cacheable：在方法执行前spring先查看缓存中是否有数据，如果有数据，则直接返回缓存数据；若没有数据，	  *调用方法并将方法返回值放到缓存中</span></span><br><span class="line"><span class="comment">* value：缓存的名称，每个缓存名称下面可以有多个key</span></span><br><span class="line"><span class="comment">* key：缓存的key</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line">   <span class="meta">@Cacheable(cacheNames = &quot;userCache&quot;,key=&quot;#id&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> User <span class="title function_">getById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">       <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getById(id);</span><br><span class="line">       <span class="keyword">return</span> user;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>重启服务,通过swagger接口文档测试，访问UserController的getById()方法</strong></p>
<p>第一次访问，会请求我们controller的方法，查询数据库。后面再查询相同的id，就直接从Redis中查询数据，不用再查询数据库了，就说明缓存生效了。</p>
<p>提前在redis中手动删除掉id&#x3D;1的用户数据</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210193834150.png" alt="image-20221210193834150" style="zoom:50%;" /> 

<p><strong>查看控制台sql语句：</strong>说明从数据库查询的用户数据</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210193948896.png" alt="image-20221210193948896" style="zoom: 67%;" /> 

<p><strong>查看Redis中的缓存数据：</strong>说明已成功缓存</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210194112334.png" alt="image-20221210194112334" style="zoom:50%;" /> 

<p>再次查询相同id的数据时，直接从redis中直接获取，不再查询数据库。</p>
<h5 id="④-CacheEvict注解"><a href="#④-CacheEvict注解" class="headerlink" title="④&#x3D;&#x3D;@CacheEvict注解&#x3D;&#x3D;"></a>④&#x3D;&#x3D;@CacheEvict注解&#x3D;&#x3D;</h5><p><strong>@CacheEvict 说明：</strong> </p>
<ul>
<li>​	<strong>作用: &#x3D;&#x3D;方法执行后&#x3D;&#x3D;，清理指定缓存</strong></li>
<li>​	<strong>value: 缓存的名称，每个缓存名称下面可以有多个key</strong></li>
<li>​	<strong>key: 缓存的key  ———-&gt; 支持Spring的表达式语言SPEL语法</strong></li>
<li>@CacheEvict(cacheNames &#x3D; “userCache”,key &#x3D; “#id”)&#x2F;&#x2F;删除某个key对应的缓存数据</li>
<li>@CacheEvict(cacheNames &#x3D; “userCache”,<strong>&#x3D;&#x3D;allEntries &#x3D; true&#x3D;&#x3D;</strong>)&#x2F;&#x2F;删除userCache下<strong>所有的缓存数据</strong></li>
</ul>
<p><strong>在 delete 方法上加注解@CacheEvict</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span></span><br><span class="line">   <span class="meta">@CacheEvict(cacheNames = &quot;userCache&quot;,key = &quot;#id&quot;)</span><span class="comment">//删除某个key对应的缓存数据</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">       userMapper.deleteById(id);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/delAll&quot;)</span></span><br><span class="line">   <span class="meta">@CacheEvict(cacheNames = &quot;userCache&quot;,allEntries = true)</span><span class="comment">//删除userCache下所有的缓存数据</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAll</span><span class="params">()</span>&#123;</span><br><span class="line">       userMapper.deleteAll();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>重启服务,通过swagger接口文档测试，访问UserController的deleteAll()方法</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210195254874.png" alt="image-20221210195254874" style="zoom:50%;" /> 

<p><strong>查看user表：</strong>数据清空</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210195332101.png" alt="image-20221210195332101" style="zoom:80%;" /> 

<p><strong>查询Redis缓存数据</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20221210195500014.png" alt="image-20221210195500014" style="zoom:50%;" /> 





<h2 id="十五、HttpServletRequest-Response和-XMLHttpRequset"><a href="#十五、HttpServletRequest-Response和-XMLHttpRequset" class="headerlink" title="十五、HttpServletRequest&#x2F;Response和&#x3D;&#x3D;XMLHttpRequset&#x3D;&#x3D;"></a>十五、HttpServletRequest&#x2F;Response和&#x3D;&#x3D;XMLHttpRequset&#x3D;&#x3D;</h2><p>在 Spring Boot 架构中，<code>HttpServletRequest</code> 和 <code>HttpServletResponse</code> 是用于处理 HTTP 请求和响应的关键组件，源自 Java Servlet API。这些类在处理 web 请求时扮演着重要角色。让我们详细了解它们的作用以及 Tomcat 如何处理前端发出的 XMLHttpRequest。</p>
<h3 id="1、HttpServletRequest-和-HttpServletResponse-的作用"><a href="#1、HttpServletRequest-和-HttpServletResponse-的作用" class="headerlink" title="1、HttpServletRequest 和 HttpServletResponse 的作用"></a>1、<code>HttpServletRequest</code> 和 <code>HttpServletResponse</code> 的作用</h3><ol>
<li><p>**<code>HttpServletRequest</code>**：</p>
<ul>
<li><strong>请求数据</strong>：封装客户端（如浏览器）发出的 HTTP 请求信息。包括请求的 URL、HTTP 方法（如 GET、POST）、请求头、请求参数、请求体等。</li>
<li><strong>获取请求参数</strong>：可以通过 <code>getParameter</code> 方法获取 URL 参数或表单数据。</li>
<li><strong>获取请求头</strong>：可以通过 <code>getHeader</code> 方法获取请求中的头部信息。</li>
<li><strong>获取请求体</strong>：用于读取请求体中的数据，尤其是在 POST 请求中。</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/example&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">example</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;param&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;User-Agent&quot;</span>);</span><br><span class="line">    <span class="comment">// 处理请求</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;response&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>**<code>HttpServletResponse</code>**：</p>
<ul>
<li><strong>响应数据</strong>：用于构建和发送 HTTP 响应给客户端。可以设置响应状态码、响应头和响应体。</li>
<li><strong>设置响应头</strong>：使用 <code>setHeader</code> 方法设置响应的头信息。</li>
<li><strong>设置响应体</strong>：通过 <code>PrintWriter</code> 或 <code>ServletOutputStream</code> 将数据写入响应体。</li>
<li><strong>设置状态码</strong>：可以设置 HTTP 状态码，例如 <code>200 OK</code> 或 <code>404 Not Found</code>。</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/submit&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">submitForm</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    response.setStatus(HttpServletResponse.SC_OK);</span><br><span class="line">    </span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">    out.println(<span class="string">&quot;&#123;\&quot;message\&quot;: \&quot;Form submitted successfully\&quot;&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2、Tomcat-如何处理-XMLHttpRequest"><a href="#2、Tomcat-如何处理-XMLHttpRequest" class="headerlink" title="2、Tomcat 如何处理 XMLHttpRequest"></a>2、Tomcat 如何处理 XMLHttpRequest</h3><p>当 Tomcat 收到一个来自前端的 XMLHttpRequest 时，处理流程如下：</p>
<ol>
<li><p><strong>接收请求</strong>：</p>
<ul>
<li>Tomcat 作为 Servlet 容器，监听并接收 HTTP 请求。</li>
</ul>
</li>
<li><p><strong>请求解析</strong>：</p>
<ul>
<li>Tomcat 解析请求的 HTTP 报文，包括请求行、请求头、请求体等。基于请求的 URL 和 HTTP 方法，Tomcat 确定哪个 Servlet 或 Controller 处理此请求。</li>
</ul>
</li>
<li><p><strong>创建 <code>HttpServletRequest</code> 和 <code>HttpServletResponse</code> 对象</strong>：</p>
<ul>
<li>Tomcat 为每个请求创建一个 <code>HttpServletRequest</code> 对象，用于封装请求信息。</li>
<li>Tomcat 还创建一个 <code>HttpServletResponse</code> 对象，用于构建和发送响应。</li>
</ul>
</li>
<li><p><strong>请求分发</strong>：</p>
<ul>
<li>Tomcat 将 <code>HttpServletRequest</code> 和 <code>HttpServletResponse</code> 对象传递给相应的 Servlet 或 Spring Controller。</li>
<li>在 Spring Boot 中，Spring 的 DispatcherServlet 负责进一步处理请求，将其分发到合适的 Controller 方法。</li>
</ul>
</li>
<li><p><strong>执行请求处理逻辑</strong>：</p>
<ul>
<li>在 Spring Boot Controller 中，处理请求逻辑并使用 <code>HttpServletRequest</code> 读取请求数据。</li>
<li>根据处理结果，使用 <code>HttpServletResponse</code> 设置响应数据和状态码。</li>
</ul>
</li>
<li><p><strong>发送响应</strong>：</p>
<ul>
<li>Tomcat 将 Servlet 或 Controller 生成的响应内容发送回客户端，响应包括 HTTP 状态码、响应头和响应体。</li>
</ul>
</li>
<li><p><strong>关闭连接</strong>：</p>
<ul>
<li>响应发送完毕后，Tomcat 关闭与客户端的连接（如果是长连接，则保持连接以待未来的请求）。</li>
</ul>
</li>
</ol>
<h3 id="3、示例：处理-XMLHttpRequest-的-Spring-Boot-Controller"><a href="#3、示例：处理-XMLHttpRequest-的-Spring-Boot-Controller" class="headerlink" title="3、示例：处理 XMLHttpRequest 的 Spring Boot Controller"></a>3、示例：处理 XMLHttpRequest 的 Spring Boot Controller</h3><p>假设前端发出一个 XMLHttpRequest 请求到 <code>/api/data</code>，你的 Spring Boot Controller 可能如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/data&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">getData</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">        <span class="comment">// 处理请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">clientHeader</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;X-Custom-Header&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构建响应</span></span><br><span class="line">        <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">        headers.set(<span class="string">&quot;X-Response-Header&quot;</span>, <span class="string">&quot;HeaderValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">responseBody</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;message\&quot;: \&quot;Data received\&quot;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity</span><br><span class="line">                .ok()</span><br><span class="line">                .headers(headers)</span><br><span class="line">                .body(responseBody);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，Spring Boot 自动处理 <code>HttpServletRequest</code> 和 <code>HttpServletResponse</code>，并返回一个 JSON 响应。</p>
<h3 id="4、HttpServletResponse简介"><a href="#4、HttpServletResponse简介" class="headerlink" title="4、HttpServletResponse简介"></a>4、HttpServletResponse简介</h3><p>在 Spring Boot 架构中，<code>HttpServletResponse</code> 是 Java Servlet API 的一部分，负责处理 HTTP 响应。它用于将响应数据从服务器发送到客户端，通常是浏览器。具体来说，<code>HttpServletResponse</code> 允许你执行以下操作：</p>
<ol>
<li><p><strong>设置响应状态码</strong>：你可以设置 HTTP 响应的状态码，例如 <code>200 OK</code>、<code>404 Not Found</code>、<code>500 Internal Server Error</code> 等。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">response.setStatus(HttpServletResponse.SC_OK);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>设置响应头</strong>：你可以设置或修改响应的头信息，例如 <code>Content-Type</code>、<code>Content-Length</code>、<code>Cache-Control</code> 等。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">response.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>写入响应体</strong>：你可以通过 <code>PrintWriter</code> 或 <code>ServletOutputStream</code> 将数据写入响应体。这是最常用的功能，用于发送 HTML、JSON、XML 等内容。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">out.println(<span class="string">&quot;&#123;\&quot;message\&quot;: \&quot;Hello, World!\&quot;&#125;&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>设置响应内容的类型和编码</strong>：你可以设置响应的内容类型（如 <code>text/html</code>、<code>application/json</code>）和字符编码（如 <code>UTF-8</code>）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<p>在 Spring Boot 中，虽然你可以直接使用 <code>HttpServletResponse</code>，但通常不需要手动操作，因为 Spring Boot 的 MVC 框架会为你处理大部分的响应生成。你通常通过返回一个 <code>@RestController</code> 方法中的对象，Spring Boot 会自动将对象序列化为 JSON 或其他格式，并设置正确的响应头和状态码。</p>
<p>然而，在某些特殊情况下，你可能需要直接操作 <code>HttpServletResponse</code>，例如：</p>
<ul>
<li><strong>控制响应头</strong>：在一些自定义的处理逻辑中，你可能需要动态设置响应头。</li>
<li><strong>文件下载</strong>：当你需要响应一个文件下载请求时，可以设置适当的头部信息（如 <code>Content-Disposition</code>）和写入文件内容。</li>
</ul>
<p>例如，一个文件下载的例子可能如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">downloadFile</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=\&quot;file.txt\&quot;&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;path/to/file.txt&quot;</span>);</span><br><span class="line">         <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream()) &#123;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> bytesRead;</span><br><span class="line">        <span class="keyword">while</span> ((bytesRead = inputStream.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            outputStream.write(buffer, <span class="number">0</span>, bytesRead);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总之，<code>HttpServletResponse</code> 在 Spring Boot 应用中主要用于设置和发送 HTTP 响应。</p>
<h2 id="十六、Git的使用"><a href="#十六、Git的使用" class="headerlink" title="十六、Git的使用"></a>十六、Git的使用</h2><h3 id="1、Git全局设置"><a href="#1、Git全局设置" class="headerlink" title="1、Git全局设置"></a>1、Git全局设置</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901173123251.png" alt="image-20240901173123251"></p>
<h3 id="2、获取Git仓库-本地初始化"><a href="#2、获取Git仓库-本地初始化" class="headerlink" title="2、获取Git仓库-本地初始化"></a>2、获取Git仓库-本地初始化</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901174146022.png" alt="image-20240901174146022"></p>
<h3 id="3、获取Git仓库-从远程仓库克隆"><a href="#3、获取Git仓库-从远程仓库克隆" class="headerlink" title="3、获取Git仓库-从远程仓库克隆"></a>3、获取Git仓库-从远程仓库克隆</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901174303362.png" alt="image-20240901174303362"></p>
<h3 id="4、工作区、暂存区、版本库的概念"><a href="#4、工作区、暂存区、版本库的概念" class="headerlink" title="4、工作区、暂存区、版本库的概念"></a>4、工作区、暂存区、版本库的概念</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901174546501.png" alt="image-20240901174546501"></p>
<h3 id="5、Git工作区中文件的状态"><a href="#5、Git工作区中文件的状态" class="headerlink" title="5、Git工作区中文件的状态"></a>5、Git工作区中文件的状态</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901204231914.png" alt="image-20240901204231914"></p>
<h3 id="6、本地仓库操作"><a href="#6、本地仓库操作" class="headerlink" title="6、本地仓库操作"></a>6、本地仓库操作</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901204524392.png" alt="image-20240901204524392"></p>
<h4 id="（1）git-reset-取消暂存或切换版本"><a href="#（1）git-reset-取消暂存或切换版本" class="headerlink" title="（1）git reset-取消暂存或切换版本"></a>（1）git reset-取消暂存或切换版本</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901204854694.png" alt="image-20240901204854694" style="zoom:80%;" />

<h4 id="（2）git-commit-提交"><a href="#（2）git-commit-提交" class="headerlink" title="（2）git commit-提交"></a>（2）git commit-提交</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901204835698.png" style="zoom:80%;" />

<p>&#x3D;&#x3D;<strong>注意</strong>&#x3D;&#x3D;：<strong>git commit -m ‘’test’’ b1.txt &#x3D;&#x3D;-i&#x3D;&#x3D;</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901220004344.png"/>



<h4 id="（3）git-log-查看日志"><a href="#（3）git-log-查看日志" class="headerlink" title="（3）git log-查看日志"></a>（3）git log-查看日志</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901205255026.png" alt="image-20240901205255026"></p>
<h3 id="7、远程仓库操作命令"><a href="#7、远程仓库操作命令" class="headerlink" title="7、远程仓库操作命令"></a>7、远程仓库操作命令</h3><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901205404973.png" alt="image-20240901205404973" style="zoom:80%;" />

<h4 id="（1）git-remote-查看远程仓库"><a href="#（1）git-remote-查看远程仓库" class="headerlink" title="（1）git remote-查看远程仓库"></a>（1）git remote-查看远程仓库</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901205625518.png" alt="image-20240901205625518"></p>
<h4 id="（2）git-remote-add-shortname-url"><a href="#（2）git-remote-add-shortname-url" class="headerlink" title="（2）git remote add &lt; shortname&gt; &lt; url&gt;"></a>（2）git remote add &lt; shortname&gt; &lt; url&gt;</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901210012461.png" alt="image-20240901210012461"></p>
<h4 id="（3）git-clone-url"><a href="#（3）git-clone-url" class="headerlink" title="（3）git clone [url]"></a>（3）git clone [url]</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901210221923.png" alt="image-20240901210221923"></p>
<h4 id="（4）-git-push-remote-name-branch-name"><a href="#（4）-git-push-remote-name-branch-name" class="headerlink" title="（4） git push [remote-name] [branch-name]"></a>（4） git push [remote-name] [branch-name]</h4><p><strong>&#x3D;&#x3D;remote-name&#x3D;&#x3D;为使用git remote add <shortname> <url>添加远程仓库时指定的&#x3D;&#x3D;仓库别名&#x3D;&#x3D;shortname；当该项目是从远程仓库直接clone过来时，&#x3D;&#x3D;默认&#x3D;&#x3D;的remote-name为&#x3D;&#x3D;origin&#x3D;&#x3D;</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901210459960.png" alt="image-20240901210459960"></p>
<h4 id="（5）git-pull-short-name-branch-name"><a href="#（5）git-pull-short-name-branch-name" class="headerlink" title="（5）git pull [short-name] [branch-name]"></a>（5）git pull [short-name] [branch-name]</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901212048354.png" alt="image-20240901212048354"></p>
<h3 id="8、分支操作"><a href="#8、分支操作" class="headerlink" title="8、分支操作"></a>8、分支操作</h3><p> <img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901212808965.png" alt="image-20240901212808965"></p>
<h4 id="（1）git-branch-查看分支"><a href="#（1）git-branch-查看分支" class="headerlink" title="（1）git branch-查看分支"></a>（1）git branch-查看分支</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901213058850.png" alt="image-20240901213058850" style="zoom:80%;" />

<h4 id="（2）git-branch-branch-name-创建分支"><a href="#（2）git-branch-branch-name-创建分支" class="headerlink" title="（2）git branch [branch-name]-创建分支"></a>（2）git branch [branch-name]-创建分支</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901213258580.png" alt="image-20240901213258580" style="zoom:80%;" />

<h4 id="（3）git-checkout-branch-name-切换分支"><a href="#（3）git-checkout-branch-name-切换分支" class="headerlink" title="（3）git checkout [branch-name]-切换分支"></a>（3）git checkout [branch-name]-切换分支</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901213416201.png" alt="image-20240901213416201" style="zoom:80%;" />



<h4 id="（4）git-push-short-name-branch-name-推送值远程仓库分支"><a href="#（4）git-push-short-name-branch-name-推送值远程仓库分支" class="headerlink" title="（4）git push [short-name] [branch-name]-推送值远程仓库分支"></a>（4）git push [short-name] [branch-name]-推送值远程仓库分支</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901213850527.png" alt="image-20240901213850527" style="zoom:80%;" />

 

<h4 id="（5）git-merge-name-合并分支"><a href="#（5）git-merge-name-合并分支" class="headerlink" title="（5）git merge [name] -合并分支"></a>（5）git merge [name] -合并分支</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901214050024.png" alt="image-20240901214050024"></p>
<p><strong>①出现该窗口：</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901214208932.png" alt="image-20240901214208932"></p>
<p><strong>②按下 &#x3D;&#x3D;i&#x3D;&#x3D; 输入备注信息：</strong></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901214256707.png" alt="image-20240901214256707"></p>
<p><strong>③按下&#x3D;&#x3D;esc&#x3D;&#x3D;，再输入&#x3D;&#x3D;:wq&#x3D;&#x3D;(保存退出)：</strong></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901214412233.png"/>



<h4 id="（6）合并分支常见错误-同时对同一个文件都修改"><a href="#（6）合并分支常见错误-同时对同一个文件都修改" class="headerlink" title="（6）合并分支常见错误-同时对同一个文件都修改"></a>（6）合并分支常见错误-同时对同一个文件都修改</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215238584.png" alt="image-20240901215238584" style="zoom:80%;" /><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215305627.png" alt="image-20240901215305627" style="zoom:80%;" /></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215409226.png" alt="image-20240901215409226"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215447160.png" alt="image-20240901215447160"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215526560.png" alt="image-20240901215526560"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901215751326.png" alt="image-20240901215751326"></p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901220004344.png" alt="image-20240901220004344"></p>
<h3 id="9、标签操作"><a href="#9、标签操作" class="headerlink" title="9、标签操作"></a>9、标签操作</h3><ul>
<li><strong>标签是静态的，可以理解为当前分支的一个特定状态，一旦确定了该标签就不可修改了</strong>，</li>
<li><strong>而分支是动态的，分支可以不断更新并保存</strong></li>
</ul>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901220431059.png" alt="image-20240901220431059" style="zoom:80%;" />

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901220542401.png" alt="image-20240901220542401" style="zoom:80%;" />

<h4 id="（1）git-tag-参看标签"><a href="#（1）git-tag-参看标签" class="headerlink" title="（1）git tag-参看标签"></a>（1）git tag-参看标签</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901221155737.png" alt="image-20240901221155737" style="zoom:80%;" />

<h4 id="（2）git-tag-tag-name-创建标签"><a href="#（2）git-tag-tag-name-创建标签" class="headerlink" title="（2）git tag [tag-name] -创建标签"></a>（2）git tag [tag-name] -创建标签</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901221235802.png" alt="image-20240901221235802" style="zoom:80%;" />

<h4 id="（3）git-push-short-name-tag-name-推送标签"><a href="#（3）git-push-short-name-tag-name-推送标签" class="headerlink" title="（3）git push [short-name] [tag-name]-推送标签"></a>（3）git push [short-name] [tag-name]-推送标签</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901221345791.png" alt="image-20240901221345791" style="zoom:80%;" />



<h4 id="（4）git-checkout-b-newbranch-name-tag-name-检出标签"><a href="#（4）git-checkout-b-newbranch-name-tag-name-检出标签" class="headerlink" title="（4）git checkout -b [newbranch-name] [tag-name] -检出标签"></a>（4）git checkout -b [newbranch-name] [tag-name] -检出标签</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901221530299.png" alt="image-20240901221530299"></p>
<h3 id="10、IDEA中使用Git"><a href="#10、IDEA中使用Git" class="headerlink" title="10、IDEA中使用Git"></a>10、IDEA中使用Git</h3><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901224103951.png" alt="image-20240901224103951"></p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901224715756.png" alt="image-20240901224715756" style="zoom:67%;" />

<h4 id="（1）配置Git"><a href="#（1）配置Git" class="headerlink" title="（1）配置Git"></a>（1）配置Git</h4><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901221944015.png" alt="image-20240901221944015"></p>
<h4 id="（2）获取Git仓库"><a href="#（2）获取Git仓库" class="headerlink" title="（2）获取Git仓库"></a>（2）获取Git仓库</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901222501572.png" alt="image-20240901222501572" style="zoom: 67%;" />

<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901222722684.png" alt="image-20240901222722684" style="zoom:80%;" />

<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901223006395.png" alt="image-20240901223006395"></p>
<h4 id="（3）本地仓库操作"><a href="#（3）本地仓库操作" class="headerlink" title="（3）本地仓库操作"></a>（3）本地仓库操作</h4><h5 id="①将文件加入到缓存区"><a href="#①将文件加入到缓存区" class="headerlink" title="①将文件加入到缓存区"></a>①将文件加入到缓存区</h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901223242809.png" alt="image-20240901223242809" style="zoom:80%;" />

<h5 id="②将暂存区的文件提交到本地版本库"><a href="#②将暂存区的文件提交到本地版本库" class="headerlink" title="②将暂存区的文件提交到本地版本库"></a>②将暂存区的文件提交到本地版本库</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901224103951.png" alt="image-20240901224103951"></p>
<h5 id="③查看日志"><a href="#③查看日志" class="headerlink" title="③查看日志"></a>③查看日志</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901224245577.png" alt="image-20240901224245577"></p>
<h4 id="（4）远程仓库操作"><a href="#（4）远程仓库操作" class="headerlink" title="（4）远程仓库操作"></a>（4）远程仓库操作</h4><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901224715756.png" style="zoom:80%;" />



<h4 id="（5）分支操作"><a href="#（5）分支操作" class="headerlink" title="（5）分支操作"></a>（5）分支操作</h4><h5 id="①查看分支"><a href="#①查看分支" class="headerlink" title="①查看分支"></a>①查看分支</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901225415765.png" alt="image-20240901225415765"></p>
<h5 id="②创建分支"><a href="#②创建分支" class="headerlink" title="②创建分支"></a>②创建分支</h5><p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901225450107.png" alt="image-20240901225450107"></p>
<h5 id="③切换分支"><a href="#③切换分支" class="headerlink" title="③切换分支"></a>③切换分支</h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901225559749.png" alt="image-20240901225559749" style="zoom:80%;" />



<h5 id="④将分支推送到远程仓库"><a href="#④将分支推送到远程仓库" class="headerlink" title="④将分支推送到远程仓库"></a>④将分支推送到远程仓库</h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901225659741.png" alt="image-20240901225659741" style="zoom:80%;" />

<h5 id="⑤合并分支"><a href="#⑤合并分支" class="headerlink" title="⑤合并分支"></a>⑤合并分支</h5><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240901225844943.png" alt="image-20240901225844943" style="zoom:80%;" />





<h3 id="11、git克隆远程仓库的指定分支方法（附常用git配置命令）"><a href="#11、git克隆远程仓库的指定分支方法（附常用git配置命令）" class="headerlink" title="11、git克隆远程仓库的指定分支方法（附常用git配置命令）"></a>11、git克隆远程仓库的指定分支方法（附常用git配置命令）</h3><p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/yujia_666/article/details/115362190">https://blog.csdn.net/yujia_666/article/details/115362190</a></p>
<h4 id="（1）普通克隆方式"><a href="#（1）普通克隆方式" class="headerlink" title="（1）普通克隆方式"></a>（1）普通克隆方式</h4><ul>
<li>git clone &lt;远程仓库地址&gt;</li>
<li>这种克隆方式默认是克隆master主分支，</li>
<li>而且通过命令 git branch –list 能看到克隆后在本地也只有这一个分支，</li>
<li>如果再通过新建分支再拉取指定分支，甚至可能还需要解决冲突，太繁琐。</li>
</ul>
<h4 id="（2）克隆远程指定分支"><a href="#（2）克隆远程指定分支" class="headerlink" title="（2）克隆远程指定分支"></a>（2）克隆远程指定分支</h4><p>那么，如何快速有效的直接克隆远程指定分支？</p>
<p>只需要一条命令：</p>
<p>git clone -b &lt;指定分支名&gt; &lt;远程仓库地址&gt;</p>
<p> git clone -b eeat&#x2F;ssion <a target="_blank" rel="noopener" href="https://gitxxx.com/orm/mmm.git">https://gitxxx.com/orm/mmm.git</a><br>会自动在克隆该分支在本地，同样克隆后本地只有这一个分支。</p>
<h4 id="（3）常用git配置命令"><a href="#（3）常用git配置命令" class="headerlink" title="（3）常用git配置命令"></a>（3）常用git配置命令</h4><p>Git基础使用教程 - 老_张 - 博客园</p>
<p>首先，我们创建dev分支，然后切换到dev分支：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b dev</span></span><br><span class="line">Switched to a new branch &#x27;dev&#x27;</span><br></pre></td></tr></table></figure>

<p>git checkout命令加上-b参数表示创建并切换，相当于以下两条命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch dev</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout dev</span></span><br><span class="line">Switched to branch &#x27;dev&#x27;</span><br></pre></td></tr></table></figure>

<p>然后，用git branch命令查看当前分支：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch</span></span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>

<p>git branch命令会列出所有分支，当前分支前面会标一个*号。</p>
<p>然后，我们就可以在dev分支上正常提交，比如对readme.txt做个修改，加上一行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Creating a new branch is quick.</span><br></pre></td></tr></table></figure>

<p>然后提交：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add readme.txt</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;branch test&quot;</span></span></span><br><span class="line">[dev b17d20e] branch test</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push</span></span><br></pre></td></tr></table></figure>

<p>现在，dev分支的工作完成，我们就可以切换回master分支：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout master</span></span><br><span class="line">Switched to branch &#x27;master&#x27;</span><br></pre></td></tr></table></figure>

<p>切换回master分支后，再查看一个readme.txt文件，刚才添加的内容不见了！因为那个提交是在dev分支上，而master分支此刻的提交点并没有变：</p>
<p><img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240905160429304.png" alt="image-20240905160429304"></p>
<p>现在，我们把dev分支的工作成果<strong>合并到master分支</strong>上：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge dev</span></span><br><span class="line">Updating d46f35e..b17d20e</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.txt | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>

<p>git merge命令用于合并指定分支到当前分支。合并后，再查看readme.txt的内容，就可以看到，和dev分支的最新提交是完全一样的。</p>
<p>注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交，所以合并速度非常快。</p>
<p>当然，也不是每次合并都能Fast-forward，我们后面会讲其他方式的合并。</p>
<p>合并完成后，就可以放心地删除dev分支了：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -d dev</span></span><br><span class="line">Deleted branch dev (was b17d20e).</span><br></pre></td></tr></table></figure>

<p>删除后，查看branch，就只剩下master分支了：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch</span></span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>因为创建、合并和删除分支非常快，所以Git鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在master分支上工作效果是一样的，但过程更安全。</p>
<p>switch<br>我们注意到切换分支使用git checkout <branch>，而前面讲过的撤销修改则是git checkout – <file>，同一个命令，有两种作用，确实有点令人迷惑。</p>
<p>实际上，切换分支这个动作，用switch更科学。因此，最新版本的Git提供了新的git switch命令来切换分支：</p>
<p>创建并切换到新的dev分支，可以使用：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git switch -c dev</span></span><br></pre></td></tr></table></figure>

<p>直接切换到已有的master分支，可以使用：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git switch master</span></span><br></pre></td></tr></table></figure>

<p>使用新的git switch命令，比git checkout要更容易理解。</p>
<p>小结<br>Git鼓励大量使用分支：</p>
<ul>
<li>查看分支：git branch</li>
<li>创建分支：git branch <name></li>
<li>切换分支：git checkout <name>或者git switch <name></li>
<li>创建+切换分支：git checkout -b <name>或者git switch -c <name></li>
<li>合并某分支到当前分支：git merge <name></li>
<li>删除分支：git branch -d <name></li>
</ul>
<h3 id="12、Git提示“warning-LF-will-be-replaced-by-CRLF-”最详细解释-解决方案"><a href="#12、Git提示“warning-LF-will-be-replaced-by-CRLF-”最详细解释-解决方案" class="headerlink" title="12、Git提示“warning: &#x3D;&#x3D;LF will be replaced by CRLF&#x3D;&#x3D;”最详细解释+解决方案"></a>12、Git提示“warning: &#x3D;&#x3D;LF will be replaced by CRLF&#x3D;&#x3D;”最详细解释+解决方案</h3><p>文章地址：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/586324681">Git提示“warning: LF will be replaced by CRLF”最详细解释+解决方案 - 知乎 (zhihu.com)</a></p>
<h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4><p>如果只是在window上</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">以下任选其一</span><br><span class="line">关闭自动转换（当前仓库）</span><br><span class="line">git config core.autocrlf false</span><br><span class="line">关闭自动转换（全局仓库）</span><br><span class="line">git config --global core.autocrlf false</span><br></pre></td></tr></table></figure>

<p>如果需要转换设置为true也可以 只是警告 看起来难看</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">关闭自动转换（当前仓库）</span><br><span class="line">git config core.autocrlf true</span><br><span class="line">关闭自动转换（全局仓库）</span><br><span class="line">git config --global core.autocrlf true</span><br></pre></td></tr></table></figure>

<p>检查git的设置结果</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">git config core.autocrlf</span><br></pre></td></tr></table></figure>

<h4 id="接下来看文章："><a href="#接下来看文章：" class="headerlink" title="接下来看文章："></a>接下来看文章：</h4><h5 id="1-问题描述："><a href="#1-问题描述：" class="headerlink" title="1.问题描述："></a>1.问题描述：</h5><p>windows平台下使用git add，git deploy 文件时经常出现“warning: LF will be replaced by CRLF” 的提示</p>
<img src="https://typroamarkdown.oss-cn-chengdu.aliyuncs.com/image-20240902144827481.png" alt="image-20240902144827481" style="zoom:50%;" />



<h5 id="2-注解："><a href="#2-注解：" class="headerlink" title="2.注解："></a>2.注解：</h5><p>(1)<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E6%8D%A2%E8%A1%8C%E7%AC%A6&zhida_source=entity&is_preview=1">换行符</a>‘\n’和回车符‘\r’</p>
<p>在计算机还没有出现之前，有一种叫做<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E7%94%B5%E4%BC%A0%E6%89%93%E5%AD%97%E6%9C%BA&zhida_source=entity&is_preview=1">电传打字机</a>（Teletype Model 33）的玩意，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时候，要用去0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。</p>
<p>于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界；另一个叫做“换行”，告诉打字机把纸向下移一行。</p>
<p><strong>(A)回车符就是回到一行的开头，用符号r表示，十进制ASCII代码是13，<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6&zhida_source=entity&is_preview=1">十六进制</a>代码为0x0D，回车（return）；</strong></p>
<p><strong>(B)换行符就是另起一行，用n符号表示，ASCII代码是10，十六制为0x0A， 换行（newline）。</strong></p>
<h5 id="2-LF和CRLF区别"><a href="#2-LF和CRLF区别" class="headerlink" title="(2)LF和CRLF区别"></a>(2)LF和CRLF区别</h5><p><strong>LF: Line Feed换行</strong></p>
<p><strong>feed v.喂养,供给;将(信息)输入 line feed直译是”将行输入”,再意译”换行”</strong></p>
<p><strong>CRLF: Carriage Return Line Feed 回车换行</strong></p>
<p>Carriage n.马车,火车车厢;运输费用 在carriage return中,carriage译为“车”,return译为“回”</p>
<p>在过去的机械打字机上有个部件叫「字车」（Typewriter carriage），每打一个字符，字车前进一格，打完一行后，我们需要让字车回到起始位置，而“Carriage Return”键最早就是这个作用，因此被直接翻译为「回车」。尽管后来回车键的作用已经不止” 倒回字车”那么简单，但这个译名一直被保留下来。</p>
<h5 id="3-分析问题"><a href="#3-分析问题" class="headerlink" title="3.分析问题"></a>3.分析问题</h5><p>这句警告出现的原因：我们在Windows平台下git add任意<strong>Windows平台编辑过的代码文本的换行默认都是CRLF</strong>，所以一般git add不会出错。但是如果如下的(i)或者(ii)发生了，那我们再进行git add这个LF换行的文件时，会出现这个警告” LF will be replaced by CRLF in …”。</p>
<ul>
<li><strong>(i)我们的团队成员是Linux&#x2F;Mac平台并参与了项目的git提交</strong></li>
<li><strong>(ii)我们Windows平台的某些软件会生成换行是LF的代码文本(如<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E6%9D%8E%E4%BF%8A%E5%BE%B7&zhida_source=entity&is_preview=1">李俊德</a>git add的是Webstorm生成的HTML项目中隐藏文件夹.idea中的workspace.xml,这个xml文件换行是LF</strong></li>
</ul>
<p>(1)不同操作系统下，处理行尾结束符的方法是不同的：</p>
<ul>
<li><p><strong>(A)Windows和Dos下：使用回车（CR）和换行（LF）两个字符来结束一行，回车+换行(CR+LF)，即“\r\n”；</strong></p>
</li>
<li><p><strong>(B)Unix和mc下：只使用换行（LF）一个字符来结束一行，即“\n”；</strong></p>
</li>
<li><p><strong>(最早Mac每行结尾是回车CR 即’\r’，后mac os x 也投奔了 unix)</strong></p>
</li>
</ul>
<p>(2)Git下处理“换行”（line ending）</p>
<p>​	<strong>core.autocrlf是git中负责处理line ending的变量，可以设置3个值：true，false，input。</strong></p>
<ul>
<li><p>(A)设置为true【config –global core.autocrlf true】</p>
<p>​	<strong>当设置成true时，这意味着你在任何时候添加(add)文件到git仓库时，git都会视为它是一个<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6&zhida_source=entity&is_preview=1">文本文件</a>(text file)。</strong>它将把crlf变成LF。</p>
</li>
<li><p>(B)设置为false【config –global core.autocrlf false】</p>
<p>​	当设置成false时，line endings将不做转换操作。文本文件保持原来的样子。</p>
</li>
<li><p>(C)设置为input时，添加文件git仓库时，git把crlf编程lf。当有人Check代码时还是lf方式。因此在window操作系统下，不要使用这个设置。</p>
</li>
</ul>
<h5 id="4-此问题的负面影响"><a href="#4-此问题的负面影响" class="headerlink" title="4.此问题的负面影响"></a>4.此问题的负面影响</h5><p>格式化与多余的空白字符，特别是在跨平台情况下，有时候是一个令人发指的问题。由于<a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E7%BC%96%E8%BE%91%E5%99%A8&zhida_source=entity&is_preview=1">编辑器</a>的不同或者文件行尾的换行符在 Windows 下被替换了，一些细微的空格变化会不经意地混入提交，造成麻烦。虽然这是小问题，但会极大地扰乱跨平台协作。</p>
<p>假如你正在Windows上写程序;又或者你正在和其他人合作，他们在Windows上编程，而你却在其他系统上，在这些情况下，你可能会遇到行尾结束符问题。此问题的全部负面影响如下：</p>
<p><strong>(1)一个直接后果是，Unix&#x2F;Mac系统下的一个“多行文本”文件在Windows里打开的话，“多行文本”会变成“一行”。（原因：Unix&#x2F;Mac换行只用了换行符‘\n’，而Windows的换行要求是回车换行符’\r\n’，因此Unix&#x2F;Mac中的“多行文本”的换行不符合Windows的规则，所以Windows对这些不符合换行规则的“多行文本”全部按照“没有换行”处理，所以导致“多行文本”会变成“一行”）</strong></p>
<p><strong>(2)而Windows里的文件在Unix&#x2F;Mac下打开的话，在每行的结尾可能会多出一个^M符号。</strong></p>
<p><strong>(3)Linux保存的文件在windows上用记事本看的话会出现黑点。</strong></p>
<p>5.解决此问题的方案</p>
<p>(1)如果我们目前是Window平台并出现该警告，啥也别做就行，虽然这个警告难看，但这个警告能保证我们项目团队正常跨系统git操作代码</p>
<p>因为git的Windows <a target="_blank" rel="noopener" href="https://zhida.zhihu.com/search?q=%E5%AE%A2%E6%88%B7%E7%AB%AF&zhida_source=entity&is_preview=1">客户端</a>基本都会默认设置 core.autocrlf&#x3D;true（我们可通过git config core.autocrlf命令查询我们的Windows上该属性是否默认true。如不是true,通过config –global core.autocrlf true命令设置该属性为true），而“<strong>core.autocrlf&#x3D;true</strong>”有以下3个功能来避免我们出错：</p>
<ul>
<li><p>(A)在“把 modified修改过的文件git add到暂存区stage”时，Git自动把LF转换成CRLF,并给出那条警告”LF will be replaced by CRLF”</p>
</li>
<li><p>(B)在把modified修改过的文件由暂存区(stage) 提交(commit)到版本库&#x2F;仓库(repository)”时，Git自动把CRLF转换成LF</p>
</li>
<li><p>(C)在“用 检出&#x2F;git checkout切换到指定分支 或 git clone克隆远程版本库”来加载代码时，Git自动把LF转换成CRLF</p>
</li>
</ul>
<p>提到的那句警告：“IF will be replaced by CRLF in <file-name>”</p>
<p>这句警告的下面其实还有一句很重要的话：The file will have its original line endings in your working directory.</p>
<p>(翻译：”在工作区里，这个文件会保留它原本的换行符”)</p>
<p>(2)如果我们是Linux 或 Mac平台,我们不需要5(1)(C)的功能“在检出或克隆远程版本库时，Git自动把LF转换成CRLF”。然而当一个CRLF作为行结束符的文件在我们的Linux 或 Mac平台不小心被引入时，你肯定想让 Git 修正。 所以，你可以通过config –global core.autocrlf input命令把 core.autocrlf 设置成 input 来告诉 Git 在提交(commit)时把CRLF转换成LF，检出(git checkout)时不转换</p>
<p>(1)+(2):这样在 Windows 上的检出(checkout)文件中会保留CRLF，而在 Mac 和 Linux 上，以及版本库中会保留LF，从而保证我们项目团队正常跨系统git操作代码</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">小鹏</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/09/09/JavaWeb-Learing/Web-Learning/">http://example.com/2024/09/09/JavaWeb-Learing/Web-Learning/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">小鹏的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaWeb-Learing/">JavaWeb-Learing</a></div><div class="post_share"><div class="social-share" data-image="https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/09/09/Linux-Learning/Linux-Learning/" title="Linux-Learning"><img class="cover" src="https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux-Learning</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Web-Learing"><span class="toc-text">Web-Learing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Mybatis-Learning"><span class="toc-text">一、Mybatis-Learning</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81mybatis%E4%BB%8B%E7%BB%8D"><span class="toc-text">1、mybatis介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81lombok-%E7%AE%80%E5%8C%96Data%E6%95%B0%E6%8D%AE%E7%B1%BB"><span class="toc-text">2、lombok-简化Data数据类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%EF%BC%88Connection%EF%BC%89"><span class="toc-text">3、数据库连接池（Connection）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81-mybatis%E4%BD%BF%E7%94%A8%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">4、&#x3D;&#x3D;mybatis使用基本流程&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E9%A2%84%E7%BC%96%E8%AF%91SQL%E4%B8%8ESQL%E6%B3%A8%E5%85%A5"><span class="toc-text">5、预编译SQL与SQL注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%8F%82%E6%95%B0%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-text">6、参数占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81Delete%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">7、Delete删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81Insert%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">8、Insert增加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%BB%E9%94%AE%E8%BF%94%E5%9B%9E"><span class="toc-text">（1）主键返回</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81Update%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-text">9、Update更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81Select%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-text">10、Select查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-mybatis%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84%E5%BC%80%E5%85%B3"><span class="toc-text">(1)&#x3D;&#x3D;mybatis驼峰命名自动映射开关&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">(2)条件查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81XML%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text">11、XML映射文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89-%E8%A7%84%E8%8C%83"><span class="toc-text">（1）&#x3D;&#x3D;规范&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89xml%E6%A0%BC%E5%BC%8F"><span class="toc-text">（2）xml格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81-Mybatis-%E5%8A%A8%E6%80%81SQL"><span class="toc-text">12、&#x3D;&#x3D;Mybatis-动态SQL&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89-if-where-set-%E6%A0%87%E7%AD%BE"><span class="toc-text">（1）&lt; if &gt; ,&lt; where &gt;,&lt; set &gt;标签</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%A6%82%E8%BF%B0"><span class="toc-text">①概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%A1%88%E4%BE%8B-%E5%8A%A8%E6%80%81%E6%9B%B4%E6%96%B0"><span class="toc-text">②案例-&#x3D;&#x3D;动态更新&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-foreach-%E6%A0%87%E7%AD%BE-%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="toc-text">（2）&lt; foreach &gt;标签-批量操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89-sql-include-%E6%A0%87%E7%AD%BE"><span class="toc-text">（3）&lt; sql &gt;,&lt; include &gt;标签</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81JavaWeb-Learning"><span class="toc-text">二、JavaWeb-Learning</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81SpringBootWeb%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E5%92%8C%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6"><span class="toc-text">1、SpringBootWeb请求响应和分层解耦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%B7%E6%B1%82"><span class="toc-text">1. 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-Postman"><span class="toc-text">1.1 Postman</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-1-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.1.1 介绍</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-1-2-%E5%AE%89%E8%A3%85"><span class="toc-text">1.1.2 安装</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0"><span class="toc-text">1.2 简单参数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-1-%E5%8E%9F%E5%A7%8B%E6%96%B9%E5%BC%8F"><span class="toc-text">1.2.1 原始方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-2-SpringBoot%E6%96%B9%E5%BC%8F"><span class="toc-text">1.2.2 SpringBoot方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-3-%E5%8F%82%E6%95%B0%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="toc-text">1.2.3 参数名不一致</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E5%AE%9E%E4%BD%93%E5%8F%82%E6%95%B0"><span class="toc-text">1.3 实体参数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-1-%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1"><span class="toc-text">1.3.1 简单实体对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-3-2-%E5%A4%8D%E6%9D%82%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1"><span class="toc-text">1.3.2 复杂实体对象</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-%E6%95%B0%E7%BB%84%E9%9B%86%E5%90%88%E5%8F%82%E6%95%B0"><span class="toc-text">1.4 数组集合参数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-4-1-%E6%95%B0%E7%BB%84"><span class="toc-text">1.4.1 数组</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-4-2-%E9%9B%86%E5%90%88"><span class="toc-text">1.4.2 集合</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-%E6%97%A5%E6%9C%9F%E5%8F%82%E6%95%B0"><span class="toc-text">1.5 日期参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-6-JSON%E5%8F%82%E6%95%B0"><span class="toc-text">1.6 JSON参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-7-%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0"><span class="toc-text">1.7 路径参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%93%8D%E5%BA%94"><span class="toc-text">2. 响应</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-ResponseBody"><span class="toc-text">2.1 @ResponseBody</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C"><span class="toc-text">2.2 统一响应结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-%E6%A1%88%E4%BE%8B"><span class="toc-text">2.3 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-1-%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-text">2.3.1 需求说明</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-2-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">2.3.2 准备工作</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-3-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.3.3 实现步骤</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-4-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.3.4 代码实现</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-5-%E6%B5%8B%E8%AF%95"><span class="toc-text">2.3.5 测试</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-3-6-%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">2.3.6 问题分析</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6"><span class="toc-text">3. 分层解耦</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-text">3.1 三层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-1-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.1.1 介绍</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-1-2-%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86"><span class="toc-text">3.1.2 代码拆分</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%88%86%E5%B1%82-%E8%A7%A3%E8%80%A6"><span class="toc-text">3.2 分层&#x3D;&#x3D;解耦&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-1-%E8%80%A6%E5%90%88%E9%97%AE%E9%A2%98"><span class="toc-text">3.2.1 耦合问题</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-2-%E8%A7%A3%E8%80%A6%E6%80%9D%E8%B7%AF"><span class="toc-text">3.2.2 &#x3D;&#x3D;解耦思路&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-IOC-DI"><span class="toc-text">3.3 &#x3D;&#x3D;IOC&amp;DI&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-1-IOC-DI%E5%85%A5%E9%97%A8"><span class="toc-text">3.3.1 &#x3D;&#x3D;IOC&amp;DI入门&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-IOC%E8%AF%A6%E8%A7%A3"><span class="toc-text">3.3.2 IOC详解</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-1-bean%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-text">3.3.2.1 bean的声明</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-2-%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F"><span class="toc-text">3.3.2.2 组件扫描</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-3-DI%E8%AF%A6%E8%A7%A3"><span class="toc-text">3.3.3 DI详解</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text"></span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91"><span class="toc-text">三、前后端分离开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%A1%88%E4%BE%8B%E9%A1%B9%E7%9B%AE-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">1、案例项目&#x3D;&#x3D;环境搭建&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-text">2、前后端分离开发规范</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%89%8D%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="toc-text">（1）前后端开发框架示意图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-Restful%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-text">（2）&#x3D;&#x3D;Restful开发规范&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89-Result%E7%B1%BB%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%9C"><span class="toc-text">（3）&#x3D;&#x3D;Result类统一响应结果&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-text">（4）开发流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B"><span class="toc-text">3、业务流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%9F%A5%E8%AF%A2%E9%83%A8%E9%97%A8"><span class="toc-text">（1）查询部门</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8"><span class="toc-text">（2）删除部门</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8"><span class="toc-text">（3）新增部门</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89RequestMapping-%E7%AE%80%E5%8C%96%E8%B7%AF%E5%BE%84%E5%90%8D"><span class="toc-text">（4）RequestMapping-简化路径名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">（5）&#x3D;&#x3D;分页查询&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E8%AF%AD%E6%B3%95"><span class="toc-text">①语法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-text">代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E7%AE%80%E5%8C%96%E6%8F%92%E4%BB%B6-PageHelper"><span class="toc-text">②分页查询简化插件-PageHelper</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E6%8F%92%E4%BB%B6"><span class="toc-text">引入插件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-1"><span class="toc-text">代码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#PageHelper%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-ThreadLocal"><span class="toc-text">PageHelper实现原理-ThreadLocal</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">③案例分析</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E5%88%A0%E9%99%A4%E5%92%8C%E4%BF%AE%E6%94%B9%E5%91%98%E5%B7%A5"><span class="toc-text">（6）删除和修改员工</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89-%E4%BB%A3%E7%A0%81Code"><span class="toc-text">（7）&#x3D;&#x3D;代码Code&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0Controller%E5%B1%82"><span class="toc-text">①Controller层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1service%E5%B1%82"><span class="toc-text">②service层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2mapper%E5%B1%82"><span class="toc-text">③mapper层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3pojo%E5%B1%82-Plain-Old-Java-Object-%E5%AE%9E%E4%BE%8B%E5%B1%82"><span class="toc-text">④pojo层(Plain Old Java Object)-实例层</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">（8）&#x3D;&#x3D;文件上传&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-text">①前端页面三要素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8E%A5%E5%8F%97%E6%96%87%E4%BB%B6"><span class="toc-text">②服务端接受文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6%EF%BC%88%E6%9C%AC%E5%9C%B0%EF%BC%89"><span class="toc-text">③服务端保存文件（本地）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#MultipartFile%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">MultipartFile常用方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E5%94%AF%E4%B8%80%E6%96%87%E4%BB%B6%E5%90%8DUUID"><span class="toc-text">构建唯一文件名UUID</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6"><span class="toc-text">文件上传大小限制</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E4%BA%91%E6%9C%8D%E5%8A%A1%EF%BC%88%E9%98%BF%E9%87%8C%E4%BA%91OSS%EF%BC%89"><span class="toc-text">④云服务（阿里云OSS）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-text">&#x3D;&#x3D;添加员工信息&#x3D;&#x3D;</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">四、配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E5%8C%96%EF%BC%88properties%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-text">1、参数配置化（properties文件）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89application-properties%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%EF%BC%88%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91oss%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-text">（1）application.properties文件配置（配置阿里云oss配置）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%98%BF%E9%87%8C%E4%BA%91%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%82%E6%95%B0%E6%98%A0%E5%B0%84%EF%BC%88-Value-%E2%80%9C-xxx-%E2%80%9D-%EF%BC%89"><span class="toc-text">（2）阿里云工具类参数映射（@Value(“${xxx}”)）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E6%A0%BC%E5%BC%8F%E5%88%86%E7%B1%BB%E4%B8%8E%E6%AF%94%E8%BE%83-properties-yaml"><span class="toc-text">2、配置格式分类与比较(properties&#x2F;yaml)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89yml-yaml%E6%96%87%E4%BB%B6%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-text">（1）yml&#x2F;yaml文件基本语法与数据格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-yaml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">（2）&#x3D;&#x3D;properties配置文件-&gt;yaml配置文件&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%8F%82%E6%95%B0%E5%8C%96%E9%85%8D%E7%BD%AE%E7%9A%84%E7%AE%80%E5%8C%96"><span class="toc-text">（3）参数化配置的简化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89yaml%E9%85%8D%E7%BD%AE%E5%85%B7%E6%9C%89%E6%8F%90%E7%A4%BA%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">（4）yaml配置具有提示的依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89-Vaule%E6%96%B9%E5%BC%8F%E5%92%8C-ConfigurationProperties%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">（5）@Vaule方式和@ConfigurationProperties的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8-ConfigurationProperties%E5%90%8E%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">（6）阿里云使用@ConfigurationProperties后的工具类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">五、登录校验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%9B%9B%E7%A7%8D%E8%AF%B7%E6%B1%82get%E3%80%81post%E3%80%81put%E3%80%81delete"><span class="toc-text">1、四种请求get、post、put、delete</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GET"><span class="toc-text">GET</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST"><span class="toc-text">POST</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PUT"><span class="toc-text">PUT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DELETE"><span class="toc-text">DELETE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%99%BB%E5%BD%95%E6%97%B6%EF%BC%8C%E4%BD%BF%E7%94%A8POST%E8%AF%B7%E6%B1%82%E8%80%8C%E4%B8%8D%E6%98%AFGET%E8%AF%B7%E6%B1%82"><span class="toc-text">2、登录时，使用POST请求而不是GET请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E5%85%A8%E6%80%A7%EF%BC%9A"><span class="toc-text">1. 安全性：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E6%8F%90%E4%BA%A4%E7%9A%84%E8%AF%AD%E4%B9%89%EF%BC%9A"><span class="toc-text">2. 数据提交的语义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B9%82%E7%AD%89%E6%80%A7%EF%BC%9A"><span class="toc-text">3. 幂等性：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%81%BF%E5%85%8DURL%E9%95%BF%E5%BA%A6%E9%99%90%E5%88%B6%EF%BC%9A"><span class="toc-text">4. 避免URL长度限制：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E9%81%B5%E5%BE%AA%E8%A1%8C%E4%B8%9A%E6%83%AF%E4%BE%8B%EF%BC%9A"><span class="toc-text">5. 遵循行业惯例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%99%BB%E5%BD%95%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">3、登录基础功能实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">4、登录校验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C%E6%A6%82%E5%BF%B5"><span class="toc-text">（1）登录校验概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF%E4%B8%8E%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E6%8A%80%E6%9C%AF%EF%BC%88Cookie%E3%80%81Session%E3%80%81%E4%BB%A4%E7%89%8C%EF%BC%89"><span class="toc-text">（2）会话技术与会话跟踪技术（Cookie、Session、令牌）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA%E6%96%B9%E6%A1%88-Cookie%E5%92%8CSession"><span class="toc-text">（3）会话跟踪方案-&#x3D;&#x3D;Cookie和Session&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#0%E3%80%81%E6%96%B9%E6%A1%88%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-text">0、方案的对比</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E8%AF%B7%E6%B1%82%E7%99%BB%E5%BD%95"><span class="toc-text">1. 用户请求登录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E5%87%AD%E8%AF%81"><span class="toc-text">2. 服务器验证用户凭证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BASession%E5%92%8CCookie"><span class="toc-text">3. &#x3D;&#x3D;创建Session和Cookie&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8Cookie"><span class="toc-text">4. &#x3D;&#x3D;客户端存储Cookie&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%90%8E%E7%BB%AD%E8%AF%B7%E6%B1%82%E8%87%AA%E5%8A%A8%E6%90%BA%E5%B8%A6Cookie"><span class="toc-text">5. &#x3D;&#x3D;后续请求自动携带Cookie&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E9%AA%8C%E8%AF%81Session%E5%B9%B6%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"><span class="toc-text">6. 验证Session并处理请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E4%BC%9A%E8%AF%9D%E5%A4%B1%E6%95%88"><span class="toc-text">7. 会话失效</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91"><span class="toc-text">8. 安全考虑</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-%E6%89%A9%E5%B1%95%EF%BC%9A%E4%BD%BF%E7%94%A8JWT%E6%9B%BF%E4%BB%A3Session"><span class="toc-text">9. 扩展：使用JWT替代Session</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-%E4%BB%A3%E7%A0%81Code"><span class="toc-text">10.&#x3D;&#x3D;代码Code&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89JWT%E4%BB%A4%E7%89%8C"><span class="toc-text">（4）JWT令牌</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E7%AE%80%E4%BB%8B"><span class="toc-text">①简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1JWT%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B%E4%B8%8E%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">②JWT详细流程与优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E8%AF%B7%E6%B1%82"><span class="toc-text">1. 用户登录请求</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E5%87%AD%E8%AF%81-1"><span class="toc-text">2. 服务器验证用户凭证</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E7%94%9F%E6%88%90JWT%E4%BB%A4%E7%89%8C"><span class="toc-text">3. 生成JWT令牌</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Header%EF%BC%88%E5%A4%B4%E9%83%A8%EF%BC%89"><span class="toc-text">Header（头部）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Payload%EF%BC%88%E8%B4%9F%E8%BD%BD%EF%BC%89"><span class="toc-text">Payload（负载）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Signature%EF%BC%88%E7%AD%BE%E5%90%8D%EF%BC%89"><span class="toc-text">Signature（签名）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E8%BF%94%E5%9B%9EJWT%E4%BB%A4%E7%89%8C"><span class="toc-text">4. 返回JWT令牌</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8JWT"><span class="toc-text">5. &#x3D;&#x3D;客户端存储JWT&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9C%A8%E5%90%8E%E7%BB%AD%E8%AF%B7%E6%B1%82%E4%B8%AD%E5%8F%91%E9%80%81JWT"><span class="toc-text">6. &#x3D;&#x3D;客户端在后续请求中发送JWT&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%AA%8C%E8%AF%81JWT"><span class="toc-text">7. 服务器验证JWT</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%B9%B6%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94"><span class="toc-text">8. 处理请求并返回响应</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-%E4%BB%A4%E7%89%8C%E7%BB%AD%E6%9C%9F%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-text">9. 令牌续期（可选）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91"><span class="toc-text">10. 安全考虑</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#JWT%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">JWT的优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#JWT%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text">&#x3D;&#x3D;JWT的缺点&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2JWT%E7%9A%84-%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5%E5%92%8C%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">③JWT的&#x3D;&#x3D;依赖导入和工具类&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96"><span class="toc-text">依赖</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">工具类</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3JWT%E7%9A%84%E6%A0%A1%E9%AA%8C%E4%B8%8E%E7%94%9F%E6%88%90"><span class="toc-text">④JWT的校验与生成</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%EF%BC%88%E5%AE%A2%E6%88%B7%E7%AB%AF%E3%80%81%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%89%E6%88%90%E5%8A%9F%E7%99%BB%E5%BD%95%E5%90%8E%E8%8E%B7%E5%8F%96%E5%88%B0%E5%AF%B9%E5%BA%94%E7%9A%84jwt%E4%BB%A4%E7%89%8C%E5%B9%B6%E5%AD%98%E5%82%A8%E5%88%B0-Application%E4%B8%8B%E7%9A%84Local-Storage%E7%9B%AE%E5%BD%95%E4%B8%AD-%EF%BC%8C-%E4%B9%8B%E5%90%8E%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E5%87%BA%E7%9A%84%E8%AF%B7%E6%B1%82%E9%83%BD%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%B0%86%E8%AF%A5jwt%E4%BB%A4%E7%89%8C%E6%90%BA%E5%B8%A6%E5%88%B0%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%AD%E7%9A%84%E7%9A%84token%E4%B8%AD-%E3%80%82%E4%B9%8B%E5%90%8E%E5%86%8D%E8%BF%9B%E8%A1%8C%E6%A0%A1%E9%AA%8Cjwt%E4%BB%A4%E7%89%8C%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7%E3%80%82"><span class="toc-text">前端（客户端、浏览器）成功登录后获取到对应的jwt令牌并存储到&#x3D;&#x3D;Application下的Local Storage目录中&#x3D;&#x3D;，  &#x3D;&#x3D;之后向服务器发出的请求都会自动将该jwt令牌携带到请求头中的的token中&#x3D;&#x3D;。之后再进行校验jwt令牌的有效性。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89-Filter%E8%BF%87%E6%BB%A4%E5%99%A8-%E5%AF%B9JWT%E4%BB%A4%E7%89%8C%E5%AE%9E%E7%8E%B0%E7%BB%9F%E4%B8%80%E6%A3%80%E9%AA%8C%E4%B8%8E%E6%8B%A6%E6%88%AA%EF%BC%89"><span class="toc-text">（5）&#x3D;&#x3D;Filter过滤器&#x3D;&#x3D;(对JWT令牌实现统一检验与拦截）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%A6%82%E8%BF%B0-1"><span class="toc-text">①概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">②快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Filter%E7%B1%BB"><span class="toc-text">Filter类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-text">启动类</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2Filter%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">③Filter的执行流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3Filter%E7%9A%84%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84"><span class="toc-text">④Filter的拦截路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4Filter%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE"><span class="toc-text">⑤Filter的过滤器链</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5-Filter%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C-JWT%E4%BB%A4%E7%89%8C%E6%9C%89%E6%95%88%E6%80%A7"><span class="toc-text">⑥&#x3D;&#x3D;Filter登录校验&#x3D;&#x3D;JWT令牌有效性</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%9B%BA%E5%AE%9A%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-text">返回固定错误信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Filter%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">Filter登录校验流程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E5%AF%B9%E8%B1%A1%E5%BF%AB%E9%80%9F%E8%BD%ACJSON%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">阿里对象快速转JSON的依赖</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E6%8B%A6%E6%88%AA%E5%99%A8Interceptor"><span class="toc-text">（6）拦截器Interceptor</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%A6%82%E8%BF%B0-2"><span class="toc-text">①概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-1"><span class="toc-text">②快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%99%A8LoginCheckInterceptor%E7%B1%BB"><span class="toc-text">连接器LoginCheckInterceptor类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BBWebConfig"><span class="toc-text">配置类WebConfig</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84"><span class="toc-text">③拦截器的拦截路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">④拦截器的执行流程</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Tomcat%E6%98%AF%E4%B8%80%E4%B8%AAServlet%E5%AE%B9%E5%99%A8%EF%BC%8C%E5%8F%AA%E8%83%BD%E8%AF%86%E5%88%ABServlet%E7%A8%8B%E5%BA%8F%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%ABController%E7%A8%8B%E5%BA%8F-%EF%BC%8C"><span class="toc-text">&#x3D;&#x3D;Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序&#x3D;&#x3D;，</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%80%E4%BB%A5spring%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E4%B8%AA-%E5%89%8D%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%99%A8DispatcherServlet-%EF%BC%8C%E6%8E%A5%E5%8F%97%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%86%8D%E5%B0%86%E8%BF%99%E4%BA%9B%E8%AF%B7%E6%B1%82%E8%BD%AC%E7%BB%99Controller%EF%BC%8C%E8%AE%BF%E9%97%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E6%8E%A5%E5%8F%A3%E3%80%82"><span class="toc-text">所以spring提供了一个&#x3D;&#x3D;前端控制器DispatcherServlet&#x3D;&#x3D;，接受前端的请求，再将这些请求转给Controller，访问对应的接口。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C-jWT%E4%BB%A4%E7%89%8C%E6%9C%89%E6%95%88%E6%80%A7"><span class="toc-text">⑤&#x3D;&#x3D;拦截器登录校验&#x3D;&#x3D;jWT令牌有效性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">六、Tomcat服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-text">1、概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89Tomcat%E6%98%AF%E4%B8%80%E4%B8%AAServlet%E5%AE%B9%E5%99%A8%EF%BC%8C%E5%8F%AA%E8%83%BD%E8%AF%86%E5%88%ABServlet%E7%A8%8B%E5%BA%8F%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%ABController%E7%A8%8B%E5%BA%8F%EF%BC%8C%E6%89%80%E4%BB%A5spring%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E4%B8%AA%E5%89%8D%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%99%A8DispatcherServlet%EF%BC%8C%E6%8E%A5%E5%8F%97%E5%89%8D%E7%AB%AF%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%86%8D%E5%B0%86%E8%BF%99%E4%BA%9B%E8%AF%B7%E6%B1%82%E8%BD%AC%E7%BB%99Controller%EF%BC%8C%E8%AE%BF%E9%97%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E6%8E%A5%E5%8F%A3%E3%80%82"><span class="toc-text">（1）Tomcat是一个Servlet容器，只能识别Servlet程序，无法识别Controller程序，所以spring提供了一个前端控制器DispatcherServlet，接受前端的请求，再将这些请求转给Controller，访问对应的接口。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SpringBoot%E9%A1%B9%E7%9B%AE%E6%98%AF%E5%9C%A8%E5%86%85%E5%B5%8C%E7%9A%84tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E8%BF%90%E8%A1%8C%E7%9A%84"><span class="toc-text">&#x3D;&#x3D;SpringBoot项目是在内嵌的tomcat服务器上运行的&#x3D;&#x3D;</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">七、异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%80%9D%E8%80%83"><span class="toc-text">1、思考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">2、全局异常处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#RestControllerAdvice%E6%B3%A8%E8%A7%A3%EF%BC%8C%E8%A1%A8%E7%A4%BA%E8%AF%A5%E7%B1%BB%E4%B8%BA%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">@RestControllerAdvice注解，表示该类为全局异常处理器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ExceptionHandler-Exception-class-%E6%B3%A8%E8%A7%A3%EF%BC%8C%E8%A1%A8%E7%A4%BA%E8%AE%BE%E7%BD%AE%E9%9C%80%E8%A6%81%E6%8D%95%E8%8E%B7%E7%9A%84%E5%BC%82%E5%B8%B8%EF%BC%8C%E5%85%B6%E4%B8%AD-Exception-class%E8%A1%A8%E7%A4%BA%E6%8D%95%E8%8E%B7%E6%89%80%E6%9C%89%E5%BC%82%E5%B8%B8-%E3%80%82"><span class="toc-text">@ExceptionHandler(Exception.class)注解，表示设置需要捕获的异常，其中&#x3D;&#x3D;Exception.class表示捕获所有异常&#x3D;&#x3D;。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">八、事务管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">1、事务的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">2、案例分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Spring%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86-Transactional%E6%B3%A8%E8%A7%A3"><span class="toc-text">3、Spring事务管理-&#x3D;&#x3D;@Transactional注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BA%8B%E5%8A%A1%E5%B1%9E%E6%80%A7-rollbackFor"><span class="toc-text">（1）事务属性-&#x3D;&#x3D;rollbackFor&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#spring%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E6%B3%A8%E8%A7%A3-%E8%AF%A5%E6%B3%A8%E8%A7%A3-%E9%BB%98%E8%AE%A4%E5%8F%AA%E4%BC%9A%E5%AF%B9%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8RunTimeException%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%BB%9A-%E3%80%82"><span class="toc-text">spring事务管理注解,该注解&#x3D;&#x3D;默认只会对运行时异常RunTimeException进行回滚&#x3D;&#x3D;。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AErollbackFor%E4%B8%BA%E5%90%8EException-class%E5%8F%AF%E4%BB%A5-%E5%AF%B9%E6%8A%A5%E5%87%BA%E7%9A%84%E6%89%80%E6%9C%89%E5%BC%82%E5%B8%B8%E9%83%BD%E5%8F%AF%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%BB%9A-%E3%80%82"><span class="toc-text">设置rollbackFor为后Exception.class可以&#x3D;&#x3D;对报出的所有异常都可进行回滚&#x3D;&#x3D;。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%BA%8B%E5%8A%A1%E5%B1%9E%E6%80%A7-%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA"><span class="toc-text">（2）事务属性-&#x3D;&#x3D;传播行为&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%E7%9A%84%E4%B8%A4%E5%A4%A7%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-REQUIRES-%E5%92%8C-REQUIRES-NEW"><span class="toc-text">传播行为的两大使用场景-&#x3D;&#x3D;REQUIRES&#x3D;&#x3D;和&#x3D;&#x3D;REQUIRES_NEW&#x3D;&#x3D;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%A7%A3%E6%95%A3%E9%83%A8%E9%97%A8%E5%B9%B6-%E6%B7%BB%E5%8A%A0%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF"><span class="toc-text">（3）解散部门并&#x3D;&#x3D;添加日志信息&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-Transactional%E7%9A%84propagation%E5%B1%9E%E6%80%A7%E5%80%BC%EF%BC%8C%E8%BF%9B%E8%A1%8C%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E7%AE%A1%E7%90%86"><span class="toc-text">&#x3D;&#x3D;设置@Transactional的propagation属性值，进行事务传播管理&#x3D;&#x3D;</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81AOP"><span class="toc-text">九、AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81AOP%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">1、AOP快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89AOP%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">（1）AOP的使用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89AOP%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-text">（2）AOP的概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0AOP%E6%8A%80%E6%9C%AF%EF%BC%88%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%EF%BC%89"><span class="toc-text">①AOP技术（面向切面编程）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%98%AFAOP%E7%9A%84%E4%B8%BB%E6%B5%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">②&#x3D;&#x3D;动态代理是AOP的主流实现&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2Spring-AOP%E6%98%AFSpring%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E6%9C%AF"><span class="toc-text">③Spring AOP是Spring框架中的高级技术</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3-%E5%AF%B9%E7%89%B9%E5%AE%9A%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A8%8B"><span class="toc-text">④ 对特定方法进行编程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E6%80%BB%E7%BB%93"><span class="toc-text">⑤总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89AOP%E7%9A%84%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%85%A5%E5%92%8C%E7%BC%96%E5%86%99%E6%AD%A5%E9%AA%A4"><span class="toc-text">（3）AOP的依赖导入和编写步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">&#x3D;&#x3D;案例代码&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89AOP%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E4%BC%98%E5%8A%BF"><span class="toc-text">（4）AOP的使用场景和优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81AOP%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">2、AOP的核心概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81AOP%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">3、AOP的执行流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81AOP%E7%9A%84%E8%BF%9B%E9%98%B6"><span class="toc-text">4、AOP的进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B"><span class="toc-text">（1）通知类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E4%BA%94%E7%A7%8D%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B%E7%9A%84-%E5%86%85%E9%83%A8%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-text">①五种通知类型的&#x3D;&#x3D;内部执行顺序&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%89%8D%E6%8F%90%EF%BC%9A%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%90%8C%E6%97%B6%E5%8A%A0%E5%85%A5%E4%BA%86%E4%BA%94%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B"><span class="toc-text">前提：对同一个方法同时加入了五种不同的通知类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%80%9A%E7%9F%A5%E9%A1%BA%E5%BA%8F-Order-%E6%95%B0%E5%AD%97-%E6%B3%A8%E8%A7%A3"><span class="toc-text">（2）通知顺序-&#x3D;&#x3D;@Order(数字)注解&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F-Execution"><span class="toc-text">（3）切入点表达式-&#x3D;&#x3D;Execution&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F-execution"><span class="toc-text">①切入点表达式-&#x3D;&#x3D;execution&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E9%80%9A%E9%85%8D%E7%AC%A6-%E5%92%8C"><span class="toc-text">②通配符&#x3D;&#x3D;*和..&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E4%B9%A6%E5%86%99%E5%BB%BA%E8%AE%AE"><span class="toc-text">③书写建议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E4%BE%8B%E5%AD%90"><span class="toc-text">④例子</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F-annotation-%E5%88%A9%E7%94%A8-%E6%B3%A8%E8%A7%A3%E6%A0%87%E8%AF%86"><span class="toc-text">（4）切入点表达式-&#x3D;&#x3D;@annotation&#x3D;&#x3D;(利用&#x3D;&#x3D;注解标识&#x3D;&#x3D;)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-%E7%BC%96%E5%86%99%E6%B3%A8%E8%A7%A3-Test-Annotation"><span class="toc-text">①&#x3D;&#x3D;编写注解&#x3D;&#x3D;@Test_Annotation</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E7%BB%99%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84-%E6%96%B9%E6%B3%95%E6%A0%87%E8%AF%86%E6%B3%A8%E8%A7%A3-Test-Annotation"><span class="toc-text">②给项目中的&#x3D;&#x3D;方法标识注解&#x3D;&#x3D;@Test_Annotation</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-%EF%BC%9A-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3-Test-Annotation%EF%BC%8C-%E5%BF%85%E9%A1%BB%E6%B7%BB%E5%8A%A0%E5%88%B0service%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95%E4%B8%8A%EF%BC%8C%E4%B8%8D%E8%83%BD%E6%B7%BB%E5%8A%A0%E5%88%B0service%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95%E4%B8%8A-%E3%80%82"><span class="toc-text">&#x3D;&#x3D;注意&#x3D;&#x3D;：&#x3D;&#x3D;自定义注解&#x3D;&#x3D;@Test_Annotation，&#x3D;&#x3D;必须添加到service的实现类的方法上，不能添加到service的接口方法上&#x3D;&#x3D;。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2-%E7%BC%96%E5%86%99%E5%88%87%E9%9D%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">③&#x3D;&#x3D;编写切面表达式&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E6%B5%8B%E8%AF%95%E7%B1%BB-%E6%B5%8B%E8%AF%95"><span class="toc-text">④测试类-测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E7%BB%93%E6%9E%9C"><span class="toc-text">⑤结果</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E8%BF%9E%E6%8E%A5%E7%82%B9-JoinPoint"><span class="toc-text">（5）连接点-&#x3D;&#x3D;JoinPoint&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-Around%E9%80%9A%E7%9F%A5"><span class="toc-text">①&#x3D;&#x3D;@Around通知&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%85%B6%E4%BB%96%E5%9B%9B%E7%A7%8D%E9%80%9A%E7%9F%A5"><span class="toc-text">②其他四种通知</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2Code"><span class="toc-text">③Code</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E6%A1%88%E4%BE%8B-%E6%93%8D%E4%BD%9C%E6%97%A5%E5%BF%97"><span class="toc-text">（6）案例-&#x3D;&#x3D;操作日志&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%A1%88%E4%BE%8B%E8%83%8C%E6%99%AF"><span class="toc-text">①案例背景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90"><span class="toc-text">②思路分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">③实现步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3Code"><span class="toc-text">④Code</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81SpringBoot%E5%8E%9F%E7%90%86%E7%AF%87"><span class="toc-text">十、SpringBoot原理篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">1、配置优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89properties%EF%BC%8Cyml%EF%BC%8Cyaml%E4%B8%89%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">（1）properties，yml，yaml三种配置文件优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-Java%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7-%E5%92%8C-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0-%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">（2）&#x3D;&#x3D;Java系统属性&#x3D;&#x3D;和&#x3D;&#x3D;命令行参数&#x3D;&#x3D;的优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%90%8E%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E5%B1%9E%E6%80%A7-java%E5%B1%9E%E6%80%A7%E5%92%8C%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-text">（3）项目打包后如何配置项目属性(java属性和命令行参数)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#spring-boot-maven-plugin%E6%8F%92%E4%BB%B6"><span class="toc-text">spring-boot-maven-plugin插件</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%89%93%E5%8C%85-jar"><span class="toc-text">①打包-jar</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-target%E7%9B%AE%E5%BD%95-%E5%AF%BB%E6%89%BE%E6%89%93%E5%8C%85%E5%A5%BD%E7%9A%84jar%E5%8C%85"><span class="toc-text">②&#x3D;&#x3D;target目录&#x3D;&#x3D;寻找打包好的jar包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E8%BF%9B%E5%85%A5cmd-%E9%85%8D%E7%BD%AEjava%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7-options-%E5%92%8C%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0-args"><span class="toc-text">③进入cmd-配置java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)和命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A38080"><span class="toc-text">④默认端口8080</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0-args-%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E9%AB%98%E4%BA%8Ejava%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7-options"><span class="toc-text">⑤命令行参数(&#x3D;&#x3D;args&#x3D;&#x3D;)的优先级高于java系统属性(&#x3D;&#x3D;options&#x3D;&#x3D;)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-text">2、Bean对象的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BB%8EIOC%E5%AE%B9%E5%99%A8%E4%B8%AD-%E8%8E%B7%E5%8F%96bean%E5%AF%B9%E8%B1%A1"><span class="toc-text">（1）从IOC容器中&#x3D;&#x3D;获取bean对象&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%88%A9%E7%94%A8-IOC%E5%AE%B9%E5%99%A8%E5%AF%B9%E8%B1%A1-ApplicationContext-%E8%8E%B7%E5%8F%96%E5%85%B6%E4%B8%AD%E6%8C%87%E5%AE%9A%E7%9A%84bean%E5%AF%B9%E8%B1%A1"><span class="toc-text">手动利用&#x3D;&#x3D;IOC容器对象(ApplicationContext)&#x3D;&#x3D;,获取其中指定的bean对象</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89Bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">（2）Bean的作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E4%BA%94%E7%A7%8D%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">①五种作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-Scope-%E5%92%8C-Lazy-%E6%B3%A8%E8%A7%A3"><span class="toc-text">②&#x3D;&#x3D;@Scope&#x3D;&#x3D;和&#x3D;&#x3D;@Lazy&#x3D;&#x3D;注解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%EF%BC%89-Scope%E6%B3%A8%E8%A7%A3%E5%8F%AF%E7%94%A8%E6%9D%A5%E9%85%8D%E7%BD%AEIOC%E5%AE%B9%E5%99%A8%E4%B8%ADBean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">1）@Scope注解可用来配置IOC容器中Bean的作用域</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%EF%BC%89%E7%94%B1%E4%BA%8E%E9%BB%98%E8%AE%A4%E7%9A%84-singleton-%E7%9A%84bean%EF%BC%8C%E6%98%AF%E5%9C%A8-spring%E5%90%AF%E5%8A%A8%E6%97%B6-IOC%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E6%97%B6-%E8%A2%AB%E5%88%9B%E5%BB%BA%E7%9A%84-%EF%BC%8C%E5%8F%AF%E4%BD%BF%E7%94%A8-Lazy%E6%B3%A8%E8%A7%A3%E6%9D%A5%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96-%E5%BB%B6%E8%BF%9F%E5%88%B0%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%BD%BF%E7%94%A8%E6%97%B6%E6%89%8D%E8%A2%AB%E5%88%9B%E5%BB%BA"><span class="toc-text">2）由于默认的&#x3D;&#x3D;singleton&#x3D;&#x3D;的bean，是在&#x3D;&#x3D;spring启动时(IOC容器启动时)被创建的&#x3D;&#x3D;，可使用&#x3D;&#x3D;@Lazy注解来延迟初始化(延迟到第一次使用时才被创建)&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%EF%BC%89-prototype-%E7%9A%84bean%EF%BC%8C%E6%AF%8F%E4%B8%80%E6%AC%A1%E4%BD%BF%E7%94%A8%E8%AF%A5bean%E7%9A%84%E6%97%B6%E5%80%99%E9%83%BD%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%AE%9E%E4%BE%8B%E3%80%82"><span class="toc-text">3）&#x3D;&#x3D;prototype&#x3D;&#x3D;的bean，每一次使用该bean的时候都会创建一个新的实例。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%EF%BC%89%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E5%BD%93%E4%B8%AD%EF%BC%8C-%E7%BB%9D%E5%A4%A7%E9%83%A8%E5%88%86%E7%9A%84Bean%E6%98%AF%E5%8D%95%E4%BE%8B-%E7%9A%84%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E7%BB%9D%E5%A4%A7%E9%83%A8%E5%88%86Bean%E4%B8%8D%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AEscope%E5%B1%9E%E6%80%A7%E3%80%82"><span class="toc-text">4）实际开发当中，&#x3D;&#x3D;绝大部分的Bean是单例&#x3D;&#x3D;的，也就是说绝大部分Bean不需要配置scope属性。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%EF%BC%89%E6%B5%8B%E8%AF%95"><span class="toc-text">5）测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%AC%AC%E4%B8%89%E6%96%B9Bean"><span class="toc-text">（3）第三方Bean</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">适用场景</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%9B%9B%E7%A7%8D-%E5%A3%B0%E6%98%8EIOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-text">①四种&#x3D;&#x3D;声明IOC控制反转的注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Controller-Service-Repository%E6%B3%A8%E8%A7%A3%EF%BC%8C%E9%83%BD%E6%98%AF-%E5%9F%BA%E4%BA%8E-Component%E6%B3%A8%E8%A7%A3%E8%A1%8D%E7%94%9F%E8%80%8C%E6%9D%A5-%EF%BC%9B%E5%85%B6%E7%9B%AE%E7%9A%84%E9%83%BD%E6%98%AF%E4%B8%BA%E4%BA%86IOC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%8C%E5%B0%86%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%8F%98%E6%88%90IOC%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84bean%E5%AF%B9%E8%B1%A1%E4%BE%BF%E4%BA%8E%E4%B9%8B%E5%90%8E%E7%9B%B4%E6%8E%A5%E6%B3%A8%E5%85%A5%E4%BD%BF%E7%94%A8%E8%AF%A5bean%E5%AF%B9%E8%B1%A1%EF%BC%8C%E9%81%BF%E5%85%8D%E4%BA%86%E9%87%8D%E5%A4%8D%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E3%80%82"><span class="toc-text">@Controller,@Service,@Repository注解，都是&#x3D;&#x3D;基于@Component注解衍生而来&#x3D;&#x3D;；其目的都是为了IOC控制反转，将该对象变成IOC容器中的bean对象便于之后直接注入使用该bean对象，避免了重复创建对象。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E8%AE%A9-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%9A%84%E5%8C%85%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1-%E7%BB%99IOC%E7%AE%A1%E7%90%86-%E6%88%90%E4%B8%BABean%E5%AF%B9%E8%B1%A1"><span class="toc-text">②让&#x3D;&#x3D;第三方的包中的对象&#x3D;&#x3D;给IOC管理&#x3D;&#x3D;成为Bean对象&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B-%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96-XML%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="toc-text">1、测试案例-第三方依赖(&#x3D;&#x3D;XML文件解析&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8%EF%BC%8C%E9%9C%80%E8%A6%81%E9%87%8D%E5%A4%8D%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-text">2、&#x3D;&#x3D;不使用依赖注入&#x3D;&#x3D;-多次调用，需要重复创建多个对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%AC%AC%E4%B8%89%E6%96%B9bean-%E9%9C%80%E8%A6%81%E4%BE%9D%E8%B5%96%E5%85%B6%E5%AE%83bean%E5%AF%B9%E8%B1%A1-%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9C%A8bean%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E4%B8%AD%E8%AE%BE%E7%BD%AE%E5%BD%A2%E5%8F%82%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%AE%B9%E5%99%A8%E4%BC%9A%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E3%80%82"><span class="toc-text">3.，如果第三方bean&#x3D;&#x3D;需要依赖其它bean对象&#x3D;&#x3D;，直接在bean定义方法中设置形参即可，容器会根据类型自动装配。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%A5-%E5%AF%B9%E8%B1%A1DeptService%E5%B7%B2%E7%BB%8F%E5%9C%A8Service%E5%B1%82%E4%B8%AD%E5%A3%B0%E6%98%8E%E4%B8%BAIOC%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84bean%E5%AF%B9%E8%B1%A1%E5%8F%AF%E7%9B%B4%E6%8E%A5%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0-%EF%BC%8Cspring%E4%BC%9A-%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D-%E5%AF%B9%E5%BA%94%E7%9A%84bean"><span class="toc-text">该&#x3D;&#x3D;对象DeptService已经在Service层中声明为IOC容器中的bean对象可直接作为参数&#x3D;&#x3D;，spring会&#x3D;&#x3D;自动装配&#x3D;&#x3D;对应的bean</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E5%9C%A8-spring%E5%90%AF%E5%8A%A8%E7%B1%BB-%E5%A3%B0%E6%98%8E%E4%B8%BA%E7%AC%AC%E4%B8%89%E6%96%B9bean-Bean"><span class="toc-text">4、在&#x3D;&#x3D;spring启动类&#x3D;&#x3D;声明为第三方bean-@Bean</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E4%BD%BF%E7%94%A8-Configuration%E6%B3%A8%E8%A7%A3-%E5%A3%B0%E6%98%8E%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">5、使用&#x3D;&#x3D;@Configuration注解&#x3D;&#x3D;声明配置类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E7%AC%AC%E4%B8%89%E6%96%B9bean-%E4%B8%8D%E5%9C%A8spring%E7%9A%84%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%AD%E5%A3%B0%E6%98%8E-%EF%BC%8C%E8%80%8C%E4%BD%BF%E7%94%A8-Configuration-%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E-%E9%85%8D%E7%BD%AE%E7%B1%BB-%E9%9B%86%E4%B8%AD%E5%88%86%E7%B1%BB%E9%85%8D%E7%BD%AE%E6%9B%B4%E5%A5%BD"><span class="toc-text">*声明第三方bean,&#x3D;&#x3D;不在spring的启动类中声明&#x3D;&#x3D;，而使用&#x3D;&#x3D;@Configuration&#x3D;&#x3D;注解声明&#x3D;&#x3D;配置类,&#x3D;&#x3D;集中分类配置更好</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E5%B0%86%E7%AC%AC%E4%B8%89%E6%96%B9bean%E6%B3%A8%E5%85%A5"><span class="toc-text">6、将第三方bean注入</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81SpringBoot%E5%8E%9F%E7%90%86-%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">3、SpringBoot原理-&#x3D;&#x3D;起步依赖&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89Spring-Framework%E4%B8%8ESpring-Boot%E5%8C%BA%E5%88%AB"><span class="toc-text">（1）Spring Framework与Spring Boot区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89SpringBoot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E5%8E%9F%E7%90%86-Maven%E7%9A%84%E4%BE%9D%E8%B5%96%E4%BC%A0%E9%80%92"><span class="toc-text">（2）SpringBoot的起步依赖原理-&#x3D;&#x3D;Maven的依赖传递&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%A6%82%E6%9E%9C%E4%B8%8D%E4%BD%BF%E7%94%A8SpringBoot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E9%9C%80%E8%A6%81%E9%80%90%E4%B8%AA%E5%AF%BC%E5%85%A5%E8%BF%9B%E8%A1%8Cweb%E5%BC%80%E5%8F%91%E6%89%80%E9%9C%80%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%90%84%E4%B8%AA%E5%8C%85%E7%9B%B4%E6%8E%A5%E8%BF%98%E9%9C%80%E8%A6%81%E6%BB%A1%E8%B6%B3%E4%B8%8D%E5%90%8C-%E7%89%88%E6%9C%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%B9%E9%85%8D%E5%92%8C%E5%85%BC%E5%AE%B9%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">1、如果不使用SpringBoot的起步依赖需要逐个导入进行web开发所需的依赖包，并且各个包直接还需要满足不同&#x3D;&#x3D;版本之间的匹配和兼容的问题&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81springBoot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E9%9B%86%E6%88%90%E4%BA%86web%E5%BC%80%E5%8F%91%E5%B8%B8%E8%A7%81%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">2、springBoot的起步依赖集成了web开发常见的依赖</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E9%80%9A%E8%BF%87Maven%E7%9A%84-%E4%BE%9D%E8%B5%96%E4%BC%A0%E9%80%92-%E5%AE%9E%E7%8E%B0%E5%8F%AA%E9%9C%80%E5%AF%BC%E5%85%A5springboot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E5%8D%B3%E5%8F%AF"><span class="toc-text">3、通过Maven的&#x3D;&#x3D;依赖传递&#x3D;&#x3D;实现只需导入springboot的起步依赖即可</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81SpringBoot%E5%8E%9F%E7%90%86-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">4、SpringBoot原理-&#x3D;&#x3D;自动配置&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E6%A6%82%E8%BF%B0%E5%92%8C%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="toc-text">（1）自动配置的概述和测试案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%A6%82%E8%BF%B0-3"><span class="toc-text">①概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B"><span class="toc-text">②测试案例</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E6%9F%A5%E7%9C%8Bspring%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E5%90%8EIOC%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84Bean%E5%AF%B9%E8%B1%A1"><span class="toc-text">1、查看spring项目启动后IOC容器中的Bean对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Gson%E5%8C%85-SpringBoot%E9%A1%B9%E7%9B%AE%E4%B8%AD-%E9%BB%98%E8%AE%A4%E5%B7%B2%E7%BB%8F%E5%AF%BC%E5%85%A5-%EF%BC%8C%E5%B9%B6%E5%B7%B2%E7%BB%8F%E6%88%90%E4%B8%BA%E4%BA%86IOC%E5%AE%B9%E5%99%A8%E7%9A%84Bean%E5%AF%B9%E8%B1%A1"><span class="toc-text">&#x3D;&#x3D;Gson包&#x3D;&#x3D;SpringBoot项目中&#x3D;&#x3D;默认已经导入&#x3D;&#x3D;，并已经成为了IOC容器的Bean对象</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%B5%8B%E8%AF%95Code"><span class="toc-text">2、测试Code</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%9C%80%E7%BB%88%E4%B9%9F%E6%98%AFSpringIOC%E5%AE%B9%E5%99%A8%E5%BD%93%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AAbean%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.&#x3D;&#x3D;配置类最终也是SpringIOC容器当中的一个bean对象&#x3D;&#x3D;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">（2）自动配置的原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%9C%A8SpringBoot%E9%A1%B9%E7%9B%AE-spring-boot-web-config2-%E5%B7%A5%E7%A8%8B%E4%B8%AD%EF%BC%8C%E9%80%9A%E8%BF%87%E5%9D%90%E6%A0%87%E5%BC%95%E5%85%A5itheima-utils%E4%BE%9D%E8%B5%96"><span class="toc-text">①在SpringBoot项目 spring-boot-web-config2 工程中，通过坐标引入itheima-utils依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%B1%BB%E4%B8%AD%EF%BC%8C%E6%B7%BB%E5%8A%A0%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95"><span class="toc-text">②在测试类中，添加测试方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%89%A7%E8%A1%8C%E6%B5%8B%E8%AF%95%E6%96%B9%E6%B3%95"><span class="toc-text">③执行测试方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3-SpringBootApplication%E6%B3%A8%E8%A7%A3%E5%85%B7%E6%9C%89%E5%8C%85%E6%89%AB%E6%8F%8F%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">④@SpringBootApplication注解具有包扫描的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E6%80%9D%E8%80%83%EF%BC%9A%E5%BC%95%E5%85%A5%E8%BF%9B%E6%9D%A5%E7%9A%84%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96%E5%BD%93%E4%B8%AD%E7%9A%84bean%E4%BB%A5%E5%8F%8A%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B2%A1%E6%9C%89%E7%94%9F%E6%95%88%EF%BC%9F"><span class="toc-text">1、思考：引入进来的第三方依赖当中的bean以及配置类为什么没有生效？</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E6%96%B9%E6%A1%881%EF%BC%9A-ComponentScan-%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F"><span class="toc-text">⑤方案1：&#x3D;&#x3D;@ComponentScan 组件扫描&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5%E6%96%B9%E6%A1%882%EF%BC%9A-Import-%E5%AF%BC%E5%85%A5"><span class="toc-text">⑥方案2：&#x3D;&#x3D;@Import 导入&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Import%E5%AF%BC%E5%85%A5%E7%9A%84%E7%B1%BB%E4%BC%9A%E8%A2%ABSpring%E5%8A%A0%E8%BD%BD%E5%88%B0IOC%E5%AE%B9%E5%99%A8%E4%B8%AD"><span class="toc-text">使用@Import导入的类会被Spring加载到IOC容器中</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E7%AC%AC%E4%B8%89%E6%96%B9-%E5%BE%85%E5%AF%BC%E5%85%A5%E7%9A%84%E4%BE%9D%E8%B5%96%E9%A1%B9%E7%9B%AE-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">1、第三方(待导入的依赖项目)-项目结构</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E4%BD%BF%E7%94%A8-Import%E6%B3%A8%E8%A7%A3%E8%BF%9B%E8%A1%8C%E5%AF%BC%E5%85%A5-%E7%B9%81%E7%90%90"><span class="toc-text">2、启动类上使用@Import注解进行导入(&#x3D;&#x3D;繁琐&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%8A%E4%BD%BF%E7%94%A8-EnableXXX%E6%B3%A8%E8%A7%A3-%E8%BF%9B%E8%A1%8C%E5%AF%BC%E5%85%A5-%E5%BF%AB%E6%8D%B7-%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96%E5%B0%81%E8%A3%85%E5%A5%BD%E7%9A%84-Import"><span class="toc-text">3、启动类上使用&#x3D;&#x3D;@EnableXXX注解&#x3D;&#x3D;进行导入(&#x3D;&#x3D;快捷-使用第三方依赖封装好的@Import&#x3D;&#x3D;-)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81-EnableHeaderConfig%E7%B1%BB-%E6%B3%A8%E8%A7%A3%E7%B1%BB"><span class="toc-text">4、案例代码-EnableHeaderConfig类(&#x3D;&#x3D;注解类&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81-HeaderConfig-%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">5、案例代码-HeaderConfig(&#x3D;&#x3D;配置类&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81-MyImportSelector-%E5%B0%81%E8%A3%85%E5%A4%9A%E4%B8%AA%E5%85%A8%E7%B1%BB%E5%90%8D"><span class="toc-text">6、案例代码-MyImportSelector(&#x3D;&#x3D;封装多个全类名&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7%E3%80%81%E6%A1%88%E4%BE%8B%E4%BB%A3%E7%A0%81-%E5%BE%85%E6%B7%BB%E5%8A%A0%E7%9A%84Bean%E7%B1%BB"><span class="toc-text">7、案例代码-待添加的Bean类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA"><span class="toc-text">（3）自动配置-&#x3D;&#x3D;源码跟踪&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%90%AF%E5%8A%A8%E7%B1%BB-%E6%B3%A8%E8%A7%A3-SpringBootApplication%E6%8B%86%E5%88%86"><span class="toc-text">①启动类-&#x3D;&#x3D;注解@SpringBootApplication拆分&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%85%83%E6%B3%A8%E8%A7%A3%EF%BC%88%E4%B8%8D%E5%86%8D%E8%A7%A3%E9%87%8A%EF%BC%89"><span class="toc-text">1、元注解（不再解释）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-SpringBootConfiguration-%E8%A1%A8%E7%A4%BA%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%98%AF%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">2、@SpringBootConfiguration(表示启动类是配置类)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81-EnableAutoConfiguration-Enablek%E5%BC%80%E5%A4%B4%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-text">3、@EnableAutoConfiguration(Enablek开头的注解)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81-ComponentScan-%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-text">4、@ComponentScan(组件扫描的注解)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%8B%86%E5%88%861-%E6%B3%A8%E8%A7%A3-SpringBootConfiguration"><span class="toc-text">②拆分1-注解&#x3D;&#x3D;@SpringBootConfiguration&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-SpringBootConfiguration%E6%B3%A8%E8%A7%A3%E4%B8%8A%E4%BD%BF%E7%94%A8%E4%BA%86-Configuration%EF%BC%8C%E8%A1%A8%E6%98%8EspringBoot%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BB%E3%80%82"><span class="toc-text">1、@SpringBootConfiguration注解上使用了@Configuration，表明springBoot启动类就是一个配置类。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-Indexed%E6%B3%A8%E8%A7%A3%EF%BC%8C%E6%98%AF%E7%94%A8%E6%9D%A5%E5%8A%A0%E9%80%9F%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E7%9A%84%EF%BC%88%E4%B8%8D%E7%94%A8%E5%85%B3%E5%BF%83%EF%BC%89%E3%80%82"><span class="toc-text">2、@Indexed注解，是用来加速应用启动的（不用关心）。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%8B%86%E5%88%862-%E6%B3%A8%E8%A7%A3-ComponentScan"><span class="toc-text">③拆分2-注解&#x3D;&#x3D;@ComponentScan&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ComponentScan%E6%B3%A8%E8%A7%A3%E6%98%AF%E7%94%A8%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%9A%84%EF%BC%8C-%E6%89%AB%E6%8F%8F%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%89%80%E5%9C%A8%E7%9A%84%E5%8C%85%E5%8F%8A%E5%85%B6%E5%AD%90%E5%8C%85-%E4%B8%8B%E6%89%80%E6%9C%89%E8%A2%AB-Component%E5%8F%8A%E5%85%B6%E8%A1%8D%E7%94%9F%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E7%9A%84%E7%B1%BB-%E3%80%82SpringBoot%E5%90%AF%E5%8A%A8%E7%B1%BB%EF%BC%8C%E4%B9%8B%E6%89%80%E4%BB%A5-%E5%85%B7%E5%A4%87%E6%89%AB%E6%8F%8F%E5%8C%85%E5%8A%9F%E8%83%BD-%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%9B%A0%E4%B8%BA%E5%8C%85%E5%90%AB%E4%BA%86-ComponentScan%E6%B3%A8%E8%A7%A3%E3%80%82"><span class="toc-text">@ComponentScan注解是用来进行组件扫描的，&#x3D;&#x3D;扫描启动类所在的包及其子包&#x3D;&#x3D;下所有被&#x3D;&#x3D;@Component及其衍生注解声明的类&#x3D;&#x3D;。SpringBoot启动类，之所以&#x3D;&#x3D;具备扫描包功能&#x3D;&#x3D;，就是因为包含了@ComponentScan注解。</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E6%8B%86%E5%88%863-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-EnableAutoConfiguration"><span class="toc-text">④拆分3-&#x3D;&#x3D;自动配置核心注解@EnableAutoConfiguration&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#0%E3%80%81-EnableXXX%E5%BC%80%E5%A4%B4-%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%8C%E4%B8%80%E8%88%AC%E9%83%BD-%E5%B0%81%E8%A3%85%E4%BA%86-Import%E6%B3%A8%E8%A7%A3"><span class="toc-text">0、&#x3D;&#x3D;@EnableXXX开头&#x3D;&#x3D;的注解，一般都&#x3D;&#x3D;封装了@Import注解&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E4%BD%BF%E7%94%A8-%E5%B0%81%E8%A3%85-Import%E6%B3%A8%E8%A7%A3-%EF%BC%8C-%E5%AF%BC%E5%85%A5%E4%BA%86%E5%AE%9E%E7%8E%B0ImportSelector%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB-%E3%80%82-AutoConfigurationImportSelector%E7%B1%BB-%E6%98%AFImportSelector%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%E3%80%82"><span class="toc-text">1、使用(封装)&#x3D;&#x3D;@Import注解&#x3D;&#x3D;，&#x3D;&#x3D;导入了实现ImportSelector接口的实现类&#x3D;&#x3D;。&#x3D;&#x3D;AutoConfigurationImportSelector类&#x3D;&#x3D;是ImportSelector接口的实现类。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81AutoConfigurationImportSelector%E7%B1%BB%E4%B8%AD%E9%87%8D%E5%86%99%E4%BA%86ImportSelector%E6%8E%A5%E5%8F%A3%E7%9A%84-selectImports-%E6%96%B9%E6%B3%95-%EF%BC%9A"><span class="toc-text">2、AutoConfigurationImportSelector类中重写了ImportSelector接口的&#x3D;&#x3D;selectImports()方法&#x3D;&#x3D;：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81selectImports-%E6%96%B9%E6%B3%95%E5%BA%95%E5%B1%82%E8%B0%83%E7%94%A8-getAutoConfigurationEntry-%E6%96%B9%E6%B3%95-%EF%BC%8C-%E8%8E%B7%E5%8F%96-%E5%8F%AF%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%9A%84-%E9%85%8D%E7%BD%AE%E7%B1%BB%E4%BF%A1%E6%81%AF%E9%9B%86%E5%90%88"><span class="toc-text">3、selectImports()方法底层调用&#x3D;&#x3D;getAutoConfigurationEntry()方法&#x3D;&#x3D;，&#x3D;&#x3D;获取&#x3D;&#x3D;可自动配置的&#x3D;&#x3D;配置类信息集合&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E8%B0%83%E7%94%A8-getCandidateConfigurations-annotationMetadata-attributes-%E6%96%B9%E6%B3%95-%E8%8E%B7%E5%8F%96-%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84-%E6%89%80%E6%9C%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E7%9A%84%E9%9B%86%E5%90%88"><span class="toc-text">4、调用&#x3D;&#x3D;getCandidateConfigurations&#x3D;&#x3D;(annotationMetadata, attributes)方法&#x3D;&#x3D;获取&#x3D;&#x3D;在配置文件中配置的&#x3D;&#x3D;所有自动配置类的集合&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-%E6%BA%90%E7%A0%81%E5%B0%8F%E7%BB%93"><span class="toc-text">⑤自动配置-&#x3D;&#x3D;源码小结&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-SpringBootConfiguration-%E5%A3%B0%E6%98%8E%E5%BD%93%E5%89%8D%E7%B1%BB%E6%98%AF%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">1、@SpringBootConfiguration-声明当前类是一个配置类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-ComponentScan-%E8%BF%9B%E8%A1%8C%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%EF%BC%88SpringBoot%E4%B8%AD%E9%BB%98%E8%AE%A4%E6%89%AB%E6%8F%8F%E7%9A%84%E6%98%AF%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%89%80%E5%9C%A8%E7%9A%84%E5%BD%93%E5%89%8D%E5%8C%85%E5%8F%8A%E5%85%B6%E5%AD%90%E5%8C%85%EF%BC%89"><span class="toc-text">2、@ComponentScan-进行组件扫描（SpringBoot中默认扫描的是启动类所在的当前包及其子包）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81-EnableAutoConfiguration"><span class="toc-text">3、@EnableAutoConfiguration</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E6%B5%81%E7%A8%8B"><span class="toc-text">4、流程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E6%80%9D%E8%80%83"><span class="toc-text">5、思考</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-%E6%B3%A8%E8%A7%A3-Conditional-Bean%E7%9A%84%E6%9D%A1%E4%BB%B6%E8%A3%85%E9%85%8D"><span class="toc-text">（4）自动配置-注解&#x3D;&#x3D;@Conditional(Bean的条件装配)&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-ConditionalOnClass%E6%B3%A8%E8%A7%A3"><span class="toc-text">①&#x3D;&#x3D;@ConditionalOnClass注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">1、配置类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%9F%A5%E7%9C%8Bpom-xml%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%AF%B9%E5%BA%94%E7%B1%BB%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-text">2、查看pom.xml文件是否存在对应类的依赖</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text">3、测试类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E7%BB%93%E6%9E%9C"><span class="toc-text">4、结果</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-ConditionalOnMissingBean%E6%B3%A8%E8%A7%A3"><span class="toc-text">②&#x3D;&#x3D;@ConditionalOnMissingBean注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81ConditionalOnMissingBean"><span class="toc-text">1、ConditionalOnMissingBean</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="toc-text">测试结果</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-ConditionalOnMissingBean-name-%E2%80%9DdeptController2%E2%80%9D"><span class="toc-text">2、@ConditionalOnMissingBean&#x3D;&#x3D;(name&#x3D;”deptController2”)&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C-1"><span class="toc-text">测试结果</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81-ConditionalOnMissingBean-HeaderConfig-class"><span class="toc-text">3、@ConditionalOnMissingBean&#x3D;&#x3D;(HeaderConfig.class)&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C-2"><span class="toc-text">测试结果</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2-ConditionalOnProperty%E6%B3%A8%E8%A7%A3"><span class="toc-text">③&#x3D;&#x3D;@ConditionalOnProperty注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-ConditionalOnProperty%E8%BF%99%E4%B8%AA%E6%B3%A8%E8%A7%A3%E5%92%8C-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BD%93%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E5%B1%9E%E6%80%A7-%E6%9C%89%E5%85%B3%E7%B3%BB"><span class="toc-text">1、@ConditionalOnProperty这个注解和&#x3D;&#x3D;配置文件当中配置的属性&#x3D;&#x3D;有关系</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%85%88%E5%9C%A8application-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%EF%BC%9A"><span class="toc-text">2、先在application.yml配置文件中添加如下的键值对：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%9C%A8%E5%A3%B0%E6%98%8Ebean%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%9D%A1%E4%BB%B6-ConditionalOnProperty"><span class="toc-text">3、在声明bean的时候就可以指定一个条件&#x3D;&#x3D;@ConditionalOnProperty&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AD%98%E5%9C%A8%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%E5%90%8D%E4%B8%8E%E5%80%BC%EF%BC%8C%E6%89%8D%E4%BC%9A%E5%B0%86bean%E5%8A%A0%E5%85%A5IOC%E5%AE%B9%E5%99%A8"><span class="toc-text">4、配置文件中存在指定属性名与值，才会将bean加入IOC容器</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3-%E6%A1%88%E4%BE%8B-GsonAutoConfiguration"><span class="toc-text">④&#x3D;&#x3D;案例&#x3D;&#x3D;-GsonAutoConfiguration</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%B0%8F%E7%BB%93"><span class="toc-text">（5）小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E6%A1%88%E4%BE%8B-%E8%87%AA%E5%AE%9A%E4%B9%89Starter"><span class="toc-text">（6）案例-自定义Starter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%9C%BA%E6%99%AF"><span class="toc-text">①场景</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81spring%E5%AE%98%E6%96%B9%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83%E4%B8%80%E8%88%AC%E6%98%AF%EF%BC%9Aspring-boot-starter-xxx-2-7-x"><span class="toc-text">1、spring官方命名规范一般是：spring-boot-starter-xxx:2.7.x</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%85%B6%E4%BB%96%E4%BE%9D%E8%B5%96%E5%88%99%E6%98%AF%EF%BC%9Amybatis-spring-boot-starter-2-2-x"><span class="toc-text">2、其他依赖则是：mybatis-spring-boot-starter:2.2.x</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E7%94%B1%E4%BA%8E%E6%9C%89%E4%BE%9D%E8%B5%96%E4%BC%A0%E9%80%92%E5%B9%B6%E4%B8%94%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD%E5%8C%85%E5%90%AB%E4%BA%86%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E6%89%80%E4%BB%A5-%E5%8F%AA%E9%9C%80%E5%AF%BC%E5%85%A5-%E5%85%B7%E6%9C%89%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E5%8A%9F%E8%83%BD%E7%9A%84-%E4%BE%9D%E8%B5%96%E5%8C%85xxx-starter-%E5%8D%B3%E5%8F%AF"><span class="toc-text">3、由于有依赖传递并且依赖管理功能包含了自动配置管理所以&#x3D;&#x3D;只需导入&#x3D;&#x3D;具有依赖管理功能的&#x3D;&#x3D;依赖包xxx-starter&#x3D;&#x3D;即可</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81-%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF-%EF%BC%9A"><span class="toc-text">4、&#x3D;&#x3D;业务场景&#x3D;&#x3D;：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81-%E8%87%AA%E5%AE%9A%E4%B9%89starter"><span class="toc-text">5、&#x3D;&#x3D;自定义starter&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">6、定义配置文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7%E3%80%81%E5%AE%9A%E4%B9%89%E4%B8%A4%E4%B8%AA%E6%A8%A1%E5%9D%97"><span class="toc-text">7、定义两个模块</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E9%9C%80%E6%B1%82"><span class="toc-text">②需求</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-%E8%87%AA%E5%AE%9A%E4%B9%89aliyun-oss-spring-boot-starter-%EF%BC%8C%E5%AE%8C%E6%88%90%E9%98%BF%E9%87%8C%E4%BA%91OSS%E6%93%8D%E4%BD%9C%E5%B7%A5%E5%85%B7%E7%B1%BBAliyunOSSUtils%E7%9A%84-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-%E3%80%82"><span class="toc-text">1、&#x3D;&#x3D;自定义aliyun-oss-spring-boot-starter&#x3D;&#x3D;，完成阿里云OSS操作工具类AliyunOSSUtils的&#x3D;&#x3D;自动配置&#x3D;&#x3D;。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-%E7%9B%AE%E6%A0%87-%EF%BC%9A%E5%BC%95%E5%85%A5%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E5%BC%95%E5%85%A5%E4%B9%8B%E5%90%8E%EF%BC%8C%E8%A6%81%E6%83%B3%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91OSS%EF%BC%8C-%E6%B3%A8%E5%85%A5AliyunOSSUtils%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E5%8D%B3%E5%8F%AF"><span class="toc-text">2、&#x3D;&#x3D;目标&#x3D;&#x3D;：引入起步依赖引入之后，要想使用阿里云OSS，&#x3D;&#x3D;注入AliyunOSSUtils直接使用即可&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E9%98%BF%E9%87%8C%E4%BA%91OSS%E5%85%B7%E4%BD%93%E4%BD%BF%E7%94%A8-%E6%AD%A3%E5%B8%B8%E4%BD%BF%E7%94%A8%E6%9C%AA%E9%85%8D%E7%BD%AE"><span class="toc-text">③阿里云OSS具体使用(正常使用未配置)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">1、配置文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81AliOSSProperties%E7%B1%BB"><span class="toc-text">2、AliOSSProperties类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81AliOSSUtils%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">3、AliOSSUtils工具类</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">④实现步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E8%87%AA%E5%AE%9A%E4%B9%89starter-%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-text">⑤自定义starter-&#x3D;&#x3D;具体实现&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E3%80%81aliyun-oss-spring-boot-starter%E6%A8%A1%E5%9D%97"><span class="toc-text">1.、aliyun-oss-spring-boot-starter模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%88%9B%E5%BB%BA%E5%AE%8Cstarter%E6%A8%A1%E5%9D%97%E5%90%8E%EF%BC%8C%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E6%9C%80%E7%BB%88%E4%BF%9D%E7%95%99%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-text">2、创建完starter模块后，删除多余的文件，最终保留内容如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%88%A0%E9%99%A4pom-xml%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A4%9A%E4%BD%99%E7%9A%84%E5%86%85%E5%AE%B9%E5%90%8E%EF%BC%9A"><span class="toc-text">3、删除pom.xml文件中多余的内容后：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81aliyun-oss-spring-boot-autoconfigure%E6%A8%A1%E5%9D%97"><span class="toc-text">4、aliyun-oss-spring-boot-autoconfigure模块</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E5%88%9B%E5%BB%BA%E5%AE%8Cautoconfigure%E6%A8%A1%E5%9D%97%E5%90%8E%EF%BC%8C%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E6%9C%80%E7%BB%88%E4%BF%9D%E7%95%99%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-text">5、创建完autoconfigure模块后，删除多余的文件，最终保留内容如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E5%88%A0%E9%99%A4pom-xml%E6%96%87%E4%BB%B6%E4%B8%AD%E5%A4%9A%E4%BD%99%E7%9A%84%E5%86%85%E5%AE%B9%E5%90%8E%EF%BC%9A"><span class="toc-text">6、删除pom.xml文件中多余的内容后：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7%E3%80%81%E6%8C%89%E7%85%A7%E6%88%91%E4%BB%AC%E4%B9%8B%E5%89%8D%E7%9A%84%E5%88%86%E6%9E%90%EF%BC%8C%E6%98%AF%E9%9C%80%E8%A6%81%E5%9C%A8starter%E6%A8%A1%E5%9D%97%E4%B8%AD%E6%9D%A5%E5%BC%95%E5%85%A5autoconfigure%E8%BF%99%E4%B8%AA%E6%A8%A1%E5%9D%97%E7%9A%84%E3%80%82%E6%89%93%E5%BC%80starter%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84pom%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-text">7、按照我们之前的分析，是需要在starter模块中来引入autoconfigure这个模块的。打开starter模块中的pom文件：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8%E3%80%81%E5%9C%A8autoconfigure%E6%A8%A1%E5%9D%97%E5%BD%93%E4%B8%AD%E6%9D%A5%E5%AE%8C%E6%88%90%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%93%8D%E4%BD%9C%E3%80%82"><span class="toc-text">8、在autoconfigure模块当中来完成自动配置操作。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8%E3%80%81AliOSSAutoConfiguration%E7%B1%BB-EnableConfigurationProperties"><span class="toc-text">8、AliOSSAutoConfiguration类-&#x3D;&#x3D;@EnableConfigurationProperties&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9%E3%80%81AliOSSProperties%E7%B1%BB"><span class="toc-text">9、AliOSSProperties类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10%E3%80%81AliOSSUtils%E7%B1%BB"><span class="toc-text">10、AliOSSUtils类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#11%E3%80%81%E5%9C%A8aliyun-oss-spring-boot-autoconfigure%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84resources%E4%B8%8B%EF%BC%8C%E6%96%B0%E5%BB%BA%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">11、在aliyun-oss-spring-boot-autoconfigure模块中的resources下，新建自动配置文件</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5%E8%87%AA%E5%AE%9A%E4%B9%89starter-%E6%B5%8B%E8%AF%95"><span class="toc-text">⑥自定义starter-测试</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E6%B5%8B%E8%AF%95%E5%89%8D%E5%87%86%E5%A4%87%EF%BC%9A"><span class="toc-text">1、测试前准备：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E7%94%A8postman%E5%B7%A5%E5%85%B7%E8%BF%9B%E8%A1%8C%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">2、用postman工具进行文件上传</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E9%80%9A%E8%BF%87%E6%96%AD%E7%82%B9%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5AliOSSUtils%E7%9A%84bean%E5%AF%B9%E8%B1%A1"><span class="toc-text">3、通过断点可以看到自动注入AliOSSUtils的bean对象</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81Web%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93"><span class="toc-text">十一、Web后端开发总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-text">1、三层架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%BF%87%E6%BB%A4%E5%99%A8Filter%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8Interceptor"><span class="toc-text">2、过滤器Filter和拦截器Interceptor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%9E%B6%E6%9E%84%E8%A7%A3%E8%80%A6-IOC%E5%92%8CDI"><span class="toc-text">3、架构解耦-IOC和DI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81AOP%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%E3%80%81JWT%E3%80%81Mybatis%E2%80%A6"><span class="toc-text">4、AOP面向切面编程、JWT、Mybatis…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%A1%86%E6%9E%B6%E5%8A%9F%E8%83%BD%E5%88%86%E7%B1%BB"><span class="toc-text">5、框架功能分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81SpringMVC"><span class="toc-text">6、SpringMVC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81SSM"><span class="toc-text">7、SSM</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81Maven%E9%AB%98%E7%BA%A7"><span class="toc-text">十二、Maven高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%86%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E5%8F%91"><span class="toc-text">1、分模块设计与开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BB%8B%E7%BB%8D"><span class="toc-text">（1）介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%9C%AA%E5%88%86%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">①未分模块设计的问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%88%86%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1"><span class="toc-text">②分模块设计</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%AE%9E%E8%B7%B5"><span class="toc-text">（2）实践</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%88%86%E6%9E%90"><span class="toc-text">①分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%AE%9E%E7%8E%B0"><span class="toc-text">②实现</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-maven%E6%A8%A1%E5%9D%97-tlias-pojo%EF%BC%8C%E5%AD%98%E6%94%BE%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">1. 创建&#x3D;&#x3D;maven模块&#x3D;&#x3D;tlias-pojo，存放实体类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81-%E5%88%9B%E5%BB%BAMaven%E6%A8%A1%E5%9D%97tlias-utils%EF%BC%8C%E5%AD%98%E6%94%BE%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-text">2、 创建Maven模块tlias-utils，存放相关工具类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-text">（3）总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BB%A7%E6%89%BF-%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-text">2、继承-继承关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB-%E5%BC%95%E5%85%A5"><span class="toc-text">（1）继承关系-引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-text">（2）继承关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90"><span class="toc-text">（3）思路分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%AE%9E%E7%8E%B0"><span class="toc-text">（4）实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E8%AE%BE%E7%BD%AE%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8Fpom"><span class="toc-text">①设置打包方式pom</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-text">1、工程结构如下：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E7%88%B6%E5%B7%A5%E7%A8%8Btlias-parent%E7%9A%84pom-xml%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%A6%82%E4%B8%8B"><span class="toc-text">2、父工程tlias-parent的pom.xml文件配置如下</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81-Maven%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F"><span class="toc-text">3、&#x3D;&#x3D;Maven打包方式&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%9C%A8%E5%AD%90%E5%B7%A5%E7%A8%8B%E7%9A%84pom-xml%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C-%E9%85%8D%E7%BD%AE%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"><span class="toc-text">②在子工程的pom.xml文件中，&#x3D;&#x3D;配置继承关系&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%9C%A8-%E7%88%B6%E5%B7%A5%E7%A8%8B-%E4%B8%AD%E9%85%8D%E7%BD%AE-%E5%90%84%E4%B8%AA%E5%B7%A5%E7%A8%8B%E5%85%B1%E6%9C%89%E7%9A%84%E4%BE%9D%E8%B5%96-%EF%BC%88%E5%AD%90%E5%B7%A5%E7%A8%8B%E4%BC%9A%E8%87%AA%E5%8A%A8%E7%BB%A7%E6%89%BF%E7%88%B6%E5%B7%A5%E7%A8%8B%E7%9A%84%E4%BE%9D%E8%B5%96%EF%BC%89"><span class="toc-text">③在&#x3D;&#x3D;父工程&#x3D;&#x3D;中配置&#x3D;&#x3D;各个工程共有的依赖&#x3D;&#x3D;（子工程会自动继承父工程的依赖）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84%E8%AF%B4%E6%98%8E"><span class="toc-text">（5）工程结构说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%BB%A7%E6%89%BF-%E7%89%88%E6%9C%AC%E9%94%81%E5%AE%9A"><span class="toc-text">3、继承-版本锁定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%BC%95%E5%85%A5"><span class="toc-text">（1）引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-dependencyManagement-%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC"><span class="toc-text">（2）&#x3D;&#x3D;dependencyManagement&#x3D;&#x3D;统一管理依赖版本</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D"><span class="toc-text">①使用介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%88%B6%E5%B7%A5%E7%A8%8B"><span class="toc-text">父工程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%90%E5%B7%A5%E7%A8%8B"><span class="toc-text">子工程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-text">&#x3D;&#x3D;注意&#x3D;&#x3D;</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE-properties"><span class="toc-text">（3）属性配置-&lt; properties&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="toc-text">① 自定义属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%BC%95%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-text">②引用属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%9C%A8%E7%88%B6%E5%B7%A5%E7%A8%8B%E4%B8%AD%EF%BC%8C%E5%B0%86%E6%89%80%E6%9C%89%E7%9A%84%E7%89%88%E6%9C%AC%E5%8F%B7%EF%BC%8C%E9%83%BD%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86%E7%BB%B4%E6%8A%A4%E8%B5%B7%E6%9D%A5%E3%80%82"><span class="toc-text">③在父工程中，将所有的版本号，都集中管理维护起来。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89dependencyManagement%E4%B8%8Edependencies%E7%9A%84-%E5%8C%BA%E5%88%AB"><span class="toc-text">（4）dependencyManagement与dependencies的&#x3D;&#x3D;区别&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E8%81%9A%E5%90%88"><span class="toc-text">4、聚合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%BC%95%E5%85%A5-1"><span class="toc-text">（1）引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%BB%8B%E7%BB%8D"><span class="toc-text">（2）介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E7%88%B6%E5%B7%A5%E7%A8%8B%E5%92%8C%E8%81%9A%E5%90%88%E5%B7%A5%E7%A8%8B"><span class="toc-text">①父工程和聚合工程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%AE%9E%E7%8E%B0"><span class="toc-text">（3）实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E8%81%9A%E5%90%88%E5%85%B6%E4%BB%96%E6%A8%A1%E5%9D%97-moudules"><span class="toc-text">①聚合其他模块-&lt; moudules &gt;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%B5%8B%E8%AF%95"><span class="toc-text">②测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E7%BB%A7%E6%89%BF%E5%92%8C%E8%81%9A%E5%90%88%E5%AF%B9%E6%AF%94"><span class="toc-text">5、继承和聚合对比</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BD%9C%E7%94%A8"><span class="toc-text">1、作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%9B%B8%E5%90%8C%E7%82%B9%EF%BC%9A"><span class="toc-text">2、相同点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E4%B8%8D%E5%90%8C%E7%82%B9%EF%BC%9A"><span class="toc-text">3、不同点：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81Maven%E7%A7%81%E6%9C%8D"><span class="toc-text">6、Maven私服</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%9C%BA%E6%99%AF"><span class="toc-text">1、场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E4%BB%8B%E7%BB%8D"><span class="toc-text">2、介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E7%A7%81%E6%9C%8D"><span class="toc-text">①私服</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E4%BE%9D%E8%B5%96%E6%9F%A5%E6%89%BE%E9%A1%BA%E5%BA%8F"><span class="toc-text">②依赖查找顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">③注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%B5%84%E6%BA%90%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD"><span class="toc-text">3、资源上传与下载</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%AD%A5%E9%AA%A4%E5%88%86%E6%9E%90"><span class="toc-text">①步骤分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E7%A7%81%E6%9C%8D%E4%BB%93%E5%BA%93%E8%AF%B4%E6%98%8E"><span class="toc-text">②私服仓库说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E9%A1%B9%E7%9B%AE%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">③项目版本说明</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">4、实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E8%AE%BE%E7%BD%AE-%E7%A7%81%E6%9C%8D-%E7%9A%84%E8%AE%BF%E9%97%AE-%E7%94%A8%E6%88%B7%E5%90%8D-%E5%AF%86%E7%A0%81-%EF%BC%88%E5%9C%A8%E8%87%AA%E5%B7%B1-maven-%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84-conf-settings-xml-%E4%B8%AD%E7%9A%84-servers-%E4%B8%AD%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-text">①设置&#x3D;&#x3D;私服&#x3D;&#x3D;的访问&#x3D;&#x3D;用户名&#x2F;密码&#x3D;&#x3D;（在自己&#x3D;&#x3D;maven&#x3D;&#x3D;安装目录下的&#x3D;&#x3D;conf&#x2F;settings.xml&#x3D;&#x3D;中的&#x3D;&#x3D;servers&#x3D;&#x3D;中配置）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E8%AE%BE%E7%BD%AE-%E7%A7%81%E6%9C%8D%E4%BE%9D%E8%B5%96%E4%B8%8B%E8%BD%BD-%E7%9A%84-%E4%BB%93%E5%BA%93%E7%BB%84-%E5%9C%B0%E5%9D%80%EF%BC%88%E5%9C%A8%E8%87%AA%E5%B7%B1maven%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84conf-settings-xml%E4%B8%AD%E7%9A%84-mirrors-%E3%80%81-profiles-%E4%B8%AD%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-text">②设置&#x3D;&#x3D;私服依赖下载&#x3D;&#x3D;的&#x3D;&#x3D;仓库组&#x3D;&#x3D;地址（在自己maven安装目录下的conf&#x2F;settings.xml中的&#x3D;&#x3D;mirrors&#x3D;&#x3D;、&#x3D;&#x3D;profiles&#x3D;&#x3D;中配置）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2IDEA%E7%9A%84maven%E5%B7%A5%E7%A8%8B%E7%9A%84-pom%E6%96%87%E4%BB%B6-%E4%B8%AD%E9%85%8D%E7%BD%AE%E4%B8%8A%E4%BC%A0%EF%BC%88%E5%8F%91%E5%B8%83%EF%BC%89%E5%9C%B0%E5%9D%80-%E7%9B%B4%E6%8E%A5%E5%9C%A8tlias-parent-%E7%88%B6%E5%B7%A5%E7%A8%8B-%E4%B8%AD%E9%85%8D%E7%BD%AE-%E5%8F%91%E5%B8%83%E5%9C%B0%E5%9D%80"><span class="toc-text">③IDEA的maven工程的&#x3D;&#x3D;pom文件&#x3D;&#x3D;中配置上传（发布）地址(直接在tlias-parent(&#x3D;&#x3D;父工程&#x3D;&#x3D;)中配置&#x3D;&#x3D;发布地址&#x3D;&#x3D;)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8tlias-parent%E4%B8%AD%E6%89%A7%E8%A1%8C-deploy%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-%EF%BC%8C%E5%B0%86%E9%A1%B9%E7%9B%AE-%E5%8F%91%E5%B8%83%E5%88%B0%E7%A7%81%E6%9C%8D%E4%BB%93%E5%BA%93%E4%B8%AD-%E3%80%82"><span class="toc-text">④配置完成之后，我们就可以在tlias-parent中执行&#x3D;&#x3D;deploy生命周期&#x3D;&#x3D;，将项目&#x3D;&#x3D;发布到私服仓库中&#x3D;&#x3D;。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E5%A4%87%E6%B3%A8%E8%AF%B4%E6%98%8E"><span class="toc-text">⑤备注说明</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81Web%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93"><span class="toc-text">十二、Web开发总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-text">十三、开发小技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81TODO%E6%A0%87%E7%AD%BE"><span class="toc-text">1、TODO标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81Spring-Cache"><span class="toc-text">十四、Spring Cache</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Spring-Cache"><span class="toc-text">2.1 Spring Cache</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.1.1 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-text">2.1.2 &#x3D;&#x3D;常用注解&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">2.1.3 入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%BC%95%E5%AF%BC%E7%B1%BB%E4%B8%8A%E5%8A%A0-EnableCaching"><span class="toc-text">①引导类上加&#x3D;&#x3D;@EnableCaching&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-CachePut%E6%B3%A8%E8%A7%A3"><span class="toc-text">② &#x3D;&#x3D;@CachePut注解&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2-Cacheable%E6%B3%A8%E8%A7%A3"><span class="toc-text">③&#x3D;&#x3D;@Cacheable注解&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text">原理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3-CacheEvict%E6%B3%A8%E8%A7%A3"><span class="toc-text">④&#x3D;&#x3D;@CacheEvict注解&#x3D;&#x3D;</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81HttpServletRequest-Response%E5%92%8C-XMLHttpRequset"><span class="toc-text">十五、HttpServletRequest&#x2F;Response和&#x3D;&#x3D;XMLHttpRequset&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81HttpServletRequest-%E5%92%8C-HttpServletResponse-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">1、HttpServletRequest 和 HttpServletResponse 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Tomcat-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86-XMLHttpRequest"><span class="toc-text">2、Tomcat 如何处理 XMLHttpRequest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%A4%84%E7%90%86-XMLHttpRequest-%E7%9A%84-Spring-Boot-Controller"><span class="toc-text">3、示例：处理 XMLHttpRequest 的 Spring Boot Controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81HttpServletResponse%E7%AE%80%E4%BB%8B"><span class="toc-text">4、HttpServletResponse简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81Git%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">十六、Git的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Git%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE"><span class="toc-text">1、Git全局设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%8E%B7%E5%8F%96Git%E4%BB%93%E5%BA%93-%E6%9C%AC%E5%9C%B0%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">2、获取Git仓库-本地初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%8E%B7%E5%8F%96Git%E4%BB%93%E5%BA%93-%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%85%8B%E9%9A%86"><span class="toc-text">3、获取Git仓库-从远程仓库克隆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%B7%A5%E4%BD%9C%E5%8C%BA%E3%80%81%E6%9A%82%E5%AD%98%E5%8C%BA%E3%80%81%E7%89%88%E6%9C%AC%E5%BA%93%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">4、工作区、暂存区、版本库的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81Git%E5%B7%A5%E4%BD%9C%E5%8C%BA%E4%B8%AD%E6%96%87%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-text">5、Git工作区中文件的状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">6、本地仓库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89git-reset-%E5%8F%96%E6%B6%88%E6%9A%82%E5%AD%98%E6%88%96%E5%88%87%E6%8D%A2%E7%89%88%E6%9C%AC"><span class="toc-text">（1）git reset-取消暂存或切换版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89git-commit-%E6%8F%90%E4%BA%A4"><span class="toc-text">（2）git commit-提交</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89git-log-%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="toc-text">（3）git log-查看日志</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">7、远程仓库操作命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89git-remote-%E6%9F%A5%E7%9C%8B%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-text">（1）git remote-查看远程仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89git-remote-add-shortname-url"><span class="toc-text">（2）git remote add &lt; shortname&gt; &lt; url&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89git-clone-url"><span class="toc-text">（3）git clone [url]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89-git-push-remote-name-branch-name"><span class="toc-text">（4） git push [remote-name] [branch-name]</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89git-pull-short-name-branch-name"><span class="toc-text">（5）git pull [short-name] [branch-name]</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9C"><span class="toc-text">8、分支操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89git-branch-%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF"><span class="toc-text">（1）git branch-查看分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89git-branch-branch-name-%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="toc-text">（2）git branch [branch-name]-创建分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89git-checkout-branch-name-%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-text">（3）git checkout [branch-name]-切换分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89git-push-short-name-branch-name-%E6%8E%A8%E9%80%81%E5%80%BC%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%88%86%E6%94%AF"><span class="toc-text">（4）git push [short-name] [branch-name]-推送值远程仓库分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89git-merge-name-%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="toc-text">（5）git merge [name] -合并分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF-%E5%90%8C%E6%97%B6%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%83%BD%E4%BF%AE%E6%94%B9"><span class="toc-text">（6）合并分支常见错误-同时对同一个文件都修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E6%A0%87%E7%AD%BE%E6%93%8D%E4%BD%9C"><span class="toc-text">9、标签操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89git-tag-%E5%8F%82%E7%9C%8B%E6%A0%87%E7%AD%BE"><span class="toc-text">（1）git tag-参看标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89git-tag-tag-name-%E5%88%9B%E5%BB%BA%E6%A0%87%E7%AD%BE"><span class="toc-text">（2）git tag [tag-name] -创建标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89git-push-short-name-tag-name-%E6%8E%A8%E9%80%81%E6%A0%87%E7%AD%BE"><span class="toc-text">（3）git push [short-name] [tag-name]-推送标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89git-checkout-b-newbranch-name-tag-name-%E6%A3%80%E5%87%BA%E6%A0%87%E7%AD%BE"><span class="toc-text">（4）git checkout -b [newbranch-name] [tag-name] -检出标签</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8Git"><span class="toc-text">10、IDEA中使用Git</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEGit"><span class="toc-text">（1）配置Git</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%8E%B7%E5%8F%96Git%E4%BB%93%E5%BA%93"><span class="toc-text">（2）获取Git仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">（3）本地仓库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%B0%86%E6%96%87%E4%BB%B6%E5%8A%A0%E5%85%A5%E5%88%B0%E7%BC%93%E5%AD%98%E5%8C%BA"><span class="toc-text">①将文件加入到缓存区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%B0%86%E6%9A%82%E5%AD%98%E5%8C%BA%E7%9A%84%E6%96%87%E4%BB%B6%E6%8F%90%E4%BA%A4%E5%88%B0%E6%9C%AC%E5%9C%B0%E7%89%88%E6%9C%AC%E5%BA%93"><span class="toc-text">②将暂存区的文件提交到本地版本库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="toc-text">③查看日志</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">（4）远程仓库操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9C"><span class="toc-text">（5）分支操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF"><span class="toc-text">①查看分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="toc-text">②创建分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="toc-text">③切换分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E5%B0%86%E5%88%86%E6%94%AF%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-text">④将分支推送到远程仓库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="toc-text">⑤合并分支</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81git%E5%85%8B%E9%9A%86%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E6%8C%87%E5%AE%9A%E5%88%86%E6%94%AF%E6%96%B9%E6%B3%95%EF%BC%88%E9%99%84%E5%B8%B8%E7%94%A8git%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-text">11、git克隆远程仓库的指定分支方法（附常用git配置命令）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%99%AE%E9%80%9A%E5%85%8B%E9%9A%86%E6%96%B9%E5%BC%8F"><span class="toc-text">（1）普通克隆方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%85%8B%E9%9A%86%E8%BF%9C%E7%A8%8B%E6%8C%87%E5%AE%9A%E5%88%86%E6%94%AF"><span class="toc-text">（2）克隆远程指定分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%B8%B8%E7%94%A8git%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="toc-text">（3）常用git配置命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81Git%E6%8F%90%E7%A4%BA%E2%80%9Cwarning-LF-will-be-replaced-by-CRLF-%E2%80%9D%E6%9C%80%E8%AF%A6%E7%BB%86%E8%A7%A3%E9%87%8A-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">12、Git提示“warning: &#x3D;&#x3D;LF will be replaced by CRLF&#x3D;&#x3D;”最详细解释+解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%EF%BC%9A"><span class="toc-text">解决办法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9C%8B%E6%96%87%E7%AB%A0%EF%BC%9A"><span class="toc-text">接下来看文章：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A"><span class="toc-text">1.问题描述：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B3%A8%E8%A7%A3%EF%BC%9A"><span class="toc-text">2.注解：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-LF%E5%92%8CCRLF%E5%8C%BA%E5%88%AB"><span class="toc-text">(2)LF和CRLF区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%86%E6%9E%90%E9%97%AE%E9%A2%98"><span class="toc-text">3.分析问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%AD%A4%E9%97%AE%E9%A2%98%E7%9A%84%E8%B4%9F%E9%9D%A2%E5%BD%B1%E5%93%8D"><span class="toc-text">4.此问题的负面影响</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By 小鹏</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">博客主题链接文档 <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>